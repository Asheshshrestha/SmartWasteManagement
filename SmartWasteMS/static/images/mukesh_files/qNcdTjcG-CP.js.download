if (self.CavalryLogger) { CavalryLogger.start_js(["mLrlr"]); }

__d("BaseUnitCarousel",["csx","Animation","DOM","Ease","Event","Locale","tidyEvent"],(function(a,b,c,d,e,f,g){__p&&__p();var h=39,i=3;a=function(){"use strict";__p&&__p();function a(a){__p&&__p();this.config=a;this.logImpressionsOnSlide=a.log_impressions_on_slide?a.log_impressions_on_slide:!1;this.positionProperty=b("Locale").isRTL()?"margin-right":"margin-left";var c=a.elements;this.loggedItems={};this.queuedAnimations=0;this.itemWidth=a.item_width;this.visibleCount=a.visible_count;this.visibleIndex=0;this.slideCount=a.slide_count?a.slide_count:i;this.slideAdjust=a.slide_adjust!=null?a.slide_adjust:h;this.endElementAlign=a.end_element_align;this.carousel=c.node;this.circularCarousel=a.circular_carousel;this.startOffset=a.start_offset;this.position=this.startOffset;this.grid=c.grid;this.grid.childElementCount<=2*this.slideCount&&(this.circularCarousel=!1);if(this.circularCarousel){for(var d=0;d<this.slideCount;d++)this.grid.insertBefore(this.grid.lastChild,this.grid.firstChild);this.$1(this.slideCount)}this.grid.style[this.positionProperty]=this.position+"px";this.grid.style.width=this.itemWidth*this.visibleCount+"px";this.serviceID=c.service_id;this.location=c.location;this.pager=c.pager;this.enableAutoScrolling=a.enable_auto_scrolling;this.enableLargePager=a.enable_large_pager;this.prevPager=c.prev_pager;this.nextPager=c.next_pager;this.enableLargePager?b("tidyEvent")([b("Event").listen(this.nextPager,"click",this.slideLeft.bind(this)),b("Event").listen(this.prevPager,"click",this.slideRight.bind(this))]):b("tidyEvent")([this.pager.subscribe("next",this.slideLeft.bind(this)),this.pager.subscribe("prev",this.slideRight.bind(this))]);this.logImpressions();this.tryLoadMore();this.$2()}var c=a.prototype;c.$1=function(a){this.position-=a*this.itemWidth,this.grid.style[this.positionProperty]=this.position+"px",this.visibleIndex+=a};c.canSlideLeft=function(){return this.visibleIndex+this.visibleCount<this.grid.childElementCount};c.canSlideRight=function(){return this.visibleIndex>=1};c.onXout=function(a,c){__p&&__p();if(!c)return;if(this.grid.childElementCount===0){b("DOM").remove(this.carousel);return}this.grid.childElementCount<=2*this.slideCount&&this.circularCarousel&&(this.circularCarousel=!1,this.position+=this.startOffset,this.grid.style[this.positionProperty]=this.position+"px");if(this.grid.childElementCount>=this.visibleCount){a=this.visibleIndex+this.visibleCount;c=this.grid.childElementCount-a;c<0&&this.slide(-c)}this.$2();this.logImpressions();this.tryLoadMore()};c.slide=function(a){__p&&__p();this.toggleXouts(this.visibleIndex,this.visibleIndex+this.visibleCount,!0);var c=this.visibleIndex+a,d=this.computeAdjustment(c,a);c+this.visibleCount>=this.grid.childElementCount&&(c=this.grid.childElementCount-this.visibleCount);c<0&&(c=0);a=c-this.visibleIndex;if(c===this.visibleIndex)return;this.position-=a*this.itemWidth+d;this.visibleIndex=c;d=Math.abs(a*this.itemWidth);this.enableLargePager&&this.hidePagerButton();c=!1;a>0&&(c=!0);this.queuedAnimations++;new(b("Animation"))(this.grid).to(this.positionProperty,this.position).duration(d).ease(b("Ease").sineOut).ondone(this.onSlideDone.bind(this,c)).go()};c.onSlideDone=function(a){this.queuedAnimations--,this.logImpressionsOnSlide?this.logImpressions():(a||this.circularCarousel)&&this.logImpressions(),!this.circularCarousel&&a&&this.tryLoadMore(),this.$2()};c.slideRight=function(){if(this.circularCarousel){for(var a=0;a<this.slideCount;a++)this.grid.insertBefore(this.grid.lastChild,this.grid.firstChild);this.$1(this.slideCount)}this.slide(-this.slideCount)};c.slideLeft=function(){if(this.circularCarousel){for(var a=0;a<this.slideCount;a++)this.grid.appendChild(this.grid.firstChild);this.$1(-this.slideCount)}this.slide(this.slideCount)};c.onDone=function(a){this.hasReq=!1;if(a&&a.payload&&a.payload.items){a=a.payload.items;if(a){var c=b("DOM").find(this.grid,"._34bp");b("DOM").insertBefore(c,a);this.onItemsAdded()}}};c.onError=function(){this.hasReq=!1};c.onItemsAdded=function(){this.$2(),this.logImpressions(),this.tryLoadMore()};c.toggleXouts=function(a,b,c){};c.logImpressions=function(){};c.tryLoadMore=function(){};c.hidePagerButton=function(){};c.$2=function(){__p&&__p();this.queuedAnimations||this.toggleXouts(this.visibleIndex,this.visibleIndex+this.visibleCount-1,!1);this.enableAutoScrolling&&this.updateAutoSlideListener();if(this.enableLargePager){this.updateLargePager();return}if(this.grid.childElementCount<this.visibleCount){this.pager.setNextEnabled(!1);this.pager.setPrevEnabled(!1);return}this.pager.setNextEnabled(this.canSlideLeft());this.pager.setPrevEnabled(this.canSlideRight())};c.computeAdjustment=function(a,b){__p&&__p();if(this.circularCarousel)return 0;if(!this.enableAutoScrolling&&!this.enableLargePager)return 0;var c=this.grid.childElementCount-1,d=this.visibleIndex===0&&b>0;b=this.visibleIndex===c&&b<0;var e=a<=0;a=a===c;if(d)return this.endElementAlign&&a?2*-this.slideAdjust:-this.slideAdjust;if(e)return this.endElementAlign&&b?2*this.slideAdjust:this.slideAdjust;if(this.endElementAlign){if(a)return-this.slideAdjust;if(b)return this.slideAdjust}return 0};return a}();e.exports=a}),null);
__d("XFeedEgoImpressionLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ego/feed/logging/impression/",{})}),null);
__d("XFeedEgoLoadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ego/feed/load/",{loading_id:{type:"String",required:!0},ids:{type:"IntVector",required:!0},service_id:{type:"String",required:!0},replace_data:{type:"String",defaultValue:""},location:{type:"String",defaultValue:""},group_size:{type:"Int",defaultValue:1},qid:{type:"Int",required:!0},mf_story_key:{type:"Int",required:!0}})}),null);
__d("EgoUnitCarousel",["csx","Arbiter","AsyncRequest","BaseUnitCarousel","DataAttributeUtils","DOM","XFeedEgoImpressionLoggingController","XFeedEgoLoadController"],(function(a,b,c,d,e,f,g){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){c=a.call(this,c)||this;b("Arbiter").subscribe("x-out-ego-suggestions",c.onXout.bind(babelHelpers.assertThisInitialized(c)));return c}var d=c.prototype;d.tryLoadMore=function(){__p&&__p();if(this.hasReq)return;var a=this.grid.childElementCount-this.visibleIndex-this.visibleCount-1;if(a>7)return;a=b("DOM").scry(this.grid,"._34bp")[0];if(!a)return;a=a.id;var c=[],d=this.grid.childNodes,e=d.length-1,f,g;for(var h=0;h<e;++h){var i=JSON.parse(b("DataAttributeUtils").getDataFt(d[h]));i.ego_id&&c.push(i.ego_id);i.qid&&!f&&(f=i.qid);i.mf_story_key&&!g&&(g=i.mf_story_key)}i=b("XFeedEgoLoadController").getURIBuilder().setString("service_id",this.serviceID).setString("location",this.location).setString("loading_id",a).setIntVector("ids",c).setInt("qid",f).setInt("mf_story_key",g).getURI();new(b("AsyncRequest"))().setURI(i).setHandler(this.onDone.bind(this)).setErrorHandler(this.onError.bind(this)).send();this.hasReq=!0};d.logImpressions=function(){var a=this.grid.children,b=a.length,c=this.visibleIndex+Math.min(this.visibleCount,b)-1;c===b-1&&--c;for(var b=this.visibleIndex;b<=c;++b)this.$EgoUnitCarousel1(a[b])};d.$EgoUnitCarousel1=function(a){__p&&__p();a=JSON.parse(b("DataAttributeUtils").getDataFt(a));if(!a)return;var c=a.ego_id;if(!c)return;if(this.loggedItems[c])return;var d=b("XFeedEgoImpressionLoggingController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(d).setMethod("POST").setData({ego_id:c,qid:a.qid,mf_story_key:a.mf_story_key}).send();this.loggedItems[c]=!0};return c}(b("BaseUnitCarousel"));e.exports=a}),null);
__d("legacy:EditSubscriptions",["SubscriptionLevels","EditSubscriptions"],(function(a,b,c,d,e,f){a.SubscriptionLevels=b("SubscriptionLevels"),a.EditSubscriptions=b("EditSubscriptions")}),3);
__d("FriendStatus",["Arbiter","AsyncRequest","SubscribeButton","createArrayFromMixed","forEachObject"],(function(a,b,c,d,e,f){__p&&__p();var g=function(){"use strict";__p&&__p();function a(a,b){this.lists=null,this.id=a,this.update(b)}var c=a.prototype;c.update=function(a,c){a&&(this.status=a),c&&(this.lists=b("createArrayFromMixed")(c).map(String),this.$1())};c.isComplete=function(){return!!this.lists};c.addToList=function(a){this.lists&&!this.lists.includes(a)&&this.lists.push(a),this.$1()};c.removeFromList=function(a){if(this.lists){a=this.lists.indexOf(a);a!==-1&&this.lists&&this.lists.splice(a,1)}this.$1()};c.updateList=function(a,b){b?this.addToList(a):this.removeFromList(a)};c.$1=function(){b("Arbiter").inform("FriendListMembershipChange",{uid:this.id,lists:this.lists})};a.getFriend=function(c,d){h[c]&&h[c].isComplete()?d(h[c]):i[c]?i[c].push(d):(i[c]=[d],new(b("AsyncRequest"))().setURI("/ajax/friends/status.php").setData({friend:c}).setHandler(function(b){b=b.getPayload();window.setTimeout(a.initFriend.bind(a,c,b.status,b.lists),0)}).send())};a.initFriend=function(b,c,d){var e=h[b]||new a(b);e.update(e.status||c,e.lists||d);h[b]=e;i[b]&&i[b].forEach(function(a){a(e)});i[b]=null};a.setSpecialLists=function(c){var d=a.CLOSE_FRIENDS===null;a.CLOSE_FRIENDS=c.close+"";a.ACQUAINTANCES=c.acq+"";d&&b("forEachObject")(h,function(a,b){a.$1()})};return a}();g.ARE_FRIENDS=1;g.INCOMING_REQUEST=2;g.OUTGOING_REQUEST=3;g.CAN_REQUEST=4;g.CLOSE_FRIENDS=null;g.ACQUAINTANCES=null;var h={},i={};function a(a,c,d){!h[d.uid]?h[d.uid]=new g(d.uid,a):h[d.uid].update(a),b("Arbiter").inform("FriendRequest/change",{uid:d.uid,status:a})}(c=b("Arbiter")).subscribe(["FriendRequest/cancel","FriendRequest/unfriend"],function(a,c){c.profile_id=c.uid,c.connected=!1,b("Arbiter").inform(b("SubscribeButton").UNSUBSCRIBED,c)});c.subscribe(["FriendRequest/cancel","FriendRequest/unfriend","FriendRequest/sendFail"],a.bind(null,g.CAN_REQUEST));c.subscribe(["FriendRequest/confirmFail"],a.bind(null,g.INCOMING_REQUEST));c.subscribe(["FriendRequest/cancelFail","FriendRequest/sent","FriendRequest/sending"],a.bind(null,g.OUTGOING_REQUEST));c.subscribe(["FriendRequest/confirm","FriendRequest/confirming"],a.bind(null,g.ARE_FRIENDS));e.exports=g}),null);
__d("XAddFriendController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/add_friend/action/",{action:{type:"String"},friendlists:{type:"HackType",defaultValue:[]},to_friend:{type:"Int"},how_found:{type:"String"},ref_param:{type:"String"},http_referer:{type:"String"},logging_location:{type:"String"},ego_log_data:{type:"String"},source:{type:"String"},link_data:{type:"HackType",defaultValue:[]},frefs:{type:"HackType",defaultValue:[]},floc:{type:"String"},accept_tag_education:{type:"Bool",defaultValue:!1}})}),null);
__d("FriendEditLists",["Arbiter","AsyncRequest","CSS","DOMQuery","EditSubscriptions","FriendStatus","MenuDeprecated","Parent","ScrollableArea","URI","XAddFriendController","$","ge"],(function(a,b,c,d,e,f){__p&&__p();var g,h=5,i={},j="/ajax/profile/removefriendconfirm.php",k="/ajax/friends/requests/cancel.php",l="/profile.php",m,n,o,p,q={profile_browser:43,fbx_top_bar:1,hovercard:5};function r(a,c,d){__p&&__p();var e=i[a.id],f=function(f){f=b("XAddFriendController").getURIBuilder().setString("action",d?"add_list":"del_list").setInt("to_friend",e.id).setHackType("friendlists",[c]).setString("source",m).setBool("accept_tag_education",!!f&&!!f.accept_tag_education).getURI();e.updateList(c,d);var g;d&&c==b("FriendStatus").CLOSE_FRIENDS?(g=u(a,b("FriendStatus").ACQUAINTANCES),b("MenuDeprecated").isItemChecked(g)&&(b("MenuDeprecated").toggleItem(g),r(a,b("FriendStatus").ACQUAINTANCES,!1))):d&&c==b("FriendStatus").ACQUAINTANCES&&(g=u(a,b("FriendStatus").CLOSE_FRIENDS),b("MenuDeprecated").isItemChecked(g)&&(b("MenuDeprecated").toggleItem(g),r(a,b("FriendStatus").CLOSE_FRIENDS,!1)));g={flid:c,uid:e.id};var h=d?"FriendListHovercard/add":"FriendListHovercard/remove";b("Arbiter").inform(h,g);new(b("AsyncRequest"))().setURI(f).send()};f()}function s(a){a=b("DOMQuery").scry(a,"input")[0];return a&&a.value}function t(a,c,d){if(b("CSS").hasClass(d,"async_saving"))return;var e={uid:c.id};new(b("AsyncRequest"))().setURI(k).setMethod("POST").setData({friend:c.id,cancel_ref:o,floc:p}).setHandler(function(){return b("Arbiter").inform("FriendRequest/cancel",e)}).setErrorHandler(function(){return b("Arbiter").inform("FriendRequest/cancelFail",e)}).setStatusElement(d).send()}function u(a,c){a=b("MenuDeprecated").getItems(a);for(var d=0;d<a.length;d++)if(s(a[d])==c)return a[d];return null}function v(a,c){a=b("MenuDeprecated").getItems(a);a.forEach(function(a){var d=s(a);d=c.lists.includes(d);b("MenuDeprecated").isItemChecked(a)!==d&&b("MenuDeprecated").toggleItem(a)})}function w(a){__p&&__p();var c=b("MenuDeprecated").getItems(a),d=!b("CSS").hasClass(a,"followButtonFlyout")&&!b("CSS").hasClass(a,"likeButtonFlyout"),e=[],f=[],g=0,i=0;c.forEach(function(a){b("CSS").hasClass(a,"neverHide")?(b("CSS").removeClass(a,"underShowMore"),g++):b("MenuDeprecated").isItemChecked(a)?e.push(a):b("CSS").hasClass(a,"neverShow")||b("CSS").hasClass(a,"FriendListCreateTrigger")||!d&&b("CSS").hasClass(a,"friendOptionsOnly")?(b("CSS").addClass(a,"underShowMore"),i++):f.push(a)});var j=h-g;c=e.concat(f);var k=i;c.forEach(function(a){if(b("CSS").hasClass(a,"ShowMoreItem")){j--;return}j?(b("CSS").removeClass(a,"underShowMore"),j--):(b("CSS").addClass(a,"underShowMore"),k=!0)});b("CSS").conditionClass(a,"hasMoreFriendListItems",k);c=b("DOMQuery").scry(a,".FriendListMenuShowMore");c.forEach(function(a){b("CSS").removeClass(a,"FriendListMenuShowMore")})}function x(a,c){b("CSS").conditionClass(a,"FriendListMemorializedUser",c)}function y(a,c){var d=b("DOMQuery").scry(a,".FriendListUnfriend")[0],e=b("DOMQuery").scry(a,".FriendListCancel")[0],f=b("DOMQuery").scry(a,".FriendListFriendship")[0];e&&b("CSS").conditionShow(e,c.status==b("FriendStatus").OUTGOING_REQUEST);if(d){b("CSS").conditionShow(d,c.id!==void 0&&c.status===b("FriendStatus").ARE_FRIENDS);d=b("DOMQuery").find(d,"a");d.setAttribute("ajaxify",new(g||(g=b("URI")))(j).addQueryData({uid:c.id,unref:n,floc:p}).toString())}else b("CSS").conditionClass(a,"NoFriendListActionSeparator",!e||c.status!=b("FriendStatus").OUTGOING_REQUEST);f&&(b("CSS").conditionShow(f,c.status==b("FriendStatus").ARE_FRIENDS),b("DOMQuery").find(f,"a").setAttribute("href",new(g||(g=b("URI")))(l).addQueryData({and:c.id}).toString()))}function z(a,c,d){var e=b("DOMQuery").scry(a,"div.FriendListSubscriptionsMenu");e.length!==0&&b("EditSubscriptions").init(a,c,d)}b("Arbiter").subscribe("FriendRequest/change",function(a,c){for(var d in i){a=b("ge")(d);var e=i[d];a&&e&&e.id==c.uid&&(v(a,e),y(a,e),w(a))}});b("MenuDeprecated").subscribe("select",function(a,c){b("CSS").hasClass(c.item,"ShowMoreItem")&&b("CSS").hasClass(c.menu,"FriendListMenu")&&(b("CSS").addClass(c.menu,"FriendListMenuShowMore"),b("ScrollableArea").poke(c.item))});c={init:function(a,c,d,e,f,g,h){__p&&__p();a=b("$")(a);m=d;n=f;o=g;p=h;var j=q[d]||45;i[a.id]||b("MenuDeprecated").subscribe("select",function(c,d){if(b("DOMQuery").contains(a,d.item))if(b("Parent").byClass(d.item,"FriendListItem")){b("MenuDeprecated").toggleItem(d.item);c=s(d.item);r(a,c,b("MenuDeprecated").isItemChecked(d.item))}else b("Parent").byClass(d.item,"FriendListCancel")?t(a,i[a.id],d.item):b("Parent").byClass(d.item,"FriendListUnfriend")&&b("Arbiter").inform("FriendEditLists/unfriend")});b("CSS").addClass(a,"async_saving");b("FriendStatus").getFriend(c,function(d){x(a,e),v(a,d),y(a,d),i[a.id]=d,w(a),z(a,c,j),b("CSS").removeClass(a,"async_saving")}.bind(this))}};e.exports=a.FriendEditLists||c}),null);
__d("XFriendListFlyoutContentController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/friends/lists/flyout_content/",{})}),null);
__d("FriendListFlyoutController",["csx","cx","Arbiter","AsyncRequest","Button","ContextualLayer","CSS","DataStore","DOM","DOMQuery","Event","FriendEditLists","FriendStatus","Keys","Layer","LayerHideOnEscape","LayerTabIsolation","MenuDeprecated","Parent","ScrollableArea","Style","TabbableElements","UserAgent_DEPRECATED","XFriendListFlyoutContentController","emptyFunction","getActiveElement","ifRequired"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i,j,k,l=null,m=null,n,o,p,q,r,s=1500,t,u=!1,v=["uiButtonConfirm","uiButtonSpecial","_42gz","_42g-","_4jy2","_51tl","_4jy1"],w={init:function(a,c){__p&&__p();w.init=b("emptyFunction");i=a;i.subscribe("mouseenter",F);i.subscribe("mouseleave",function(){u||U()});i.subscribe("hide",H);i.enableBehavior(b("LayerTabIsolation"));i.enableBehavior(b("LayerHideOnEscape"));t=c;l&&b("DOM").setContent(i.getContent(),[l,m]);a=function(a){a=b("Parent").byClass(a.getTarget(),"enableFriendListFlyout");a?(u=!0,n!==a&&(k&&W(),T(a))):u&&W()};c=function(a){a=b("Parent").byClass(a.getTarget(),"enableFriendListFlyout");a&&(n===a?window.clearTimeout(q):(k&&W(),T(a)))};b("Event").listen(document.documentElement,{click:a,mouseover:c,keydown:function(a){__p&&__p();var c=a.getTarget();if(a.getModifiers().any)return;if(!k||b("DOMQuery").isNodeOfType(c,["input","textarea"]))return;var d=b("Event").getKeyCode(a),e;switch(d){case b("Keys").UP:case b("Keys").DOWN:var f=E();e=C(f);A(f[e+(d===b("Keys").UP?-1:1)]);return!1;case b("Keys").SPACE:f=B(c);f&&(x(f),a.prevent());break;default:c=String.fromCharCode(d).toLowerCase();f=E();e=C(f);a=e;d=f.length;while(e>=0&&(a=++a%d)!==e){var g=b("MenuDeprecated").getItemLabel(f[a]);if(g&&g.charAt(0).toLowerCase()===c){A(f[a]);return!1}}}}});b("Arbiter").subscribe("FriendEditLists/unfriend",W);b("Arbiter").subscribe("FriendRequest/cancel",W)},initContent:function(a){b("DOM").appendContent(document.body,a),I(a),window.setTimeout(function(){!l?(l=a,i&&b("DOM").setContent(i.getContent(),[l,m]),b("CSS").show(l),b("Event").listen(l,"click",X),k&&Q(n)):(b("DOM").remove(a),a=null)},0)},initNux:function(a){if(m)return;m=a;i&&b("DOM").setContent(i.getContent(),[l,m])},show:function(a){R(a)},hide:function(a){a===!1?W():U()},resetActiveNode:function(){n=null},setActiveNode:function(a){k&&W(),n=a,o=b("Event").listen(a,"mouseleave",function(){n=null,o&&o.remove()})},setCloseListener:function(a,c){b("DataStore").set(a,"flfcloselistener",c),n!=a&&b("DataStore").set(a,"flfcloselistenertimeout",window.setTimeout(Y.bind(null,a),s))},setCloseListenerTimeout:function(a){s=a}};function x(a){b("UserAgent_DEPRECATED").firefox()&&z(a).blur(),b("MenuDeprecated").inform("select",{menu:y(a),item:a})}function y(a){return b("CSS").hasClass(a,"uiMenuContainer")?a:b("Parent").byClass(a,"uiMenu")}function z(a){return b("DOMQuery").find(a,"a.itemAnchor")}function A(a){a&&D(a)&&(b("MenuDeprecated").$removeSelected(i.getContent()),b("CSS").addClass(a,"selected"),z(a).focus())}function B(a){return b("Parent").byClass(a,"uiMenuItem")}function C(a){var c=b("getActiveElement")();if(c){c=B(c);return a.indexOf(c)}return-1}function D(a){return!b("CSS").hasClass(a,"disabled")&&b("Style").get(a,"display")!=="none"&&b("Style").get(b("Parent").byClass(a,"uiMenu"),"display")!=="none"}function E(){return b("MenuDeprecated").getItems(i.getContent()).filter(D)}function F(){window.clearTimeout(q)}function G(a){for(var c=0;c<v.length;c++)if(b("CSS").hasClass(a,v[c]))return!1;return!0}function H(){__p&&__p();if(n){G(n)&&(b("CSS").removeClass(n,"_52nd"),(b("CSS").hasClass(n,"uiButton")||b("CSS").matchesSelector(n,"._42fu"))&&b("CSS").removeClass(n,"selected"));if(b("DataStore").get(n,"flfcloselistener")){var a=n;b("DataStore").set(n,"flfcloselistenertimeout",window.setTimeout(Y.bind(null,a),s))}}k=!1;P();n=null}function I(a){a=b("DOMQuery").scry(a,'[tabindex="0"]');a.forEach(function(a){a.tabIndex="-1"});a[0]&&(a[0].tabIndex="0")}function J(a){b("DOMQuery").isNodeOfType(a,"label")&&b("CSS").hasClass(a,"uiButton")&&(a=b("Button").getInputElement(a));return a}function K(a){return b("DataStore").get(J(a),"profileid")}function L(a){return b("DataStore").get(J(a),"memorialized")==="true"}function M(a){return b("DataStore").get(J(a),"unref")}function N(a){return b("DataStore").get(J(a),"cancelref")}function O(a){return b("DataStore").get(J(a),"floc")}function P(){o&&o.remove(),o=null,r&&b("Layer").unsubscribe(r),r=null,q&&window.clearTimeout(q),q=null}function Q(a){var c=K(a),d=L(a),e=b("DataStore").get(a,"flloc"),f=M(a),g=N(a),h=O(a);b("FriendEditLists").init(l,c,e,d,f,g,h);b("CSS").conditionClass(l,"followButtonFlyout",b("CSS").hasClass(a,"profileFollowButton"));b("CSS").conditionClass(l,"friendButtonFlyout",b("CSS").hasClass(a,"FriendRequestFriends")||b("CSS").hasClass(a,"FriendRequestIncoming")||b("CSS").hasClass(a,"FriendRequestOutgoing"));b("CSS").conditionClass(l,"likeButtonFlyout",b("CSS").hasClass(a,"profileLikeButton"));c=b("DOMQuery").scry(l,"div.uiScrollableArea")[0];c&&b("ScrollableArea").poke(c);e=b("TabbableElements").find(l)[0];e&&e.focus()}function R(a){__p&&__p();if(!i||k)return;i.setContext(a);i.setCausalElement(a);a.setAttribute("aria-expanded","true");G(a)&&(b("CSS").addClass(a,"_52nd"),(b("CSS").hasClass(a,"uiButton")||b("CSS").matchesSelector(a,"._42fu"))&&b("CSS").addClass(a,"selected"));i.show();n=a;k=!0;var c=null;if(l)c="show",Q(a);else{c="init_show";var d=parseInt(K(a),10);if(d){d=b("XFriendListFlyoutContentController").getURIBuilder().getURI();new(b("AsyncRequest"))(d).setStatusElement(i.getContent()).send()}}P();o=b("Event").listen(a,"mouseleave",U);r=b("Layer").subscribe("show",S);b("DataStore").get(a,"flfcloselistener")&&window.clearTimeout(b("DataStore").remove(a,"flfcloselistenertimeout"));d=K(a);b("FriendStatus").getFriend(d,function(d){d.status==b("FriendStatus").ARE_FRIENDS&&new(b("AsyncRequest"))().setURI("/ajax/friends/lists/flyout_log.php").setData({target_id:K(a),unref:M(a),action:c}).send();if(!m)return;d.status==b("FriendStatus").OUTGOING_REQUEST?(b("CSS").show(m),b("AsyncRequest").bootstrap("/ajax/friends/lists/nux_flyout.php",null,!0)):b("CSS").hide(m)});(!j||a.id!==j.id)&&(b("Arbiter").inform("listeditor/close_editor"),b("Arbiter").inform("friend-list/close_editor"));j=a}function S(a,c){(!(c instanceof b("ContextualLayer"))||!b("DOMQuery").contains(n,c.getContext()))&&U()}function T(a){n=a,p=window.setTimeout(R.bind(null,a),t),o=b("Event").listen(a,"mouseleave",function(){window.clearTimeout(p),n=null,o&&o.remove()})}function U(){q=window.setTimeout(W,150)}function V(){var a=b("ifRequired")("Dialog",function(a){return a});if(a){a=a.getCurrent();return a&&b("DOMQuery").scry(a,".friendListDialogTourCarousel")[0]}}function W(){if(V())return;u=!1;if(i){i.hide();var a=i.getCausalElement();a&&a.setAttribute("aria-expanded","false")}}function X(a){a=b("Parent").byTag(a.getTarget(),"a");a&&b("CSS").hasClass(a,"FriendListActionItem")&&U()}function Y(a){a=b("DataStore").remove(a,"flfcloselistener");a&&a()}e.exports=a.FriendListFlyoutController||w}),null);
__d("XProfileViewAsFriendRequestPromptController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/profile/show_friend_request_viewas_prompt/",{})}),null);
__d("AddFriendButton",["Arbiter","AsyncRequest","AsyncResponse","Banzai","CSS","DOMQuery","Event","FriendListFlyoutController","FriendStatus","Style","SubscribeButton","URI","XProfileViewAsFriendRequestPromptController","XPubcontentChainedSuggestionsController","collectDataAttributes","ge","getVendorPrefixedName","goURI"],(function(a,b,c,d,e,f){__p&&__p();var g,h={ERROR_ALREADY_ADDED:1431005,init:function(a,c,d,e,f,i,j,k,l,m,n,o,p,q,r,s){__p&&__p();var t,u=a.id,v=null,w=(t=b("DOMQuery")).scry(a,".addButton")[0],x=t.scry(a,".addFriendText")[0],y=t.scry(a,".outgoingButton")[0],z=t.scry(a,".incomingButton")[0],A=t.scry(a,".friendButton")[0],B=t.scry(a.parentNode.parentNode.parentNode,".friend_status_confirmed")[0],C=t.scry(a.parentNode,".suggestFriendsButton")[0];function D(d,h,m){var r=new(g||(g=b("URI")))(w.getAttribute("ajaxify")),t=b("collectDataAttributes")(a,["ft","gt"]);new(b("AsyncRequest"))().setURI(i).setData({to_friend:c,action:d,how_found:e,ref_param:f,link_data:t,outgoing_id:y.id,xids:r.getQueryData().xids,logging_location:j,no_flyout_on_click:k,ego_log_data:l,http_referer:n,floc:p,frefs:q}).setErrorHandler(h).setServerDialogCancelHandler(m).setRelativeTo(y).send();if(o&&d==="add_friend"){t=b("XPubcontentChainedSuggestionsController").getURIBuilder().setInt("friendid",c).getURI();new(b("AsyncRequest"))().setURI(t).send()}s&&J();b("Arbiter").inform(b("SubscribeButton").SUBSCRIBED,{profile_id:c.toString(),connected:!0,chaining:!1})}function E(c,d){__p&&__p();x?b("CSS").hide(x):w&&(r&&b("CSS").hide(r),b("CSS").hide(w));y&&b("CSS").hide(y);z&&b("CSS").hide(z);A&&b("CSS").hide(A);c&&(b("CSS").show(c),r&&"Requestable"===d&&b("CSS").show(r));if("Outgoing"==d&&v!=d&&m){var e=b("getVendorPrefixedName")("transition"),f=b("Style").get(c,e),g={backgroundColor:"transparent",borderColor:b("Style").get(c,"borderLeftColor")};g[e]="2s";var h=b("Event").listen(c,b("getVendorPrefixedName")("transitionend"),function(){b("Style").apply(c,{transition_prop:f}),h.remove()});b("Style").apply(c,g)}"Requestable"==d&&v!=d&&(C&&b("CSS").hide(C));v&&b("CSS").removeClass(a,"fStatus"+v);v=d;b("CSS").addClass(a,"fStatus"+d);b("FriendListFlyoutController").resetActiveNode()}function F(a){b("CSS").hasClass(a,"enableFriendListFlyout")?b("FriendListFlyoutController").show(a):b("FriendListFlyoutController").hide()}var G=b("Arbiter").subscribe("FriendRequest/change",function(a,d){K();if(d.uid!=c)return;switch(d.status){case b("FriendStatus").ARE_FRIENDS:return E(A,"Friends");case b("FriendStatus").INCOMING_REQUEST:return E(z,"Incoming");case b("FriendStatus").OUTGOING_REQUEST:return E(y,"Outgoing");case b("FriendStatus").CAN_REQUEST:B&&b("CSS").hide(B);return E(x?x:w,"Requestable")}}),H=b("Arbiter").subscribe("FriendRequest/unfriend",function(a,d){K(),d.uid===c&&d.shouldHideButton===!0&&b("CSS").hide(w)}),I;d&&(I=b("Arbiter").subscribe("FriendRequest/confirm",function(a,e){K(),e.uid==c&&b("goURI")(d)}));w&&b("Event").listen(w,"click",function(){b("Arbiter").inform("FriendRequest/sending",{uid:c}),k?b("FriendListFlyoutController").setActiveNode(y):F(y),D("add_friend",function(a){var d=a.error==h.ERROR_ALREADY_ADDED?"FriendRequest/sent":"FriendRequest/sendFail";b("Arbiter").inform(d,{uid:c});b("FriendListFlyoutController").hide();b("AsyncResponse").defaultErrorHandler(a)},function(a){b("Arbiter").inform("FriendRequest/sendFail",{uid:c}),b("FriendListFlyoutController").hide()})});function J(){if(b("ge")("profileEscapeHatchContentID")){var a=b("XProfileViewAsFriendRequestPromptController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(a).send();b("Banzai").post("view_as_friend_request_prompt",{event:"impression"})}}function K(){if(b("ge")(u))return;G&&G.unsubscribe();I&&I.unsubscribe();H&&H.unsubscribe();G=null;I=null;H=null}}};e.exports=h}),null);
__d("XEgoHideLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ego/feed/logging/xout/",{ego_id:{type:"Int",required:!0},qid:{type:"Int",required:!0},mf_story_key:{type:"Int",required:!0},service_id:{type:"String",required:!0}})}),null);
__d("PymkXout",["Arbiter","AsyncSignal","CSS","DOM","DOMQuery","Event","PymkFunnelLogger","XEgoHideLoggingController"],(function(a,b,c,d,e,f){__p&&__p();a={init:function(a,c,d){b("Event").listen(c,"click",function(c){this._logForEgo(a);(d==="pymk_jewel"||d==="pymk_jewel_first_page"||d==="friends_center")&&this._logForPymkFunnel(a,d);d==="pymk_jewel"||d==="pymk_jewel_first_page"?b("CSS").hide(a):b("DOM").remove(a);b("Arbiter").inform("pymk-x-out",{location:d});c=c.getTarget().getAttribute("data-pymk-id");c&&b("Arbiter").inform("x-out-ego-suggestions",{id:c})}.bind(this))},_logForEgo:function(a){a=a.getAttribute("data-ft");a=a==null?null:JSON.parse(a);if(a&&a.ego_id){a=b("XEgoHideLoggingController").getURIBuilder().setInt("ego_id",a.ego_id).setInt("qid",a.qid).setInt("mf_story_key",a.mf_story_key).setString("service_id","PYMK").getURI();new(b("AsyncSignal"))(a,{}).send()}},_logForPymkFunnel:function(a,c){var d=b("DOMQuery").find(a,"input.friendBrowserID");d=parseInt(d.value,10);a=parseInt(a.getAttribute("data-signature"),10);b("PymkFunnelLogger").logXOut(d,a,c)}};e.exports=a}),null);
__d("FriendButtonIcon",["Arbiter","Button","FriendStatus"],(function(a,b,c,d,e,f){e.exports={register:function(a,c,d){b("Arbiter").subscribe("FriendListMembershipChange",function(e,f){if(f.uid==d){e=f.lists.includes(b("FriendStatus").CLOSE_FRIENDS);f=f.lists.includes(b("FriendStatus").ACQUAINTANCES);e&&!f?b("Button").setIcon(a,c.close):f&&!e?b("Button").setIcon(a,c.acquaintance):b("Button").setIcon(a,c.friend)}})}}}),null);
__d("FriendListMenu",["Arbiter","AsyncRequest","CSS","DOM","Event","Focus","HTML","Input","Keys","MenuDeprecated","Parent"],(function(a,b,c,d,e,f){__p&&__p();a={init:function(a){__p&&__p();b("MenuDeprecated").register(a,!1);var c=b("DOM").find(a,".FriendListCreateTrigger"),d=b("DOM").find(a,".CreateListInputItem"),e=b("DOM").find(d,".createListInput");b("MenuDeprecated").subscribe("select",function(d,f){f.item==c&&(b("CSS").addClass(a,"FriendListMenuCreate"),b("Focus").set(e))});b("Event").listen(e,"blur",function(c){b("Input").isEmpty(e)&&b("CSS").removeClass(a,"FriendListMenuCreate")});b("Event").listen(e,"keydown",function(c){b("Event").getKeyCode(c)==b("Keys").RETURN&&/[^\s]/.test(e.value)&&new(b("AsyncRequest"))().setURI("/ajax/friends/lists/create.php").setData({name:e.value,id:a.id}).setHandler(function(){b("Input").reset(e),b("CSS").removeClass(a,"FriendListMenuCreate")}).send()});b("Arbiter").subscribe("friend-list/new",function(d,e){d=b("HTML")(e.new_li).getRootNode();b("DOM").insertBefore(c,d);e.id===a.id?(b("MenuDeprecated").focusItem(d),b("MenuDeprecated").inform("select",{menu:b("Parent").byClass(d,"uiMenu"),item:d})):b("MenuDeprecated").toggleItem(d)});b("Arbiter").subscribe("friend-list/close_editor",function(){var c=b("Parent").byClass(a,"FlyoutFriendMenu");b("CSS").removeClass(c,"addToListsOpen");b("CSS").addClass(c,"addToListsClosed")})},addToAnotherList:function(a,c){b("Event").listen(a,"click",function(c){c=b("Parent").byClass(a,"FlyoutFriendMenu");b("CSS").removeClass(c,"addToListsClosed");b("CSS").addClass(c,"addToListsOpen")})},goBack:function(a,c){b("Event").listen(a,"click",function(c){c=b("Parent").byClass(a,"FlyoutFriendMenu");b("CSS").removeClass(c,"addToListsOpen");b("CSS").addClass(c,"addToListsClosed")})}};e.exports=a}),null);
__d("RestrictedFriendListEducation",["Arbiter","AsyncRequest"],(function(a,b,c,d,e,f){__p&&__p();var g,h;function i(a,c){if(c.flid==g)if(a=="FriendListHovercard/add"){if(h)return;h=!0;new(b("AsyncRequest"))().setURI("/ajax/friends/lists/restricted_edu.php").setData({target:c.uid,flid:c.flid}).send()}else a=="RestrictedListNUX/okay"&&new(b("AsyncRequest"))().setURI("/ajax/friends/lists/nux_log.php").setData(c).send();return!0}a={init:function(a){g=a,b("Arbiter").subscribe(["FriendListHovercard/add","RestrictedListNUX/okay"],i)}};e.exports=a}),null);
__d("ProfileThingsInCommonLogger",["Event","FacebookAppIDs","ProfileEngagementTypedLogger","tidyEvent"],(function(a,b,c,d,e,f){"use strict";a={logClick:function(a){b("tidyEvent")(b("Event").listen(a.element,"click",function(){var c=new(b("ProfileEngagementTypedLogger"))().setProductBucket("things_in_common").setProfileIDDummy(a.profileId).setSurface("timeline").setEngagementType("click").setItemType(a.itemType).setEventMetadata(a.eventMetadata).setAppID(b("FacebookAppIDs").WWW);c.log()}))}};e.exports=a}),null);
__d("FbFeedAttachmentEgoHScroll",["csx","cx","CSS","DOM","EgoUnitCarousel","Event","debounce"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.updateAutoSlideListener=function(){this.$FbFeedAttachmentEgoHScroll5(),this.canSlideLeft()&&this.$FbFeedAttachmentEgoHScroll6("left",this.visibleIndex+this.visibleCount),this.canSlideRight()&&this.$FbFeedAttachmentEgoHScroll6("right",this.visibleIndex-1)};d.updateLargePager=function(){b("CSS").removeClass(this.carousel,"_vxr"),this.$FbFeedAttachmentEgoHScroll7(!0),this.$FbFeedAttachmentEgoHScroll7(!1),b("CSS").conditionClass(this.carousel,"_vxs",this.canSlideLeft()&&this.canSlideRight()),b("CSS").conditionClass(this.carousel,"_vtd",this.canSlideRight())};d.hidePagerButton=function(){b("CSS").addClass(this.carousel,"_vxr")};d.$FbFeedAttachmentEgoHScroll7=function(a){var c=this,d=a?"_vxt":"_vxu",e=a?"_vxv":"_vxw";(a?this.canSlideRight():this.canSlideLeft())?(b("CSS").removeClass(this.carousel,e),b("CSS").removeClass(this.carousel,d)):(b("CSS").addClass(this.carousel,e),setTimeout(function(){b("CSS").addClass(c.carousel,d)},500))};d.$FbFeedAttachmentEgoHScroll5=function(){this.$FbFeedAttachmentEgoHScroll1&&this.$FbFeedAttachmentEgoHScroll1.remove(),this.$FbFeedAttachmentEgoHScroll1=null,this.$FbFeedAttachmentEgoHScroll2&&this.$FbFeedAttachmentEgoHScroll2.remove(),this.$FbFeedAttachmentEgoHScroll2=null,this.$FbFeedAttachmentEgoHScroll3&&this.$FbFeedAttachmentEgoHScroll3.remove(),this.$FbFeedAttachmentEgoHScroll3=null,this.$FbFeedAttachmentEgoHScroll4&&this.$FbFeedAttachmentEgoHScroll4.remove(),this.$FbFeedAttachmentEgoHScroll4=null};d.$FbFeedAttachmentEgoHScroll6=function(a,c){__p&&__p();if(isNaN(c)||a!=="left"&&a!=="right")return;if(a==="left"){var d=b("debounce")(this.slideLeft.bind(this),1e3,this);this.$FbFeedAttachmentEgoHScroll1=b("Event").listen(this.grid.children[c],"mouseover",d);this.$FbFeedAttachmentEgoHScroll3=b("Event").listen(this.grid.children[c],"mouseout",function(){d.reset()})}else{var e=b("debounce")(this.slideRight.bind(this),1e3,this);this.$FbFeedAttachmentEgoHScroll2=b("Event").listen(this.grid.children[c],"mouseover",e);this.$FbFeedAttachmentEgoHScroll4=b("Event").listen(this.grid.children[c],"mouseout",function(){e.reset()})}};d.toggleXouts=function(a,c,d){__p&&__p();var e=Math.min(a,c);a=Math.max(a,c);c=this.grid.children;e=Math.max(e,0);a=Math.min(a,c.length-1);var f;for(var e=e;e<=a;++e){f=c[e];f=b("DOM").scry(f,"._1r7n")[0];f&&(d?b("CSS").hide(f):b("CSS").show(f))}};return c}(b("EgoUnitCarousel"));e.exports=a}),null);