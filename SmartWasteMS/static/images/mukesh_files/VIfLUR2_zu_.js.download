if (self.CavalryLogger) { CavalryLogger.start_js(["Vl5W3"]); }

__d("LoggedInAccountSwitcherTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:LoggedInAccountSwitcherLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:LoggedInAccountSwitcherLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:LoggedInAccountSwitcherLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setBadgeHasCount=function(a){this.$1.badge_has_count=a;return this};c.setBadgeShown=function(a){this.$1.badge_shown=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setSurface=function(a){this.$1.surface=a;return this};c.setUsersCount=function(a){this.$1.users_count=a;return this};c.setVC=function(a){this.$1.vc=a;return this};return a}();c={badge_has_count:!0,badge_shown:!0,event:!0,surface:!0,users_count:!0,vc:!0};e.exports=a}),null);
__d("XLoggedInAccountSwitcherBlueBarBadgeController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/logged_in_account_switcher/badge/",{})}),null);
__d("XLoggedInAccountSwitcherBlueBarContentController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/logged_in_account_switcher/content/",{})}),null);
__d("XLoginAccountSelectorRemoveAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/login/device-based/async/remove/",{cuid:{type:"String"},flow:{type:"Enum",enumType:1}})}),null);
__d("LoggedInAccountSwitcher",["csx","cx","Arbiter","AsyncRequest","CSS","DOM","DOMQuery","Event","LoggedInAccountSwitcherTypedLogger","ServiceWorkerLoginAndLogout","XLoggedInAccountSwitcherBlueBarBadgeController","XLoggedInAccountSwitcherBlueBarContentController","XLoginAccountSelectorRemoveAsyncController","setImmediate"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i="logged_in_account_switcher:remove_account",j,k,l,m,n,o;({});var p={shown:!1,has_count:!1};a={initBlueBarSwitcher:function(a,c,d,e,f){k=a,m=c,n=d,o=e,this._initDialog(a,d),this._mousemoveListener=b("Event").listen(k,"mousemove",this._onBlueBarMouseMove.bind(this)),f||b("setImmediate")(this._loadBadge)},_loadBadge:function(){var a=b("XLoggedInAccountSwitcherBlueBarBadgeController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(a).setMethod("POST").setRelativeTo(k).send()},_onBlueBarMouseMove:function(){this._mousemoveListener.remove(),this._loadDialogContentIfNeeded()},_loadDialogContentIfNeeded:function(){if(!l){l=!0;var a=b("XLoggedInAccountSwitcherBlueBarContentController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(a).setMethod("POST").setRelativeTo(k).send()}},onBlueBarSwitcherLoad:function(){b("setImmediate")(function(){n.setInnerContent(m.children[0]),b("DOM").empty(m)})},initTile:function(a){a=b("DOMQuery").find(a,"._62l4");a&&this.initElementContainingForm(a,"switch_account")},initRemoveAccountElement:function(a,c,d,e){var f=this,g=b("Arbiter").subscribe(i,function(a,e){e.cuid===d&&(b("DOM").remove(c),g.unsubscribe())});b("Event").listen(a,"click",function(a){a.stopPropagation();j||(j=!0,f._removeUserFromAccountSwitcher(d,e));return!1})},initElementContainingForm:function(a,c){var d=this;b("Event").listen(a,"click",function(e){e.stopPropagation();e.preventDefault();if(!j){e=b("DOMQuery").find(a,"form");e&&(d._logEvent(c,"bluebar"),j=!0,b("Event").fire(e,"submit"),e.submit(),b("ServiceWorkerLoginAndLogout").logout())}})},_initDialog:function(a,c){var d=this;c.subscribe("hide",function(){b("CSS").removeClass(k,"_1dqw"),d._logEvent("close_bluebar_dialog","bluebar"),d._clearBadge()});c.subscribe("show",function(){b("CSS").addClass(k,"_1dqw"),d._clearBadge(),d._hideNux()});b("Event").listen(a,"click",function(){d._logEvent("open_bluebar_dialog","bluebar"),d._loadDialogContentIfNeeded(),c.show()})},_hideNux:function(){o!=null&&o.hide()},_clearBadge:function(){var a=b("DOMQuery").scry(k,"._1dqx")[0];a!=null&&b("DOM").empty(a);p={shown:!1,has_count:!1}},_logEvent:function(a,c){var d=new(b("LoggedInAccountSwitcherTypedLogger"))();c==="bluebar"&&d.setBadgeShown(p.shown);d.setEvent(a).setSurface(c).log()},_removeUserFromAccountSwitcher:function(a,c){this._logEvent("remove_account",c);c=b("XLoginAccountSelectorRemoveAsyncController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(c).setData({cuid:a,flow:"logged_in_account_switcher"}).setMethod("POST").setHandler(function(){j=!1}).send();b("Arbiter").inform(i,{cuid:a})}};e.exports=a}),null);
__d("NotificationComponentsBootloader",["Promise","JSResource"],(function(a,b,c,d,e,f){"use strict";var g=[(c=b("JSResource"))("NotificationJewelList.react").__setRef("NotificationComponentsBootloader"),c("NotificationAsyncWrapper").__setRef("NotificationComponentsBootloader"),c("NotificationSeenState").__setRef("NotificationComponentsBootloader"),c("NotificationStore").__setRef("NotificationComponentsBootloader"),c("NotificationUpdates").__setRef("NotificationComponentsBootloader"),c("NotificationJewelController").__setRef("NotificationComponentsBootloader")];function a(a){var c=a===!0?[b("JSResource")("BizNotificationJewelBodyContainer.react").__setRef("NotificationComponentsBootloader")]:[b("JSResource")("NotificationList.react").__setRef("NotificationComponentsBootloader")];return new(b("Promise"))(function(a){b("JSResource").loadAll(c.concat(g),function(b,c,d){a([b,c,d])})})}e.exports={load:a}}),null);
__d("BanzaiLooper",["Banzai"],(function(a,b,c,d,e,f){var g={retry:!0};function h(a,c){b("Banzai").post("banzai_looper:"+a,c,g)}a={labelBinaryClassificationExample:function(a){h("binary_classification_example",babelHelpers["extends"]({operation:"label"},a))}};e.exports=a}),null);
__d("NotificationJewelPerformanceTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:NotificationJewelPerformanceLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:NotificationJewelPerformanceLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:NotificationJewelPerformanceLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setBadgeCurrentCount=function(a){this.$1.badge_current_count=a;return this};c.setBadgeInitialCount=function(a){this.$1.badge_initial_count=a;return this};c.setClientSessionID=function(a){this.$1.client_session_id=a;return this};c.setClientTimestamp=function(a){this.$1.client_timestamp=a;return this};c.setEagerLoadTriggerAndDelay=function(a){this.$1.eager_load_trigger_and_delay=a;return this};c.setEventName=function(a){this.$1.event_name=a;return this};c.setJewelName=function(a){this.$1.jewel_name=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={badge_current_count:!0,badge_initial_count:!0,client_session_id:!0,client_timestamp:!0,eager_load_trigger_and_delay:!0,event_name:!0,jewel_name:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("JewelLogger",["BanzaiLooper","NotificationJewelPerformanceTypedLogger","NotificationListConfig","QuickPerformanceLogger","gkx","performanceNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("BanzaiLooper").labelBinaryClassificationExample,i=b("NotificationListConfig").sessionID,j=b("gkx")("678513"),k=!1,l=function(b){__p&&__p();babelHelpers.inheritsLoose(a,b);function a(c){var d;d=b.call(this)||this;a.$JewelTypedLoggerWithSession1[c]||(a.$JewelTypedLoggerWithSession1[c]={});d.$JewelTypedLoggerWithSession2=c;return d}var c=a.prototype;c.setEventName=function(a){this.$JewelTypedLoggerWithSession3=a;return b.prototype.setEventName.call(this,a)};c.log=function(){a.$JewelTypedLoggerWithSession1[this.$JewelTypedLoggerWithSession2][this.$JewelTypedLoggerWithSession3]||(a.$JewelTypedLoggerWithSession1[this.$JewelTypedLoggerWithSession2][this.$JewelTypedLoggerWithSession3]=!0,this.setClientSessionID(i),this.setJewelName(this.$JewelTypedLoggerWithSession2),b.prototype.log.call(this))};return a}(b("NotificationJewelPerformanceTypedLogger"));l.$JewelTypedLoggerWithSession1={};function m(a){a.jewelName==="notifications"&&a.eventName==="list_populated"&&q(a.timestamp),new l(a.jewelName).setEventName(a.eventName).setClientTimestamp(a.timestamp).log()}function n(a){var b=a.trigger,c=a.eagerLoadDelayInMs,d=babelHelpers.objectWithoutPropertiesLoose(a,["trigger","eagerLoadDelayInMs"]);b=b+":"+c;new l(a.jewelName).setEventName(d.eventName).setClientTimestamp(d.timestamp).setEagerLoadTriggerAndDelay(b).log()}function o(a){j&&!k&&(b("QuickPerformanceLogger").markerStart(655584,0,a),k=!0)}function p(a){j&&k&&b("QuickPerformanceLogger").annotateMarkerIntArray(655584,"JEWEL_CLICK_COUNT",[a])}function q(a){j&&k&&(b("QuickPerformanceLogger").markerEnd(655584,2,0,a),k=!1)}function r(a){j&&k&&(b("QuickPerformanceLogger").markerEnd(655584,4,0,a),k=!1)}function s(a){j&&k&&(b("QuickPerformanceLogger").markerEnd(655584,3,0,a),k=!1)}a={logDataEagerLoad:function(a){a.eventName==="data_eager_load_trigger"?n(a):m(a)},logJsBootload:function(a){a.eventName==="js_bootload_trigger"?n(a):m(a)},logJewelCancel:function(){r((g||(g=b("performanceNow")))())},logJewelFail:function(){s((g||(g=b("performanceNow")))())},logJewelClick:function(a){a.jewelName==="notifications"&&(o(a.timestamp),p(a.clickCount)),a.clickCount===1&&(new l(a.jewelName).setEventName("first_jewel_click").setClientTimestamp(a.timestamp).setBadgeInitialCount(a.badgeInitialCount).setBadgeCurrentCount(a.badgeCurrentCount).log(),a.jewelName==="notifications"&&h({trace:i,loopName:"notifications_jewel_click",label:"positive"}))},logJewelInitialize:function(a){new l(a.jewelName).setEventName("jewel_initialize").setClientTimestamp(a.timestamp).setBadgeInitialCount(a.badgeInitialCount).log(),a.jewelName==="notifications"&&h({trace:i,loopName:"notifications_jewel_click",label:"tentatively_negative"})},logJewelListComponentEvent:m};e.exports=a}),null);
__d("performanceNowNoFallback",["performance"],(function(a,b,c,d,e,f){var g;e.exports=(g||(g=b("performance"))).now?function(){return(g||(g=b("performance"))).now()}:null}),null);
__d("NotificationEagerLoader",["invariant","Promise","Arbiter","AsyncRequest","BigPipe","JewelLogger","NotificationComponentsBootloader","NotificationDataFetchConfig","NotificationEndpointState","NotificationListConfig","once","performanceAbsoluteNow","performanceNowNoFallback"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("JewelLogger").logDataEagerLoad,j=b("JewelLogger").logJsBootload,k=b("NotificationDataFetchConfig").dataEagerFetchTrigger,l=b("NotificationListConfig").jsBootloadTrigger,m=b("NotificationListConfig").numNotificationsPerPage;m=k!=="none"?m:0;var n={hasData:m>0,targetNumToLoad:m,endpointState:a(),payloadPromise:null};function a(){var a={endpointControllerName:"WebNotificationsPayloadPagelet"};return b("NotificationEndpointState").getInstance(a)}function c(a){if(!b("performanceNowNoFallback"))return b("NotificationComponentsBootloader").load().then(function(){});else{j({jewelName:"notifications",eventName:"js_bootload_trigger",trigger:l,timestamp:b("performanceNowNoFallback")()-a,eagerLoadDelayInMs:0});j({jewelName:"notifications",eventName:"js_bootload_start",timestamp:b("performanceNowNoFallback")()});return b("NotificationComponentsBootloader").load().then(function(){j({jewelName:"notifications",eventName:"js_bootload_end",timestamp:b("performanceNowNoFallback")()})})}}function d(a){__p&&__p();b("performanceNowNoFallback")&&(i({jewelName:"notifications",eventName:"data_eager_load_trigger",trigger:k,timestamp:b("performanceNowNoFallback")()-a,eagerLoadDelayInMs:0}),i({jewelName:"notifications",eventName:"data_eager_load_start",timestamp:b("performanceNowNoFallback")()}));a=n.targetNumToLoad;var c=n.endpointState;a=c.getRequestParams(a);var d;switch(c.endpointControllerName){case"WebNotificationsPayloadPagelet":d="/ajax/notifications/client/get.php";break;case"AdsUnifiedNavNotificationsPayloadPagelet":d="/notifications/client/ads_unified_nav/";break;case"BusinessManagerNotificationsPayloadPagelet":d="/notifications/client/business_manager/";break}d!=null||g(0,5504,c.endpointControllerName);c=new(b("AsyncRequest"))(d).setAllowCrossPageTransition(!0).setData(a);a=c.exec().then(function(a){b("performanceNowNoFallback")&&i({jewelName:"notifications",eventName:"data_eager_load_end",timestamp:b("performanceNowNoFallback")()});return a.getPayload()});n.hasData||g(0,5505);return a}function f(a){__p&&__p();return new(b("Promise"))(function(c,d){__p&&__p();b("Arbiter").subscribeOnce(b("BigPipe").Events.init,b("once")(function(e,f){__p&&__p();e=f.arbiter;if(!e){d("No arbiter from BigPipe init event");return}e.subscribeOnce(b("BigPipe").Events.displayed,b("once")(function(e,f){e=f.ts;f=(h||(h=b("performanceAbsoluteNow")))()-e;a(f).then(function(a){return c(a)})["catch"](function(a){return d(a)})}))}))})}l==="bigpipe_display_done"&&f(c);k==="bigpipe_display_done"&&(n.payloadPromise=f(d));e.exports={eagerlyLoadedData:n}}),null);
__d("NotificationSeenState",["NotificationConstants","NotificationUpdates","createObjectFrom","ifRequired","objectValues"],(function(a,b,c,d,e,f){__p&&__p();var g=1,h=2,i=0,j=g,k=3,l=b("NotificationConstants").PayloadSourceType.INITIAL_LOAD,m={SEEN_AND_READ:k,SEEN_BUT_UNREAD:j,UNSEEN_AND_UNREAD:i},n={};b("ifRequired")("NotificationStore",function(a){a=a.getAllForAllEndpoints();a=b("objectValues")(a);var c=p(a);Object.keys(c).forEach(function(a){var b=c[a];n[a]=b})});function o(a){__p&&__p();var c=[],d=[];Object.keys(a).forEach(function(b){__p&&__p();var e=a[b],f=n[b];n[b]=e;if(f===void 0){c.push(b);d.push(b);return}f=f^e;f&g&&c.push(b);f&h&&d.push(b)});c.length&&b("NotificationUpdates").didUpdateSeenState(c);d.length&&b("NotificationUpdates").didUpdateReadState(d)}b("NotificationUpdates").subscribe("update-notifications",function(a,c){__p&&__p();a=c.nodes;if(!a||!a.length)return;c=c.payloadsource;var d=b("NotificationConstants").PayloadSourceType,e=c==d.ENDPOINT;c=a.filter(function(a){a=a.alert_id;return!e||n[a]===void 0});d=p(c);o(d)});function p(a){var b={};a.forEach(function(a){a.seen_state&&(b[a.alert_id]=m[a.seen_state])});return b}b("NotificationUpdates").subscribe("update-seen",function(a,c){__p&&__p();if(!c.seenState)return;var d=[],e={};Object.keys(c.seenState).forEach(function(a){if(!c.seenState||!c.seenState[a]){d.push(a);return}var b=n[a];b!==void 0&&(e[a]=b|g)});a=babelHelpers["extends"]({},b("createObjectFrom")(d,i),e);o(a)});b("NotificationUpdates").subscribe("update-read",function(a,c){__p&&__p();if(!c.readState)return;var d=[],e={};Object.keys(c.readState).forEach(function(a){if(!c.readState)return;var b=c.readState[a];if(b){d.push(a);return}b=n[a];b!==void 0?e[a]=b&~h:c.payloadsource==l&&(e[a]=j)});a=babelHelpers["extends"]({},b("createObjectFrom")(d,k),e);o(a)});function q(a){a=n[a];return a}var r={isRead:function(a){return q(a)===k},isSeen:function(a){return q(a)!==i},getUnseenCount:function(a,b){return r.getUnseenIDs(a,b).length},getUnseenIDs:function(a,b){var c=Object.keys(n).filter(function(a){return n[a]===i});a&&(c=c.filter(function(c){return b&&b[c]===a}));return c},getUnreadCount:function(){return r.getUnreadIDs().length},getUnreadIDs:function(){return Object.keys(n).filter(function(a){return n[a]!==k})},validateFilter:function(a,b){switch(b){case"seen_only":return r.isSeen(a);case"unseen_only":return!r.isSeen(a);case"read_only":return r.isRead(a);case"unread_only":return!r.isRead(a);case"seen_unread_only":return r.isSeen(a)&&!r.isRead(a);default:return!0}}};e.exports=r}),6);
__d("NotificationJewelHeaderController",["DOM","Event","NotificationSeenState","NotificationUpdates","NotificationUserActions"],(function(a,b,c,d,e,f){a=function(a,c,d){"use strict";b("Event").listen(a,"click",function(){b("NotificationUserActions").markAllNotificationsAsRead(d)}),b("NotificationUpdates").subscribe("read-state-updated",function(){c&&b("DOM").setContent(c,b("NotificationSeenState").getUnreadCount())})};e.exports=a}),null);
__d("DeveloperCommunicationTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:DeveloperCommunicationLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:DeveloperCommunicationLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:DeveloperCommunicationLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAggregatedAlertDataID=function(a){this.$1.aggregated_alert_data_id=a;return this};c.setAppID=function(a){this.$1.app_id=a;return this};c.setDevAlertGroupCustom=function(a){this.$1.dev_alert_group_custom=a;return this};c.setDevAlertID=function(a){this.$1.dev_alert_id=a;return this};c.setDevAlertSource=function(a){this.$1.dev_alert_source=a;return this};c.setDevNotifMedium=function(a){this.$1.dev_notif_medium=a;return this};c.setDevNotifType=function(a){this.$1.dev_notif_type=a;return this};c.setDocPageDescription=function(a){this.$1.doc_page_description=a;return this};c.setEmailCompletionStatus=function(a){this.$1.email_completion_status=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setJewelCompletionStatus=function(a){this.$1.jewel_completion_status=a;return this};c.setMarkdownPageIds=function(a){this.$1.markdown_page_ids=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setNotifDeliveryID=function(a){this.$1.notif_delivery_id=a;return this};c.setNotifEnvironment=function(a){this.$1.notif_environment=a;return this};c.setNotifID=function(a){this.$1.notif_id=a;return this};c.setObjective=function(a){this.$1.objective=a;return this};c.setPocTeam=function(a){this.$1.poc_team=a;return this};c.setRecipientID=function(a){this.$1.recipient_id=a;return this};c.setRef=function(a){this.$1.ref=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setType=function(a){this.$1.type=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};c.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var g={aggregated_alert_data_id:!0,app_id:!0,dev_alert_group_custom:!0,dev_alert_id:!0,dev_alert_source:!0,dev_notif_medium:!0,dev_notif_type:!0,doc_page_description:!0,email_completion_status:!0,event:!0,jewel_completion_status:!0,markdown_page_ids:!0,notif_delivery_id:!0,notif_environment:!0,notif_id:!0,objective:!0,poc_team:!0,recipient_id:!0,ref:!0,time:!0,type:!0,weight:!0};e.exports=a}),null);
__d("DeveloperCommunicationLogger",["CurrentUser","DeveloperCommunicationTypedLogger"],(function(a,b,c,d,e,f){"use strict";function a(a){a=a?"jewel_list_open":"jewel_list_close";new(b("DeveloperCommunicationTypedLogger"))().setEvent(a).setType("dev_alert").setRecipientID(b("CurrentUser").getID()).log()}e.exports={logJewelToggle:a}}),null);
__d("FBAMetaMegaMenuLogger",["invariant","Bootloader"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){j("MegaMenu_HelpButton_Toggle",{action:a?"open":"close"})}function c(a,b){b?j("HelpTray_Article_Click",{article_id:a,search_term:b}):j("HelpTray_Article_Click",{article_id:a})}function d(a){j("HelpTray_SearchBar_Change",{search_term:a})}function f(a){j("MegaMenu_NotificationBell_Toggle",{action:a?"open":"close"})}function h(a,b){a!==null&&a.match(/(\d+)\:(\d+)/)||g(0,518);a=a.split(":");var c=a[0];a=a[1];j("MegaMenu_Notification_Click",{recepient_id:c,notification_id:a,notifType:b})}function i(a){j("MegaMenu_NotificationBell_Show",{unseen_notification_count:a.toString()})}function j(a,c){b("Bootloader").loadModules(["FBAMetaLoggerWWW"],function(b){b=b.META_LOGGER;b.logEvent(a,c)},"FBAMetaMegaMenuLogger")}e.exports={logHelpTrayToggle:a,logHelpTrayArticleClick:c,logHelpTrayPerformSearch:d,logMegaMenuNotificationBellToggle:f,logMegaMenuNotificationClick:h,logMegaMenuNotificationBellShown:i}}),null);
__d("NotificationJewelListController",["DeveloperCommunicationLogger","FBAMetaMegaMenuLogger","NotificationComponentsBootloader","NotificationListConfig","React","ReactDOM","promiseDone"],(function(a,b,c,d,e,f){__p&&__p();var g=b("NotificationListConfig").numNotificationsPerPage,h=null,i=null,j=null;a=function(){"use strict";__p&&__p();function a(a,b){this.$1=!1,this.$2=!1,this.$3=!1,this.$4=a,this.$5=b}var c=a.prototype;c.open=function(){this.$1=!0,this.$6()};c.pause=function(){this.$2=!0,this.$5.pageType==="ANALYTICS"?b("FBAMetaMegaMenuLogger").logMegaMenuNotificationBellToggle(this.$2):this.$5.pageType==="APP_DASHBOARD"&&b("DeveloperCommunicationLogger").logJewelToggle(this.$2),this.$6()};c.unpause=function(){this.$2=!1,this.$5.pageType==="ANALYTICS"?b("FBAMetaMegaMenuLogger").logMegaMenuNotificationBellToggle(this.$2):this.$5.pageType==="APP_DASHBOARD"&&b("DeveloperCommunicationLogger").logJewelToggle(this.$2),this.$6()};c.setFlyoutOpenState=function(a){this.$3=a,this.$6()};c.$6=function(){var a=this;!h||!i?b("promiseDone")(b("NotificationComponentsBootloader").load(this.$5.isBizsite),function(b){var c=b[0],d=b[1];b=b[2];h=c;i=d;j=b;a.$7()}):this.$7()};c.$7=function(){var a=this;if(!h||!i||!j)return;b("ReactDOM").render(b("React").jsx(j,{children:b("React").jsx(h,{hasEverBeenOpened:this.$1,paused:this.$2,isBucketingDisabled:this.$5.isBucketingDisabled,isNotifsIntl:this.$5.isNotifsIntl,isFlyoutOpened:this.$3,tracking:this.$5.tracking,shortenTimestamp:this.$5.shortenTimestamp,businessID:this.$5.businessID,defaultTab:this.$5.defaultTab,maxHeight:this.$5.maxHeight,useChevron:this.$5.useChevron,chevronType:this.$5.chevronType,numPerPage:g,listRenderer:i,upsell:this.$5.upsell||null,endpoint:this.$5.endpoint,sourceView:this.$5.sourceView,settingsUri:this.$5.settingsUri,onClick:function(c,d){a.$5.pageType==="ANALYTICS"&&b("FBAMetaMegaMenuLogger").logMegaMenuNotificationClick(c,d)}})}),this.$4)};return a}();e.exports=a}),null);
__d("NotificationSubscriptions",["Arbiter","ChannelConstants","FacebookWebNotificationsSubscription","NotificationTokens","createNotificationSubscriptions","createObjectFrom"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){(!a.eligible_buckets||!a.eligible_buckets.includes("PRIORITY_INBOX"))&&(a.eligible_buckets=["PRIORITY_INBOX"].concat(a.eligible_buckets||[]));if(!a.sort_keys){var b=a.creation_time||Date.now()/1e3;a.sort_keys=[""+b,b+"000000"]}return a}e.exports=b("createNotificationSubscriptions")({subscribeToNotificationHides:function(a){return b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("notification_hidden"),function(c,d){c=b("NotificationTokens").tokenizeIDs([d.obj.notif_id+""]);d=d.obj.state===1;a(b("createObjectFrom")(c,d))})},subscribeToNotificationReadnessUpdates:function(a){return b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("notifications_read"),function(c,d){c=b("NotificationTokens").tokenizeIDs(d.obj.alert_ids);d=d.obj.new_state;a(b("createObjectFrom")(c,d))})},subscribeToNotificationSeenStateUpdates:function(a){return b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("notifications_seen"),function(c,d){c=b("NotificationTokens").tokenizeIDs(d.obj.alert_ids);d=d.obj.new_state;a(b("createObjectFrom")(c,d))})},subscribeToRealtimeChannelNotifications:function(a){return b("FacebookWebNotificationsSubscription").subscribe({event:"NEW_NOTIFICATION",callback:function(b){a(b?[g(b)]:null)}})}})}),null);
__d("GlobalNotificationSubscriptionsSubscription",["NotificationSubscriptions"],(function(a,b,c,d,e,f){"use strict";e.exports=b("NotificationSubscriptions").setup()}),null);
__d("FacebookWebNotificationsQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2916229815068669"};b.getQueryID=function(){return"351037068876206"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("NotificationSync",["invariant","Arbiter","ChannelConstants","CurrentUser","FacebookWebNotificationsQueryWebGraphQLQuery","NotificationConstants","NotificationUpdates","WebGraphQL","WebPixelRatio","ifRequired","objectValues","promiseDone","qex"],(function(a,b,c,d,e,f,g){__p&&__p();var h=0;function i(){var a={endpointControllerName:"WebNotificationsPayloadPagelet"},c;b("ifRequired")("NotificationStore",function(d){c=b("objectValues")(d.getAll(a))});if(c==null)return null;var d=c.map(function(a){return a.creation_time}).filter(Boolean);return d.length===0?null:Math.max.apply(Math,d)}function j(){__p&&__p();var a=i();if(a==null)return;b("promiseDone")(b("WebGraphQL").exec(new(b("FacebookWebNotificationsQueryWebGraphQLQuery"))({environment:b("qex")._("1243439")?"MAIN_SURFACE":"WEB_DESKTOP",is_work_user:b("CurrentUser").isWorkUser(),newer_than:a,scale:b("WebPixelRatio").get(),should_fetch_buckets:!1,should_fetch_sort_keys:!1,should_include_server_time:!1})),function(a){__p&&__p();if(a){a=(a=a)!=null?(a=a.viewer)!=null?(a=a.notifications)!=null?a.edges:a:a:a;a=a&&a.map(function(a){a=a.node;return a}).filter(Boolean);if(a==null)return;a={nodes:a};b("NotificationUpdates").handleUpdate(b("NotificationConstants").PayloadSourceType.SYNC,a)}})}var k=null,l=0;a={setup:function(a){__p&&__p();l++;(h===null||a>h)&&(h=a);k==null&&(k=b("Arbiter").subscribe(b("ChannelConstants").ON_INVALID_HISTORY,j));var c=!1;return{remove:function(){if(c===!0)return;k!=null||g(0,51);c=!0;l--;l===0&&(k.unsubscribe(),k=null)}}}};e.exports=a}),null);
__d("GlobalNotificationSyncSubscription",["InitialServerTime","NotificationSync"],(function(a,b,c,d,e,f){"use strict";e.exports=b("NotificationSync").setup(b("InitialServerTime").serverTime)}),null);
__d("MockChromeBrowserNotification.react",["cx","fbt","ix","BrowserPushStrings","CurrentUser","DOMContainer.react","Image.react","React","isNode","joinClasses"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("isNode")(this.props.message)?b("React").jsx(b("DOMContainer.react"),{children:this.props.message}):this.props.message,c=!this.props.image&&b("CurrentUser").isWorkUser(),d=this.props.image?this.props.image:this.props.defaultImage;return b("React").jsxs("section",{className:b("joinClasses")(this.props.className,"_257o"),children:[b("React").jsx("span",{className:"_61kd"}),b("React").jsx(b("Image.react"),{className:(c?"":"_ega")+(c?" _2rk4":""),draggable:!1,src:d}),b("React").jsxs("div",{className:"_egb",children:[b("React").jsx("h3",{children:b("BrowserPushStrings").title}),b("React").jsx("p",{children:a}),b("React").jsx("cite",{children:window.location.hostname})]})]})};return c}(b("React").Component);a.defaultProps={message:h._("You have new notifications."),defaultImage:b("CurrentUser").isWorkUser()?i("351290"):i("76304")};e.exports=a}),null);
__d("MockEdgeBrowserNotification.react",["cx","fbt","ix","BrowserPushStrings","CurrentUser","DOMContainer.react","Image.react","React","isNode","joinClasses"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("isNode")(this.props.message)?b("React").jsx(b("DOMContainer.react"),{children:this.props.message}):this.props.message,c=h._("Microsoft Edge");return b("React").jsxs("section",{className:b("joinClasses")(this.props.className,"_2eed"),children:[b("React").jsx(b("Image.react"),{className:(b("CurrentUser").isWorkUser()?"":"_2eee")+(b("CurrentUser").isWorkUser()?" _3_qv":""),draggable:!1,src:this.props.image}),b("React").jsxs("div",{className:"_2eef",children:[b("React").jsx("h3",{className:"_2eeg",children:b("BrowserPushStrings").title}),b("React").jsx("p",{className:"_2eeh",children:a}),b("React").jsxs("div",{className:"_2eei",children:[c," \xb7 ",window.location.hostname]})]})]})};return c}(b("React").Component);a.defaultProps={message:h._("You have new notifications."),image:b("CurrentUser").isWorkUser()?i("351290"):i("363137")};e.exports=a}),null);
__d("MockFirefoxBrowserNotification.react",["cx","fbt","ix","BrowserPushStrings","CurrentUser","DOMContainer.react","Image.react","React","isNode","joinClasses"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("isNode")(this.props.message)?b("React").jsx(b("DOMContainer.react"),{children:this.props.message}):this.props.message,c=this.props.isWindows;return b("React").jsx("section",{className:b("joinClasses")(this.props.className,"_g5o"),children:c?this.$1(a):this.$2(a)})};d.$2=function(a){var c;return(c=b("React")).jsxs("div",{className:"_g5p",children:[c.jsx("div",{className:"_g5q",children:c.jsx(b("Image.react"),{draggable:!1,src:i("355144")})}),c.jsxs("div",{className:"_g5r",children:[c.jsx("h3",{children:b("BrowserPushStrings").title}),c.jsx("cite",{children:window.location.hostname}),c.jsx("p",{children:a})]}),c.jsx(b("Image.react"),{className:(b("CurrentUser").isWorkUser()?"":"_g5u")+(b("CurrentUser").isWorkUser()?" _gcl":""),draggable:!1,src:this.props.image})]})};d.$1=function(a){var c;return(c=b("React")).jsxs("div",{className:"_g5w",children:[c.jsx("h3",{children:b("BrowserPushStrings").title}),c.jsxs("div",{className:"_g5x",children:[c.jsx("span",{className:"_g5z"}),c.jsx("span",{className:"_g7w"})]}),c.jsxs("div",{className:"_g5r",children:[c.jsx(b("Image.react"),{className:(b("CurrentUser").isWorkUser()?"":"_g5u")+(b("CurrentUser").isWorkUser()?" _gcl":""),draggable:!1,src:this.props.image}),b("React").jsxs("div",{className:"_g7x",children:[b("React").jsx("p",{children:a}),b("React").jsx("cite",{children:window.location.hostname})]})]})]})};return c}(b("React").Component);a.defaultProps={message:h._("You have new notifications."),image:b("CurrentUser").isWorkUser()?i("351290"):i("363137"),isWindows:!1};e.exports=a}),null);
__d("MockBrowserNotification.react",["MockChromeBrowserNotification.react","MockEdgeBrowserNotification.react","MockFirefoxBrowserNotification.react","React","UserAgent"],(function(a,b,c,d,e,f){"use strict";e.exports=function(a){var c=b("UserAgent").isPlatform("Windows");if(b("UserAgent").isBrowser("Firefox"))return b("React").jsx(b("MockFirefoxBrowserNotification.react"),babelHelpers["extends"]({},a,{isWindows:c}));else if(b("UserAgent").isBrowser("Edge"))return b("React").jsx(b("MockEdgeBrowserNotification.react"),babelHelpers["extends"]({},a));return b("React").jsx(b("MockChromeBrowserNotification.react"),babelHelpers["extends"]({},a,{isWindows:c}))}}),null);
__d("NotificationPermissionDummyRequest.react",["fbt","React","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogTitle.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=[g._("Get Instant Updates From Your Friends")],c=[g._("Turn on browser notifications to stay up-to-date on Facebook.")],d=this.props.promptTitleIndex<a.length?this.props.promptTitleIndex:0,e=this.props.promptBodyIndex<c.length?this.props.promptBodyIndex:0;return b("React").jsxs(b("XUIDialog.react"),{isStrictlyControlled:!0,onHide:this.props.isBinary?function(){}:this.props.onIgnore,shown:!0,width:445,children:[b("React").jsx(b("XUIDialogTitle.react"),{showCloseButton:!this.props.isBinary,children:b("React").jsx("span",{children:a[d]})}),b("React").jsxs(b("XUIDialogBody.react"),{children:[b("React").jsx("br",{}),b("React").jsx("div",{children:c[e]}),b("React").jsx("br",{})]}),b("React").jsxs(b("XUIDialogFooter.react"),{children:[b("React").jsx(b("XUIDialogButton.react"),{action:"button",label:g._("Not Now"),onClick:this.props.onNotNow,size:"large"}),b("React").jsx(b("XUIDialogButton.react"),{action:"button",label:g._("Ok"),onClick:this.props.onAccept,use:"confirm",size:"large"})]})]})};return c}(b("React").Component);e.exports=a}),null);
__d("NotificationPermissionRequestWithPreview.react",["cx","fbt","ix","BrowserPushStrings","Image.react","ImageBlock.react","MockBrowserNotification.react","React","Spotlight.react","XUIAmbientNUX.react","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogTitle.react"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=function(a){var c,d;return(c=b("React")).jsxs(b("Spotlight.react"),{onHide:a.onHide,shown:a.shown,wash:"xui",children:[c.jsx("span",{ref:function(a){return d=a},className:"_m4w"}),c.jsx("div",{className:"_n3",children:c.jsxs(b("XUIAmbientNUX.react"),{contextRef:function(){return d},shown:a.shown,onCloseButtonClick:a.onHide,position:"below",children:[c.jsx("strong",{children:h._("Almost Done!")}),c.jsx("br",{}),h._("Now, click \"Allow\" to finish activating notifications.")]},"nux")})]})};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={acceptPromptShown:!1,dialogShown:!0,spinnerShown:!1},c.$2=function(a){c.setState({dialogShown:a})},c.$3=function(){c.setState({acceptPromptShown:!c.props.hideSecondStep&&!c.props.showSpinnerWhileRequesting,dialogShown:c.props.showSpinnerWhileRequesting,spinnerShown:!c.props.hideSecondStep&&c.props.showSpinnerWhileRequesting}),c.props.onAccept&&c.props.onAccept(c.$4)},c.$4=function(){c.$1&&c.setState({acceptPromptShown:!1,dialogShown:!1})},c.$5=function(){c.setState({acceptPromptShown:!1})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.UNSAFE_componentWillMount=function(){this.$1=!0};d.componentWillUnmount=function(){this.$1=!1};d.render=function(){var a=this.props,c=a.notificationImage;a=a.notificationMessage;c=b("React").jsx(b("MockBrowserNotification.react"),{className:"_m4x",image:c,message:a});a=this.state.spinnerShown?b("React").jsx(b("XUIDialogBody.react"),{className:"_mjv",children:b("React").jsxs(b("ImageBlock.react"),{spacing:"large",children:[b("React").jsx(b("Image.react"),{draggable:!1,src:i("287648"),width:40,height:40,className:"_mjw"}),b("React").jsxs("div",{children:[b("React").jsx("strong",{children:h._("Almost Done!")}),b("React").jsx("p",{className:"_mjx",children:h._("Now, click \"Allow\" to finish activating notifications.")})]})]})}):b("React").jsxs(b("XUIDialogBody.react"),{className:"_mjy",children:[b("React").jsxs(b("ImageBlock.react"),{spacing:"large",children:[b("React").jsx(b("Image.react"),{draggable:!1,src:i("287648"),className:"_mjw"}),b("React").jsx("div",{children:this.props.isWebNotifications?b("BrowserPushStrings").explanation_web_notifications:b("BrowserPushStrings").explanation})]}),c]});c=this.state.spinnerShown?null:b("React").jsxs(b("XUIDialogFooter.react"),{children:[b("React").jsx(b("XUIDialogButton.react"),{action:"cancel",label:h._("Not Now"),onClick:this.props.onClose}),b("React").jsx(b("XUIDialogButton.react"),{action:"button",label:h._("Turn On"),onClick:this.$3,use:"special"})]});return b("React").jsxs("div",{className:"_m4y",children:[b("React").jsxs(b("XUIDialog.react"),{layerHideOnBlur:!1,onToggle:this.$2,shown:this.state.dialogShown,titleID:"notification-permission-title",width:445,children:[b("React").jsx(b("XUIDialogTitle.react"),{showCloseButton:!1,children:b("React").jsx("span",{id:"notification-permission-title",children:b("BrowserPushStrings").turn_on})}),a,c]}),b("React").jsx(j,{shown:this.state.acceptPromptShown,onHide:this.$5})]})};return c}(b("React").Component);e.exports=a}),null);
__d("JewelBadgeCountRecorder",["invariant","Arbiter","performanceNow"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=Object.create(null);a={onCountUpdated:function(a,c){i[c.jewel]==null&&(i[c.jewel]=[]);a=i[c.jewel];a.push({timestamp:(h||(h=b("performanceNow")))(),count:c.count});a.length>1e3&&a.shift()},getCountAtTimestamp:function(a,b){var c=i[a];c!=null||g(0,2483,a,JSON.stringify(i));c.length>0||g(0,2484,a);a=c.find(function(a,d){var e=c[d+1];return d===0&&b<a.timestamp||b>a.timestamp&&(e==null||b<e.timestamp)});a||g(0,2485);return a.count}};b("Arbiter").subscribe("jewel/count-updated",a.onCountUpdated);e.exports=a}),null);
__d("FriendingSurfaceVisitationTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:FriendingSurfaceVisitationLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:FriendingSurfaceVisitationLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:FriendingSurfaceVisitationLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAppVersion=function(a){this.$1.app_version=a;return this};c.setBadgeCount=function(a){this.$1.badge_count=a;return this};c.setClientTimestamp=function(a){this.$1.client_timestamp=a;return this};c.setIsTab=function(a){this.$1.is_tab=a;return this};c.setRawRefTab=function(a){this.$1.raw_ref_tab=a;return this};c.setRawTab=function(a){this.$1.raw_tab=a;return this};c.setRefPage=function(a){this.$1.ref_page=a;return this};c.setSurface=function(a){this.$1.surface=a;return this};c.setTargetProfileID=function(a){this.$1.target_profile_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={app_version:!0,badge_count:!0,client_timestamp:!0,is_tab:!0,raw_ref_tab:!0,raw_tab:!0,ref_page:!0,surface:!0,target_profile_id:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("JewelCountSideLoader",["invariant","CSS"],(function(a,b,c,d,e,f,g){__p&&__p();var h={},i={},j={};a={queueInstances:function(a,b,c){h[a]={badge:b,root:c}},updateCountAndQueueArgs:function(a,c,d){__p&&__p();var e=i[a];if(e){e.updateCountAndArgs(d,c);return}e=h[a];e||g(0,1889);j[a]={count:c,args:d};b("CSS").conditionClass(e.root,"hasNew",!!c);e.badge.setLegacyContent(c);return},getOverwritesForJewel:function(a){if(j[a.name])return j[a.name];i[a.name]=a;return null}};e.exports=a}),null);
__d("NotificationJewelFunnelLoggingConstants",[],(function(a,b,c,d,e,f){"use strict";e.exports={FUNNEL_LOGGING_NAME:"WWW_NOTIFICATION_FUNNEL",FUNNEL_LOGGING_EVENT:{FETCH_NOTIFICATIONS:"fetch_notifications",OPEN_JEWEL:"open_jewel",CLOSE_JEWEL:"close_jewel",MOUSE_OVER_ON_JEWEL:"mouse_over_on_jewel",SCROLL_TO_FETCH:"scroll_to_fetch",FETCH_NEXT_SET:"fetch_next_set",CLEAR_BADGE_COUNT:"clear_badge_count"}}}),null);
__d("normalizedEventTimestamp",["performance"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;function a(a){if(a!=null)if((g||(g=b("performance")))&&(g||(g=b("performance"))).timing&&(g||(g=b("performance"))).timing.navigationStart&&a>(g||(g=b("performance"))).timing.navigationStart)return a-=(g||(g=b("performance"))).timing.navigationStart;else return a;else if((g||(g=b("performance"))).now)return(g||(g=b("performance"))).now();return null}e.exports=a}),null);
__d("reportData",["Banzai","SessionName","ifRequired"],(function(a,b,c,d,e,f){__p&&__p();var g={retry:!0};function a(a,c){c===void 0&&(c={});c={ft:c.ft||{},gt:c.gt||{}};var d="-",e="r",f=b("ifRequired")("URI",function(a){return a.getRequestURI(!0,!0).getUnqualifiedURI().toString()},function(){return location.pathname+location.search+location.hash});a=[b("SessionName").getName(),Date.now(),"act",Date.now(),0,d,a,d,d,e,f,c,0,0,0,0];b("Banzai").post("eagle_eye_event",a,g)}e.exports=a}),null);
__d("JewelBase",["csx","invariant","Promise","Arbiter","ArbiterMixin","Bootloader","CrossWindowEventEmitter","CSS","DOM","Event","FriendingSurfaceVisitationTypedLogger","FunnelLogger","HTML","JewelBadgeCountRecorder","JewelCountSideLoader","JewelLogger","Keys","MercuryConfig","NotificationJewelFunnelLoggingConstants","Run","TabIsolation","TimeSlice","Toggler","TooltipData","firstClickTimestamp","killswitch","mixin","normalizedEventTimestamp","performance","performanceNow","promiseDone","reportData"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i,j,k=b("JewelLogger").logJewelCancel,l=b("JewelLogger").logJewelClick,m=b("JewelLogger").logJewelInitialize,n=b("NotificationJewelFunnelLoggingConstants").FUNNEL_LOGGING_EVENT,o=b("NotificationJewelFunnelLoggingConstants").FUNNEL_LOGGING_NAME,p=new(b("CrossWindowEventEmitter"))("JewelBase"),q={};function r(){if((i||(i=b("performance")))==null?void 0:(i||(i=b("performance"))).getEntriesByName){var a=(i||(i=b("performance"))).getEntriesByName("first-paint","paint");if(a&&a[0])return b("normalizedEventTimestamp")(a[0].startTime)}return null}a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d){__p&&__p();var e;e=a.call(this)||this;e.name=d.name;e.label=d.label;e.clickCount=0;e.root=c;e.badge=d.badge;e.countNew=0;e.initialCount=d.count||0;e.userCount=0;e.pageCount=0;e.escHandler=null;e.bootload_module=d.bootload_module;e.bootload_args=d.bootload_args;e.bootload_eager_modules=d.bootload_eager_modules;e.bootload_conf=d.bootload_conf;e.bootloading=null;e.togglerInstance=b("Toggler").getInstance(c).setSticky(!1);e.businessID=d.businessID;e.loggerRef=d.loggerRef;m({jewelName:e.name,badgeInitialCount:e.initialCount,timestamp:r()});b("JewelBadgeCountRecorder").onCountUpdated("jewel/initial-count",{jewel:e.name,count:e.initialCount});e.bootload_conf&&e.bootload_conf.eagerLoadingOnInteraction?e.$JewelBase3():b("Run").onAfterLoad(function(){return e.$JewelBase4()});e.bootload_conf&&e.bootload_conf.eagerLoadingOnInteraction&&e.$JewelBase5();d.keepOpenForSnowlift&&e.togglerInstance.setPrePageTransitionCallback(e.$JewelBase6.bind(babelHelpers.assertThisInitialized(e)));q[e.name]=babelHelpers.assertThisInitialized(e);e.$JewelBase7();c=e.getFlyout();c||h(0,5194);var f=new(b("TabIsolation"))(c);b("killswitch")("JEWEL_TOGGLER_INSTANCE_FIXES")?b("Toggler").createInstance(c).setSticky(!1):b("Toggler").createInstance(e.root).setSticky(!1);e.$JewelBase8();b("Toggler").listen("show",e.root,function(a){__p&&__p();var c=this;b("FunnelLogger").appendAction(o,n.OPEN_JEWEL);this.$JewelBase9();this.inform("user-open");this.hasNew()&&this.markSeen();this.reset();b("Arbiter").inform("layer_shown",{type:"Jewel",name:this.name});f.enable();this.setupEvents();this.$JewelBase10();this.bootload_conf&&this.bootload_conf.eagerLoadingOnInteraction?this.$JewelBase11():b("promiseDone")(this.$JewelBase4().then(function(){return c.inform("opened")}))}.bind(babelHelpers.assertThisInitialized(e)));b("Toggler").listen("hide",e.root,function(a,c){k(),b("FunnelLogger").appendAction(o,n.CLOSE_JEWEL),b("FunnelLogger").endFunnel(o),this.hasNew()&&this.markSeen(),this.reset(),this.inform("closed"),b("Arbiter").inform("layer_hidden",{type:"Jewel"}),f.disable(),this.removeEvents(),this.$JewelBase8()}.bind(babelHelpers.assertThisInitialized(e)));b("Arbiter").subscribe("jewel/count-updated",function(a,b){b.jewel==e.name&&e.update(b)});b("Arbiter").subscribe("jewel/hide",function(a,b){e.hide()});p.addListener("count-updated",function(a){a.jewel==e.name&&e.update(a)});return e}var d=c.prototype;d.getRoot=function(){return this.root};d.hide=function(){this.isOpen()&&b("Toggler").hide(this.root)};d.getFlyout=function(){this.$JewelBase1==null&&(this.$JewelBase1=b("DOM").find(this.root,".__tw"));return this.$JewelBase1};d.hasNew=function(){return b("CSS").hasClass(this.root,"hasNew")};d.isOpen=function(){return b("CSS").hasClass(this.root,"openToggler")};d.reset=function(){b("FunnelLogger").appendAction(o,n.CLEAR_BADGE_COUNT),b("CSS").removeClass(this.root,"hasNew")};d.setContent=function(a){var c=b("DOM").find(this.root,"ul.jewelItemList");b("DOM").setContent(c,b("HTML")(a))};d.update=function(a){__p&&__p();var c;a.animation&&this.badge.setAnimation&&this.badge.setAnimation(a.animation);this.countNew=a.count;this.userCount=(c=a.userCount)!=null?c:0;this.pageCount=(c=a.pageCount)!=null?c:0;typeof this.countNew==="number"&&this.countNew<0&&(this.countNew=0);this.badge.setLegacyContent(this.countNew);c=isNaN(this.countNew)||this.countNew>0;b("CSS").conditionClass(this.root,"hasNew",c);this.updatedOnce=!0;this.inform("updated",a,"state")};d.setupEvents=function(){var a=this;this.escHandler=b("Event").listen(document.documentElement,"keydown",function(c){c.keyCode===b("Keys").ESC&&a.hide()})};d.removeEvents=function(){this.escHandler&&(this.escHandler.remove(),this.escHandler=null)};d.markSeen=function(){var a=this,c=function(){b("Arbiter").inform("jewel/count-updated",{jewel:a.name,count:0},"state"),p.emitRemote("count-updated",{jewel:a.name,count:0}),a.inform("marked-seen")};b("TimeSlice").guard(c,"JewelOpen markSeen",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()};d.getButton=function(){this.$JewelBase2==null&&(this.$JewelBase2=b("DOM").find(this.root,"a.jewelButton"));return this.$JewelBase2};d.$JewelBase8=function(){var a=this.getButton();b("TooltipData").set(a,this.label);a.setAttribute("data-tooltip-delay","500")};d.$JewelBase10=function(){b("TooltipData").remove(this.getButton())};d.$JewelBase6=function(a,b){!this.$JewelBase12(b.from)&&!this.$JewelBase12(b.to)&&(this.togglerInstance&&this.togglerInstance.hide())};d.$JewelBase12=function(a){return a&&Object.prototype.hasOwnProperty.call(a.getQueryData(),"theater")};d.$JewelBase9=function(){var a=this;this.clickCount++;var c=this.getButton(),d=(j||(j=b("performanceNow")))();this.clickCount===1&&(d=b("firstClickTimestamp").get(c));d&&(d=b("normalizedEventTimestamp")(d),d&&l({jewelName:this.name,timestamp:d,badgeCurrentCount:b("JewelBadgeCountRecorder").getCountAtTimestamp(this.name,d),badgeInitialCount:this.initialCount,clickCount:this.clickCount}));b("reportData")("jewel_click",{gt:babelHelpers["extends"]({count:this.countNew,initial:this.initialCount,jewel:this.name},this.businessID?{biz_id:this.businessID}:{},this.loggerRef?{ref:this.loggerRef}:{})});this.name==="requests"&&new(b("FriendingSurfaceVisitationTypedLogger"))().setSurface("jewel").setBadgeCount(this.countNew).log();this.name==="mercurymessages"&&b("MercuryConfig").PageThreadlistTabConfig&&b("Bootloader").loadModules(["CurrentUser","WebFunnelLogger","MessengerJewelNotificationWebFunnelAction"],function(c,d,e){new d("MessengerJewelNotificationWebFunnelDefinition").setAction(e.MESSENGER_JEWEL_CLICKED).setSessionKey(c.getAccountID()).addFunnelPayload("pageID",b("MercuryConfig").PageThreadlistTabConfig.pageID).addActionPayload("pageUnseenCount",a.pageCount).addActionPayload("userUnseenCount",a.userCount).markStart().log()},"JewelBase")};d.$JewelBase4=function(){var a=this;if(!this.bootload_module)return b("Promise").resolve();this.bootloading||(this.bootloading=new(b("Promise"))(function(b,c){a.bootload_module.load().then(function(c){new c(a,a.bootload_args),b()})["catch"](c)}));return this.bootloading};d.$JewelBase3=function(){var a=this;this.bootload_eager_modules?this.bootload_eager_modules.loadModules(this):b("Run").onAfterLoad(function(){return a.$JewelBase4()})};d.$JewelBase5=function(){this.bootload_eager_modules&&this.bootload_eager_modules.mount(this)};d.$JewelBase11=function(){var a=this;this.bootload_eager_modules?this.bootload_eager_modules.load(this):b("promiseDone")(this.$JewelBase4().then(function(){return a.inform("opened")}))};d.$JewelBase7=function(){if(this.bootloading)return;var a=b("JewelCountSideLoader").getOverwritesForJewel(this);if(!a)return;this.updateCountAndArgs(a.args,a.count)};d.updateCountAndArgs=function(a,c){for(var d in a)a[d]&&(this.bootload_args[d]=a[d]);c&&b("Arbiter").inform("jewel/count-updated",{jewel:this.name,count:c},"state")};return c}(b("mixin")(b("ArbiterMixin")));e.exports=a}),null);
__d("BlueBarCreateMenuTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:BlueBarCreateMenuLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:BlueBarCreateMenuLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:BlueBarCreateMenuLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setEntrypointStyle=function(a){this.$1.entrypoint_style=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setHasUserCreatedPriorToStartDate=function(a){this.$1.has_user_created_prior_to_start_date=a;return this};c.setMenuElement=function(a){this.$1.menu_element=a;return this};c.setMenuStyle=function(a){this.$1.menu_style=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={entrypoint_style:!0,event:!0,has_user_created_prior_to_start_date:!0,menu_element:!0,menu_style:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("BlueBarCreateMenuLogger",["requireDeferred","BlueBarCreateMenuTypedLogger","CurrentUser"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("requireDeferred")("WebFunnelLogger");a={initModal:function(a,c,d,e){new(b("BlueBarCreateMenuTypedLogger"))().setMenuElement("creation_hub_entrypoint").setMenuStyle(c).setEntrypointStyle(d).setHasUserCreatedPriorToStartDate(e).setEvent("click").log();for(var f=0;f<a.length;f++)a[f]&&(function(){var g=a[f],h=g.name;g=g.element;new(b("BlueBarCreateMenuTypedLogger"))().setMenuElement(h).setMenuStyle(c).setEntrypointStyle(d).setHasUserCreatedPriorToStartDate(e).setEvent("impression").log();g.addEventListener("click",function(){new(b("BlueBarCreateMenuTypedLogger"))().setMenuElement(h).setMenuStyle(c).setEntrypointStyle(d).setHasUserCreatedPriorToStartDate(e).setEvent("click").log()})})()},initDropdown:function(a,c,d){__p&&__p();a.onShow=function(){new(b("BlueBarCreateMenuTypedLogger"))().setMenuElement("creation_hub_entrypoint").setMenuStyle(c).setEntrypointStyle(d).setEvent("click").log(),a.forEachItem(function(a){if(a._data.ctor.name!=null&&!a._data.ctor.name.includes("MenuStaticItem")){a=a._data.id;new(b("BlueBarCreateMenuTypedLogger"))().setMenuElement(a).setMenuStyle(c).setEntrypointStyle(d).setEvent("impression").log();a==="creation_hub_create_group"&&h("[impression][top nav][create menu][group]")}})},a.forEachItem(function(a){if(a._data.ctor.name!=null&&!a._data.ctor.name.includes("MenuStaticItem")){var e=a._data.id;a._onclickHandler=function(){new(b("BlueBarCreateMenuTypedLogger"))().setMenuElement(e).setMenuStyle(c).setEntrypointStyle(d).setEvent("click").log(),e==="creation_hub_create_group"&&h("[click][top nav][create menu][group]")}}})},logEntrypointImpression:function(a,c){new(b("BlueBarCreateMenuTypedLogger"))().setMenuElement("creation_hub_entrypoint").setMenuStyle(a).setEntrypointStyle(c).setEvent("impression").log()}};function h(a){g.onReady(function(c){return new c("GroupsBlueFeedWebFunnelDefinition").setSessionKey(b("CurrentUser").getID()).setAction(a).log()})}e.exports=a}),null);
__d("BrowserPushCommands",[],(function(a,b,c,d,e,f){a="browser_push_ack";b="browser_push_redirect";c="browser_push_window_visible";d={ACK:a,REDIRECT:b,WINDOW_VISIBLE:c};e.exports=d}),null);
__d("BrowserPushMessageRedirectUtil",["Bootloader"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){var c="(messages)(.*?)(?:(tid=))([^&]*)";a=a.match(c);if(!a)return!0;var d=a.pop();b("Bootloader").loadModules(["FantaTabActions"],function(a){a.openTab(d)},"BrowserPushMessageRedirectUtil");return!1};e.exports=a}),null);
__d("BrowserPushMessageHandler",["BrowserPushCommands","BrowserPushMessageRedirectUtil","EventListener","URI","URISchemes","isFacebookURI"],(function(a,b,c,d,e,f){__p&&__p();var g,h;function i(a){__p&&__p();if(a.data.command&&a.data.command===b("BrowserPushCommands").REDIRECT){if(window.onbeforeunload()===void 0)a.ports[0].postMessage({command:b("BrowserPushCommands").ACK,success:!0});else{a.ports[0].postMessage({command:b("BrowserPushCommands").ACK,success:!1});return}a=a.data.uri;if(/^([^.:/?#]+):/.test(a)&&!(g||(g=b("URISchemes"))).isAllowed(/^([^.:/?#]+):/.exec(a)[1])||!b("isFacebookURI")(new(h||(h=b("URI")))(a)))throw new Error("goURI: URI scheme rejected, URI: "+a);b("BrowserPushMessageRedirectUtil")(a)&&(window.location.href=a)}}a={registerRedirectHandler:function(){b("EventListener").listen(window,"message",function(a){a.origin===""&&i(a)}),navigator.serviceWorker&&navigator.serviceWorker.addEventListener&&navigator.serviceWorker.addEventListener("message",function(a){(navigator.serviceWorker&&navigator.serviceWorker.controller&&a.target&&a.target.controller&&a.target.controller===navigator.serviceWorker.controller||new RegExp("^"+window.location.protocol+"//"+window.location.host+"$").test(a.origin))&&i(a)})}};e.exports=a}),null);
__d("BrowserPushVisibilityChanger",["BrowserPushCommands","ClientServiceWorkerMessage","Visibility"],(function(a,b,c,d,e,f){function g(){new(b("ClientServiceWorkerMessage"))(b("BrowserPushCommands").WINDOW_VISIBLE,null).sendViaController()}a={listenForVisibility:function(){b("Visibility").isHidden()||g(),b("Visibility").addListener(b("Visibility").VISIBLE,g)}};e.exports=a}),null);
__d("MPushPermissionUtil",["BanzaiLogger","gkx"],(function(a,b,c,d,e,f){function a(a){var c=b("gkx")("910664");c&&b("BanzaiLogger").log("ChromePushPermissionEventsLoggerConfig",{event:a})}e.exports={logEvent:a}}),null);
__d("PushRegistrationUtils",[],(function(a,b,c,d,e,f){"use strict";var g={normalizeSubscriptionEndpoint:function(a){var b=a.endpoint;"subscriptionId"in a&&!new RegExp("/"+a.subscriptionId+"$").test(b)&&(b+="/"+a.subscriptionId);return b},setupPushRegistrationData:function(a,b){var c=g.normalizeSubscriptionEndpoint(a),d=null;a.toJSON?d=a.toJSON().keys:a.keys&&(d=a.keys);return{app_id:b,push_endpoint:c,subscription_keys:JSON.stringify(d)}}};e.exports=g}),null);
__d("XAsyncPushMuteController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/notifications/settings/push/mute/",{appid:{type:"Int",required:!0},push_endpoint:{type:"String",required:!0},mute_for:{type:"Enum",enumType:0}})}),null);
__d("XAsyncPushMuteStateController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/notifications/settings/push/mute/state/",{appid:{type:"Int",required:!0},push_endpoint:{type:"String",required:!0}})}),null);
__d("PushRegistration",["Promise","BrowserPushMessageHandler","BrowserPushPubKey","BrowserPushVisibilityChanger","MPushPermissionUtil","PushRegistrationUtils","ServiceWorkerRegistration","XAsyncPushMuteController","XAsyncPushMuteStateController","emptyFunction","promiseDone"],(function(a,b,c,d,e,f){__p&&__p();var g=window.Notification,h=new Map();a=function(){"use strict";__p&&__p();a.get=function(b,c){if(h.has(c))return h.get(c);b=new a(b,c);h.set(c,b);return b};function a(b,c){this.$3=b,this.appID=c,!a.$1&&!a.$2&&(a.$1=!1,a.$2=!1)}var c=a.prototype;c.getPushSubscription=function(){var c=this;return new(b("Promise"))(function(d,e){a.pushPermissionIsDenied()&&(b("MPushPermissionUtil").logEvent("permission_denied_or_blocked"),e(new Error("No permission or not supported"))),b("ServiceWorkerRegistration").getWorkerRegistration(c.$3).then(function(a){if(!a){d(null);return}a.pushManager.getSubscription().then(function(a){d(a)})["catch"](e)})["catch"](e)})};c.$4=function(a,c,d,e){a=a.getURIBuilder().getURI();c=new c(a);c.setData(b("PushRegistrationUtils").setupPushRegistrationData(d,this.appID));c.setMethod("post");c.setHandler&&c.setHandler(function(a){a.payload&&a.payload.session_change&&e()});c.send()};c.getMutedUntilInServer=function(a){__p&&__p();var c=this;return new(b("Promise"))(function(d,e){__p&&__p();c.getPushSubscription().then(function(f){if(f){f=b("PushRegistrationUtils").normalizeSubscriptionEndpoint(f);f=b("XAsyncPushMuteStateController").getURIBuilder().setString("push_endpoint",f).setInt("appid",c.appID).getURI();f=new a(f);f.listen("done",function(a){d(a.payload.muteUntilTimestampSec)});f.send()}else e("cannot check mute status for unsubscribed endpoint")})["catch"](e)})};c.muteNotifications=function(a,c){__p&&__p();var d=this;return new(b("Promise"))(function(e,f){__p&&__p();d.getPushSubscription().then(function(g){__p&&__p();if(g){g=b("PushRegistrationUtils").normalizeSubscriptionEndpoint(g);g=b("XAsyncPushMuteController").getURIBuilder().setEnum("mute_for",a).setString("push_endpoint",g).setInt("appid",d.appID).getURI();g=new c(g);g.setMethod("POST");g.listen("done",function(b){a!==0&&b.payload.muteUntilTimestampSec===0?f("operation failed in server"):e(b.payload.muteUntilTimestampSec)});g.send()}else f("no subscription found")})["catch"](f)})};c.getSubscription=function(){var a=this;return new(b("Promise"))(function(c,d){a.getPushSubscription().then(function(a){a?c(b("PushRegistrationUtils").normalizeSubscriptionEndpoint(a)):c(null)})["catch"](d)})};c.maybeRegisterPushAgain=function(a,c,d){var e=this;return new(b("Promise"))(function(f,g){e.getPushSubscription().then(function(g){g?(e.$4(a,c,g,d),f(b("PushRegistrationUtils").normalizeSubscriptionEndpoint(g))):f(null)})["catch"](function(){f(null)})})};c.$5=function(c,d,e){__p&&__p();var f=this;return new(b("Promise"))(function(b,g){__p&&__p();if(a.$2&&!e){g(new Error("sending disable info already"));return}a.$2=!0;var h=c.getURIBuilder().getURI();h=new d(h.toString());h.setData({appid:f.appID,from_browser_settings:e});h.setMethod("post");h.listen?(h.listen("finally",b),h.listen("fail",function(){a.$2=!1,g()})):h.setErrorHandler&&h.setHandler?(h.setErrorHandler(function(){a.$2=!1,g()}),h.setHandler(b)):b();h.send()})};c.isPushRegistered=function(c,d,e,f,g,h,i){var j=this;g===void 0&&(g=!1);h===void 0&&(h=b("emptyFunction"));i===void 0&&(i=!1);b("BrowserPushMessageHandler").registerRedirectHandler();return new(b("Promise"))(function(k,l){j.getPushSubscription().then(function(l){k(!!l||c&&!a.pushPermissionIsPending()),l?g?j.$4(d,f,l,h):b("BrowserPushVisibilityChanger").listenForVisibility():!l&&c&&(a.pushPermissionIsOn()?j.registerPush(d,f,h,i)["catch"](function(){}):j.$5(e,f,!1))})["catch"](function(){c&&j.$5(e,f,!1),i&&b("ServiceWorkerRegistration").unregisterControllingWorker(),l()})})};c.$6=function(){return new(b("Promise"))(function(a,b){g.requestPermission(a)})};c.registerPushAndWaitForEndpoint=function(a,c,d,e){var f=this;e===void 0&&(e=!1);return new(b("Promise"))(function(b,g){f.$7(a,c,d,!0,null,e).then(function(a){if(typeof a!=="string"){g(new Error("registerPushImpl did not return an endpoint"));return}b(a)})["catch"](g)})};c.registerPushOnKaiOS=function(a,c,d){var e=this;return new(b("Promise"))(function(f,g){d.waitForKaiOS().done(function(){d.registerPush(function(d){d=JSON.parse(d.get("push_endpoint"));e.$4(a,c,d,b("emptyFunction"));f(b("PushRegistrationUtils").normalizeSubscriptionEndpoint(d))})})})};c.registerPush=function(a,c,d,e,f){d===void 0&&(d=b("emptyFunction"));e===void 0&&(e=!1);f===void 0&&(f=b("emptyFunction"));return this.registerPushWithFinishedCallBack(a,c,d,f,e)};c.registerPushWithFinishedCallBack=function(a,c,d,e,f){var g=this;f===void 0&&(f=!1);return new(b("Promise"))(function(b,h){g.$7(a,c,d,!1,e,f).then(function(a){if(typeof a!=="boolean"){h(new Error("registerPushImpl did not return a boolean"));return}b(a)})["catch"](h)})};c.$7=function(c,d,e,f,g,h){__p&&__p();var i=this;if(a.$1)return new(b("Promise"))(function(a,b){b(new Error("registering already"))});if(!self.PushManager)return b("Promise").reject(new Error("PushManager not found."));a.$1=!0;return new(b("Promise"))(function(j,k){__p&&__p();var l=b("ServiceWorkerRegistration").registerWorkerIfUnregistered(i.$3),m=i.$6();b("Promise").all([l,m]).then(function(l){__p&&__p();var m=l[0];if(!a.pushPermissionIsOn()){h&&m.unregister();throw new Error("Push permission was denied")}f||j(!0);l=b("BrowserPushPubKey").appServerKey;l=l!=null&&l!=""?{userVisibleOnly:!0,applicationServerKey:l}:{userVisibleOnly:!0};m.pushManager.subscribe(l).then(function(a){f&&j(b("PushRegistrationUtils").normalizeSubscriptionEndpoint(a)),i.$4(c,d,a,e),g&&g(),b("BrowserPushVisibilityChanger").listenForVisibility()})["catch"](function(b){a.$1=!1,h&&m.unregister(),k(b)})})["catch"](function(b){a.$1=!1,k(b)})})};c.unregisterPushAndSWOnKaiOS=function(a,c,d,e){var f=this;return new(b("Promise"))(function(b,g){f.$5(a,c,e).then(function(){d.unregisterPush(),b()})["catch"](g)})};c.unregisterPushAndSW=function(a,c){var d=this;return new(b("Promise"))(function(e,f){d.$5(a,c,!0).then(function(){b("promiseDone")(b("ServiceWorkerRegistration").unregisterControllingWorker(),e)})["catch"](f)})};c.unregisterPushOnly=function(a,c){var d=this;return new(b("Promise"))(function(b,e){d.getPushSubscription().then(function(f){f?f.unsubscribe().then(d.$5(a,c,!0)).then(function(){b(!0)})["catch"](e):e()})["catch"](e)})};a.pushPermissionIsPending=function(){return window.Notification&&window.Notification.permission==="default"};a.pushPermissionIsOn=function(){return window.Notification&&window.Notification.permission==="granted"};a.pushPermissionIsDenied=function(){return window.Notification&&window.Notification.permission==="denied"};return a}();e.exports=a}),null);
__d("XBrowserPushDummyPromptActionController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/notifications/client/push/dummyprompt/action/",{})}),null);
__d("XBrowserWebNotificationsEnableController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/notifications/client/web_notifications/enable/",{})}),null);
__d("incognito",["regeneratorRuntime","Promise","UserAgent","WebStorage","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;function a(){__p&&__p();var a;return b("regeneratorRuntime").async(function(c){__p&&__p();while(1)switch(c.prev=c.next){case 0:a=window.RequestFileSystem||window.webkitRequestFileSystem;if(!a){c.next=3;break}return c.abrupt("return",new(b("Promise"))(function(b){return a(window.TEMPORARY,10,function(){return b(!1)},function(){return b(!0)})}));case 3:if(!(b("UserAgent").isBrowser("IE >= 10")||b("UserAgent").isBrowser("Edge"))){c.next=5;break}return c.abrupt("return",!window.indexedDB);case 5:if(!b("UserAgent").isBrowser("Firefox >= 16")){c.next=7;break}return c.abrupt("return",new(b("Promise"))(function(a){var b=window.indexedDB.open("__test__");b.onsuccess=function(){return a(!1)};b.onerror=function(b){b.preventDefault(),a(!0)}}));case 7:if(!(b("gkx")("676917")&&(b("UserAgent").isPlatform("iOS")&&b("UserAgent").isBrowser("Safari >= 10.3")||b("UserAgent").isPlatform("Mac OS X")&&b("UserAgent").isBrowser("Safari >= 11.1")))){c.next=18;break}c.prev=8;window.openDatabase("sid","1.0","",0);c.next=16;break;case 12:c.prev=12;c.t0=c["catch"](8);if(!(c.t0.name==="SecurityError")){c.next=16;break}return c.abrupt("return",!0);case 16:c.next=20;break;case 18:if(!b("UserAgent").isBrowser("Safari")){c.next=20;break}return c.abrupt("return",!(g||(g=b("WebStorage"))).getLocalStorage());case 20:return c.abrupt("return",!1);case 21:case"end":return c.stop()}},null,this,[[8,12]])}e.exports=a}),null);
__d("BrowserPushDirectPromptInstaller",["Promise","Arbiter","AsyncRequest","BanzaiLogger","Bootloader","BrowserPushSessionChange.react","CrossWindowEventEmitter","DOM","NotificationPermissionDummyRequest.react","NotificationPermissionNotice.react","NotificationPermissionRequest.react","NotificationPermissionRequestWithPreview.react","PushRegistration","QE2Logger","React","ReactDOM","XBrowserPushDisabledController","XBrowserPushDummyPromptActionController","XBrowserPushXOutController","XBrowserWebNotificationsEnableController","XPushRegisterServiceWorkerController","incognito","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=window.Notification,h=new(b("CrossWindowEventEmitter"))("BrowserPushInstall"),i={},j,k=!1;function l(a,c,d){d===void 0&&(d="prompt");a=babelHelpers["extends"]({event:a,appid:c,surface:d},i);b("BanzaiLogger").log("BrowserPushLoggerConfig",a)}function m(){i.xout_count===0&&j&&b("QE2Logger").logExposureForUser(j)}function n(a){var c=b("XBrowserPushXOutController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(c).setMethod("POST").send();l("xout",a)}function o(a){var c=b("XBrowserWebNotificationsEnableController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(c).setMethod("POST").send();b("Arbiter").inform("WebNotifications/enabled");h.emitRemote("complete");b("Bootloader").loadModules(["WebNotificationsPresenter"],function(b){b.init(a.toString())},"BrowserPushDirectPromptInstaller")}function p(a){k||(k=!0,b("ReactDOM").unmountComponentAtNode(a))}function q(a,c){var d=b("DOM").insertBefore(a,b("DOM").create("span"));d=d.pop();b("ReactDOM").render(b("React").jsx(b("BrowserPushSessionChange.react"),{onHide:function(){b("ReactDOM").unmountComponentAtNode(a)},push:c}),d)}function r(a,c,d,e,f){var g=b("PushRegistration").get(a,c);l("turn_on",c);return g.registerPushWithFinishedCallBack(b("XPushRegisterServiceWorkerController"),b("AsyncRequest"),function(){q(d,g)},function(){b("Arbiter").inform("BrowserPushInstall/installed")},f).then(function(){p(d),l("install",c)})["catch"](function(a){p(d),b("PushRegistration").pushPermissionIsDenied()?(b("ReactDOM").render(b("React").jsx(b("NotificationPermissionNotice.react"),{onHide:function(){b("ReactDOM").unmountComponentAtNode(d)},browserName:e}),d),l("deny",c)):l("install_ignore",c),n(c)})}a={setLogExtraData:function(a){i=a},setQEUniverseName:function(a){j=a},requestThenInstallWebNotifications:function(a,b,c,d,e,f){m(),this._showRequestPermissions({appID:a,baseElement:b,browserName:c,hasEnoughFriendsToRequestPush:d,sampleNotificationAvatarURI:f,sampleNotificationMessage:e,showSpinnerWhileRequesting:!0,isWebNotifications:!0,onAcceptCallback:this._getOnWebNotificationsDialogAccept({appID:a,callback:function(c){c==="granted"?(l("install",a),h.emitRemote("complete"),p(b),o(a)):(l("deny",a),n(a))}})})},requestThenInstallPush:function(a,c,d,e,f,g,h,i,j,k,l,n,o){__p&&__p();var p=this,s=b("PushRegistration").get(a,c);e=s.isPushRegistered(e,b("XPushRegisterServiceWorkerController"),b("XBrowserPushDisabledController"),b("AsyncRequest"),!!g,function(){q(d,s)},i);b("Promise").all([e,b("incognito")()]).then(function(e){var g=e[0];e=e[1];if(g||e)return;m();b("PushRegistration").pushPermissionIsPending()?p._showRequestPermissions({appID:c,baseElement:d,hasEnoughFriendsToRequestPush:j,isWebNotifications:!1,onAcceptCallback:p._getOnPushNotificationsAccept({appID:c,baseElement:d,browserName:h,path:a,workerIsForPushOnly:i}),sampleNotificationAvatarURI:l,sampleNotificationMessage:k,showSpinnerWhileRequesting:n,wasXOuted:f,hideSecondStep:o}):!f&&b("PushRegistration").pushPermissionIsOn()&&r(a,c,d,h,i)})["catch"](function(){b("PushRegistration").pushPermissionIsDenied()&&m()})},installPush:function(a,c,d,e,f,g,h,i,j,k,n,o){__p&&__p();var s=this;k===void 0&&(k="default");n===void 0&&(n=0);o===void 0&&(o=0);var t=typeof k==="string"&&k!=="default",u=b("PushRegistration").get(a,c);e=u.isPushRegistered(e,b("XPushRegisterServiceWorkerController"),b("XBrowserPushDisabledController"),b("AsyncRequest"),!!g,function(){q(d,u)},i);b("Promise").all([e,b("incognito")()]).then(function(e){__p&&__p();var g=e[0];e=e[1];if(g||e)return;m();if(b("PushRegistration").pushPermissionIsPending()){if(!j||f)return;b("QE2Logger").logExposureForUser("chrome_push_custom_prompt_experiments");t?(b("ReactDOM").render(b("React").jsx(b("NotificationPermissionDummyRequest.react"),{promptTitleIndex:n,promptBodyIndex:o,onNotNow:function(){s._recordUserDummyPromptAction("dummy_prompt_not_now",c),p(d)},onAccept:function(){s._recordUserDummyPromptAction("dummy_prompt_accept",c),s._renderDefaultPushRequest({path:a,appID:c,baseElement:d,browserName:h,workerIsForPushOnly:i})},onIgnore:function(){s._recordUserDummyPromptAction("dummy_prompt_dismissed",c),p(d)},isBinary:k==="binary"}),d),l("dummy_prompt_request",c,"dummy_prompt")):s._renderDefaultPushRequest({path:a,appID:c,baseElement:d,browserName:h,workerIsForPushOnly:i})}else f||r(a,c,d,h,i)})["catch"](function(){b("PushRegistration").pushPermissionIsDenied()&&m()})},_recordUserDummyPromptAction:function(a,c){l(a,c,"dummy_prompt");c=b("XBrowserPushDummyPromptActionController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(c).setData({user_action:a}).setMethod("POST").send()},_renderDefaultPushRequest:function(a){var c=a.path,d=a.appID,e=a.baseElement,f=a.browserName;a=a.workerIsForPushOnly;b("ReactDOM").render(b("React").jsx(b("NotificationPermissionRequest.react"),{onHide:function(){p(e)}}),e);r(c,d,e,f,a)},_showRequestPermissions:function(a){var c=a.appID,d=a.baseElement,e=a.hasEnoughFriendsToRequestPush,f=a.isWebNotifications,g=a.onAcceptCallback,i=a.sampleNotificationAvatarURI,j=a.sampleNotificationMessage,k=a.showSpinnerWhileRequesting,m=a.wasXOuted;a=a.hideSecondStep;h.once("complete",function(a){p(d),l("twostep_suppressed",c)});if(!e||m)return;l("twostep_request",c);b("ReactDOM").render(b("React").jsx(b("NotificationPermissionRequestWithPreview.react"),{isWebNotifications:f,notificationImage:i||void 0,notificationMessage:j||void 0,onAccept:g,onClose:function(){l("twostep_notnow",c),h.emitRemote("complete"),n(c),p(d)},showSpinnerWhileRequesting:k,hideSecondStep:a}),d)},_getOnPushNotificationsAccept:function(a){var c=a.appID,d=a.baseElement,e=a.browserName,f=a.callback,g=a.path,i=a.workerIsForPushOnly;return function(){l("twostep_accept",c),h.emitRemote("complete"),b("promiseDone")(r(g,c,d,e,i).then(f,f))}},_getOnWebNotificationsDialogAccept:function(a){var b=this,c=a.appID,d=a.callback;return function(){l("twostep_accept",c),b._requestWebNotificationsFromBrowser(c,d)}},_requestWebNotificationsFromBrowser:function(a,b){l("turn_on",a),g.requestPermission(b)}};e.exports=a}),null);
__d("XBrowserPushMuteController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/notifications/client/push/mute/",{appid:{type:"Int",required:!0},push_endpoint:{type:"String",required:!0},surface:{type:"Enum",required:!0,enumType:1},mute_for:{type:"Enum",enumType:0},__asyncDialog:{type:"Int"}})}),null);
__d("BrowserPushMuteOptionsLink",["fbt","regeneratorRuntime","AsyncRequest","PushRegistration","React","ReactDOM","XBrowserPushMuteController","promiseDone"],(function(a,b,c,d,e,f,g){__p&&__p();function h(a,c,d){c=b("PushRegistration").get(c,d);b("promiseDone")(c.getPushSubscription(),function(c){if(c){c=b("XBrowserPushMuteController").getURIBuilder().setEnum("surface","jewel").setString("push_endpoint",c.endpoint).setInt("appid",d).getURI();new(b("AsyncRequest"))().setURI(c).setRelativeTo(a).send()}})}a={showMuteOptions:function(a,c,d){__p&&__p();var e,f;return b("regeneratorRuntime").async(function(i){__p&&__p();while(1)switch(i.prev=i.next){case 0:e=b("PushRegistration").get(c,d);i.prev=1;i.next=4;return b("regeneratorRuntime").awrap(e.getPushSubscription());case 4:f=i.sent;i.next=10;break;case 7:i.prev=7,i.t0=i["catch"](1),f=null;case 10:if(!(!b("PushRegistration").pushPermissionIsOn()||!f)){i.next=12;break}return i.abrupt("return");case 12:b("ReactDOM").render(b("React").jsx("a",{href:"#",onClick:function(){h(a,c,d)},children:g._("Mute")}),a);case 13:case"end":return i.stop()}},null,this,[[1,7]])}};e.exports=a}),null);
__d("XUIBadge",["cx","invariant","CSS","DOM","formatNumber"],(function(a,b,c,d,e,f,g,h){__p&&__p();function i(a){return parseInt(a,10)===a}a=function(){"use strict";__p&&__p();function a(a){this.target=a.target,this.count=a.count,this.maxcount=a.maxcount}var c=a.prototype;c.getCount=function(){return this.count};c.setCount=function(a){i(a)||h(0,186),a>=0||h(0,3502),this.count=a,b("CSS").conditionClass(this.target,"hidden_elem",this.count===0),b("DOM").setContent(this.target,b("formatNumber").withMaxLimit(a,this.maxcount)),a>this.maxcount?b("CSS").addClass(this.target,"_5ugi"):b("CSS").removeClass(this.target,"_5ugi")};c.setLegacyContent=function(a){typeof a==="string"?(b("CSS").conditionClass(this.target,"hidden_elem",a==0),b("DOM").setContent(this.target,a),b("CSS").removeClass(this.target,"_5ugi")):this.setCount(a)};c.increment=function(){this.setCount(this.getCount()+1)};return a}();e.exports=a}),null);