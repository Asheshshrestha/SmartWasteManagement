if (self.CavalryLogger) { CavalryLogger.start_js(["gcDYl"]); }

__d("UFIFeedbackContext.react",["React","UFICentralUpdates","UFIFeedbackTargets","prop-types"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=null,c.state={contextArgs:c.props.contextArgs,feedback:null},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.loadFeedbackTarget=function(a){var c=this;this.$1||(this.$1=b("UFIFeedbackTargets").getFeedbackTarget(a,function(a){c.$1=null,c.setState({feedback:a})}))};d.componentDidMount=function(){var a=this;this.loadFeedbackTarget(this.state.contextArgs.ftentidentifier);this.ufiCentralUpdatesSubscriptions=[b("UFICentralUpdates").subscribe("feedback-updated",function(b,c){b=a.state.contextArgs;b.ftentidentifier in c.updates&&a.loadFeedbackTarget(b.ftentidentifier)})]};d.componentWillUnmount=function(){this.ufiCentralUpdatesSubscriptions.forEach(function(a){return a&&b("UFICentralUpdates").unsubscribe(a)}),this.$1&&b("UFIFeedbackTargets").unsubscribe(this.$1)};d.render=function(){return this.state.feedback?this.props.render(this.state.contextArgs,this.state.feedback):null};return c}(b("React").Component);a.propTypes={contextArgs:b("prop-types").object.isRequired,render:b("prop-types").func.isRequired};a.contextTypes={stores:b("prop-types").object};e.exports=a}),null);
__d("UFIAddCommentController",["Parent","PrivateCommentsConfig","React","ReactDOM","UFIAddComment.react","UFIAsyncWrapper","UFICallbackStore","UFICentralUpdates","UFICommentEditIDStore","UFIDispatcher","UFIDispatcherContext.react","UFIFeedbackContext.react","UFILivePinnedCommentStore","UFINewCommentNotifier"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();a.factory=function(b,c){c.rootid=b.id;return new a(b,Object.freeze(c))};function a(a,c){__p&&__p();var d=this;this.renderAddComment=function(a,c){if(d.$5!==null||!c||!c.cancomment||!c.actorforpost)return null;var e=d.$6!=null;return b("React").jsx(b("UFIAddComment.react"),{isLivePinnedCommentVisible:e,viewerActorID:c.actorforpost,targetID:c.ownerid,targetName:c.actorname,groupID:c.grouporeventid,initialData:null,ref:null,withoutSeparator:!1,editingComment:{},isEditing:!1,allowLiveVideoCommentReplyMode:!0,mentionsDataSource:c.mentionsdatasource,showSendOnEnterTip:c.showsendonentertip,peopleOutsideCommunityInCommentNotice:c.peopleoutsidecommunityincommentnotice,allowPhotoAttachments:c.allowphotoattachments&&!a.islivestreaming&&!a.isActiveLivingRoom,allowVideoAttachments:c.allowvideoattachments&&!a.islivestreaming&&!a.isActiveLivingRoom,allowFileAttachments:c.allowfileattachments&&!a.islivestreaming&&!a.isActiveLivingRoom,allowStickerAttachments:c.allowstickerattachments&&(!a.islivestreaming||c.allowLiveVideoStickerAttachments),allowGifAttachments:c.allowgifattachments&&(!a.islivestreaming||c.allowgaminglivestreamgifattachments)&&!a.isActiveLivingRoom,allowBotMentions:c.allowbotmentions&&!a.islivestreaming&&!a.isActiveLivingRoom,allowNativeTipJar:c.isnativetipjarenabled,tipJarModule:c.tipjarmodule,allowFlexibleTipping:c.isflexibletippingenabled,flexibleStarsModule:c.flexiblestarsmodule,allowShortcutTipping:c.isshortcuttippingenabled,allowTogglePrivateComments:(b("PrivateCommentsConfig").composer_lock_enabled||b("PrivateCommentsConfig").composer_unlocked_lock_enabled)&&c.canviewercommentinprivate,privateCommentTarget:c.actorname,contextArgs:a,feedback:c,subtitle:c.subtitle,commentsTargetID:c.commentstargetfbid,allowCommentMarkdown:a.allowcommentmarkdown})};this.$1=a;this.$2=c;this.$3=new(b("UFIDispatcher"))();this.$4={UFICallbackStore:new(b("UFICallbackStore"))(this.$3)};this.$4.UFICallbackStore.on("add_comment_submit_new",function(c){return b("UFINewCommentNotifier").onNewComment(b("Parent").byTag(a,"form"),d.$2,c.comment,c.target,c.replyCommentID,c.timestamp)});this.$5=b("UFICommentEditIDStore").getForInstance(this.$2.instanceid);b("UFICommentEditIDStore").addListener(function(){var a=b("UFICommentEditIDStore").getForInstance(d.$2.instanceid);a!=d.$5&&(d.$5=a,d.render())});b("UFILivePinnedCommentStore").addListener(function(){var a=b("UFILivePinnedCommentStore").getPinnedCommentID(d.$2.ftentidentifier);a!=d.$6&&(d.$6=a,d.render())});b("UFICentralUpdates").subscribeOnce("update-comments",function(a,c){d.$6=b("UFILivePinnedCommentStore").getPinnedCommentID(d.$2.ftentidentifier),d.render()});this.render()}var c=a.prototype;c.render=function(){var a=b("React").jsx(b("UFIDispatcherContext.react"),{dispatcher:this.$3,stores:this.$4,children:b("React").jsx(b("UFIFeedbackContext.react"),{contextArgs:this.$2,render:this.renderAddComment})});b("ReactDOM").render(b("React").jsx(b("UFIAsyncWrapper"),{children:a}),this.$1)};c.disable=function(){this.$4.UFICallbackStore.remove()};return a}();e.exports=a}),null);