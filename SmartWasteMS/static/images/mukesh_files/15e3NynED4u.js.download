if (self.CavalryLogger) { CavalryLogger.start_js(["4wmzK"]); }

__d("P2PListRow.react",["cx","invariant","React","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props;b("React").Children.count(a.children)===2||h(0,1825);var c=a.offset,d=a.offsetRight!==void 0&&a.offsetRight+"px",e=a.offsetBottom!==void 0&&a.offsetBottom+"px";return b("React").jsxs("div",{className:"_3q6c"+(c==="large"?" _3q6d":"")+(c==="small"?" _3q6o":""),children:[b("React").jsx("div",{className:"_3q6p",style:{paddingRight:d,paddingBottom:e},children:a.children[0]}),b("React").jsx("div",{className:"_3q6q",style:{paddingBottom:e},children:a.children[1]})]})};return c}(b("React").Component);a.propTypes={offset:b("prop-types").oneOf(["large","small"]),offsetBottom:b("prop-types").number,offsetRight:b("prop-types").number};a.defaultProps={offset:"large"};e.exports=a}),null);
__d("GroupSellInterestP2PQPListItems.react",["fbt","ix","Image.react","P2PListRow.react","P2PText.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.renderRow=function(a,c){return b("React").jsxs(b("P2PListRow.react"),{offset:"large",children:[b("React").jsx(b("Image.react"),babelHelpers["extends"]({},a)),b("React").jsx(b("P2PText.react"),{type:"primary",children:c})]})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return b("React").jsxs("div",{children:[this.renderRow({height:29,src:h("94399"),width:32},g._("Message the seller to ask questions and plan logistics.")),this.renderRow({height:43,src:h("94404"),width:28},g._("Send a free, secure payment for the item from your messages.")),this.renderRow({height:22,src:h("94402"),width:32},g._("Money will go straight from your debit card to theirs."))]})};return c}(b("React").Component);e.exports=a}),null);
__d("P2PEncryptedText.react",["ix","cx","fbt","xuiglyph","Image.react","P2PText.react","React","prop-types"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.getEncryptedMessage=function(){return c.props.showPasswordProtected?i._("Encrypted and password protected."):i._("Encrypted and private.")},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a;return(a=b("React")).jsxs(b("P2PText.react"),{type:"secondary",children:[a.jsx("div",{className:"__8t",children:a.jsx(b("Image.react"),{src:g("89465")})}),a.jsx("span",{className:"_2pir",children:this.getEncryptedMessage()})]})};return c}(b("React").Component);a.propTypes={showPasswordProtected:b("prop-types").bool};a.defaultProps={showPasswordProtected:!1};e.exports=a}),null);
__d("P2PNUXNextButton.react",["fbt","P2PButton.react","React","prop-types"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").jsx(b("P2PButton.react"),{label:g._("Next"),onClick:this.props.onNextClick,use:"confirm"})};return c}(b("React").Component);a.propTypes={onNextClick:b("prop-types").func.isRequired};e.exports=a}),null);
__d("GroupSellInterestP2PQPDialog.react",["cx","fbt","GroupSellInterestP2PQPListItems.react","MessengerEnvironment","P2PDialog.react","P2PDialogBody.react","P2PDialogFooter.react","P2PDialogTitle.react","P2PEncryptedText.react","P2PLogger","P2PNUXNextButton.react","React","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.log=function(a,c){b("P2PLogger").log(a,babelHelpers["extends"]({www_event_flow:"UI_FLOW_GROUP_SELL_INTEREST_DIALOG"},d.props.loggingData,c))},d.handleNextClick=function(){d.log("UI_ACTN_GROUP_SELL_INTEREST_QP_DIALOG_NEXT_CLICK"),d.props.onNextClick()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.log("UI_ACTN_GROUP_SELL_INTEREST_QP_DIALOG_SHOWN")};d.render=function(){var a;return(a=b("React")).jsxs(b("P2PDialog.react"),{width:this.props.width,children:[a.jsx(b("P2PDialogTitle.react"),{children:h._("Talk to the Seller and Send a Payment From Your Messages")}),a.jsx(b("P2PDialogBody.react"),{className:"_2pi1",children:a.jsx(b("GroupSellInterestP2PQPListItems.react"),{})}),a.jsx(b("P2PDialogFooter.react"),{leftContent:a.jsx("div",{className:"_2pic",children:a.jsx(b("P2PEncryptedText.react"),{})}),children:a.jsx(b("P2PNUXNextButton.react"),{onNextClick:this.handleNextClick})})]})};return c}(b("React").Component);a.propTypes={onNextClick:b("prop-types").func.isRequired,width:b("prop-types").number};a.defaultProps={width:b("MessengerEnvironment").messengerui?400:350};e.exports=a}),null);
__d("XGroupSellNUXMarkAsSeenController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/groups/sell/_nuxMarkAsSeen/",{assoc_type:{type:"Int"},remove_node_id:{type:"String"},nux_type:{type:"Enum",enumType:1},group_id:{type:"FBID"}})}),null);
__d("GroupSellNUX",["Arbiter","AsyncRequest","DOM","Event","OnVisible","SubscriptionsHandler","XGroupSellNUXMarkAsSeenController"],(function(a,b,c,d,e,f){__p&&__p();var g={};function h(a,c){var d=b("XGroupSellNUXMarkAsSeenController").getURIBuilder();a?d.setInt("assoc_type",a):c&&d.setEnum("nux_type",c);a=d.getURI();new(b("AsyncRequest"))(a).send()}function i(a,c,d,e){__p&&__p();if(g[e])return;new(b("OnVisible"))(c.getContext(),function(){if(g[e])return;g[e]=!0;c.show();h(e)},!0);a.addSubscriptions(b("Arbiter").subscribe("page_transition",function(){a.release(),c.isShown()&&c.hide()}))}var j={markAsSeen:function(a){h(null,a)},setupDialogMarkAsSeen:function(a,b){a.subscribe("click",function(){h(null,b)})},setupTooltipMarkAsSeen:function(a,c){var d=new(b("SubscriptionsHandler"))();new(b("OnVisible"))(a.getContext(),function(){h(null,c),a.show()},!1);d.addSubscriptions(b("Arbiter").subscribe("page_transition",function(){a.isShown()&&a.hide(),d.release(),d=null}))},manageComposerTooltip:function(a,c,d,e){var f=new(b("SubscriptionsHandler"))();f.addSubscriptions(b("Event").listen(a,"click",function(){c.isShown()&&c.hide()}),b("Arbiter").subscribe("GroupSellComposer/launchedComposer",function(){c.isShown()&&c.hide()}));i(f,c,d,e)},manageTooltipAfterDelay:function(a,b,c,d){setTimeout(function(){j.manageTooltip(a,b,c)},d)},manageTooltip:function(a,c,d){var e=new(b("SubscriptionsHandler"))();i(e,a,c,d)},setupOnClickMarkAsSeenAndRemove:function(a,c,d,e){var f=new(b("SubscriptionsHandler"))();f.addSubscriptions(b("Event").listen(a,"click",function(){h(d,e),c!==null&&c.hide(),f.release(),f=null}),b("Arbiter").subscribe("page_transition",function(){f.release(),f=null}))},setupOnClickMarkAsSeen:function(a,c,d,e){var f=new(b("SubscriptionsHandler"))();f.addSubscriptions(b("Event").listen(a,"click",function(){h(d,e),typeof c==="object"?b("DOM").remove(c):c!==null&&c.hide()}),b("Arbiter").subscribe("page_transition",function(){f.release(),f=null}))}};e.exports=j}),null);
__d("XShareDialogMessageSuggestionController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/sale_group_suggestion/",{for_sale_item:{type:"FBID"}})}),null);
__d("XShareDialogWithSaleGroupThreadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/sale_group_threads/",{surface:{type:"String"},for_sale_item:{type:"FBID"},initial_message:{type:"String"}})}),null);
__d("GroupSellInterestDialog.react",["cx","fbt","AsyncRequest","AsyncResponse","BackgroundImage.react","ContextualLayerUpdateOnScroll","FlexLayout.react","GroupSellInterestP2PQPDialog.react","GroupSellNUX","LaunchMessageSellerDialogFalcoEvent","LayerFadeOnShow","LayerHideOnBlur","LayerHideOnTransition","LineClamp.react","MarketplaceBSGButton","P2PAmountUtils","P2PAPI","P2PLoadingMask.react","P2PLogger","React","ShareDialogAudienceTypes","Token.react","XShareDialogMessageSuggestionController","XShareDialogSubmitController","XShareDialogWithSaleGroupThreadController","XUIAmbientNUX.react","XUIButton.react","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogTitle.react","XUIGrayText.react","gkx"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i=b("MarketplaceBSGButton").ButtonStyle,j=b("MarketplaceBSGButton").MarketplaceBSGMessageSellerButton,k=600,l=!1,m=!1,n=[h._("I'm interested in this item."),h._("Is this item still available?"),h._("What condition is this item in?"),h._("Do you deliver?"),h._("I'd like to schedule a test drive.")];a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(d,a);var c=d.prototype;c.$1=function(){var a=!1,c=b("P2PAmountUtils").isAmountOverLegalLimit(this.props.item.price);this.props.showNux&&!l&&!c&&(l=!0,a=!0);return a};function d(c){__p&&__p();var d;d=a.call(this,c)||this;d.state={messageSuggestion:[],chatFieldContent:d.getDefaultContent(),loading:!1,nuxShown:d.$1(),qpWasShown:!1,showDialog:!1,p2pQPDialogShown:!1};d.$2=function(a){a&&a.preventDefault();d.log("UI_ACTN_GROUP_SELL_INTEREST_MESSAGE_SELLER_CLICK");d.markInterest(d.props.action.contactButtonClicked);a=!1;d.props.showP2PQPDialog&&!m&&!b("P2PAmountUtils").isAmountOverLegalLimit(d.props.item.price)&&(m=!0,a=!0,b("P2PAPI").incrementBannerViews("C2C_DIALOG_QP"));d.setState({showDialog:!a,p2pQPDialogShown:a,qpWasShown:a});d.state.nuxShown&&(b("GroupSellNUX").markAsSeen("p2p_chat_to_buy"),d.setState({nuxShown:!1}));d.props.showMessageSuggestions&&d.fetchMessageSuggestions()};d.$3=function(a){a||d.setState({chatFieldContent:d.getDefaultContent(),showDialog:!1})};d.$4=function(){d.log("UI_ACTN_GROUP_SELL_INTEREST_MESSAGE_SEND_CLICK");d.setState({loading:!0});var a=d.props.seller.owningPageID?d.props.seller.owningPageID:d.props.seller.id,c=d.props.seller.originalProductID?d.props.seller.originalProductID:d.props.postID,e=d.props.seller.owningPageID?63:d.props.shareData.shareType,f;d.props.usesCommerceThreads?f=b("XShareDialogWithSaleGroupThreadController").getURIBuilder().setFBID("for_sale_item",d.props.item.for_sale_item_id.toString()).setString("initial_message",d.state.chatFieldContent).setString("surface",d.props.surface).getURI():f=b("XShareDialogSubmitController").getURIBuilder().setInt("post_id",c).setInt("owner_id",d.props.shareData.ownerID).setInt("share_type",e).setInt("shared_to_group_id",d.props.seller.sharedToGroupID).setIntVector("audience_targets",[a]).setStringVector("messaging_tags",d.props.shareData.messagingTags).setString("message",d.state.chatFieldContent).setString("audience_type",b("ShareDialogAudienceTypes").MESSAGE).getURI();d.sendMessage(f)};d.$5=function(a){d.setState({chatFieldContent:a.target.value})};d.$6=function(){d.setState({p2pQPDialogShown:!1,showDialog:!0})};d.$7=function(){b("GroupSellNUX").markAsSeen("p2p_chat_to_buy"),d.setState({nuxShown:!1})};return d}c.log=function(a){b("P2PLogger").log(a,{www_event_flow:"UI_FLOW_GROUP_SELL_INTEREST_DIALOG",object_id:this.props.postID,seller_id:this.props.seller.id,surface:this.props.surface})};c.getDefaultContent=function(){return h._("Hi, I'm interested in buying your {name of item being sold}.",[h._param("name of item being sold",this.props.item.name)]).toString()};c.fetchMessageSuggestions=function(){var a=this,c=b("XShareDialogMessageSuggestionController").getURIBuilder().setFBID("for_sale_item",this.props.item.for_sale_item_id.toString()).getURI();new(b("AsyncRequest"))().setURI(c).setMethod("POST").setHandler(function(b){b=b.getPayload().messageSuggestions;a.setState({messageSuggestion:b})}).setErrorHandler(function(b){a.setState({messageSuggestion:n})}).send()};c.sendMessage=function(a){var c=this;new(b("AsyncRequest"))().setURI(a).setMethod("POST").setHandler(function(a){c.setState({loading:!1,showDialog:!1})}).setErrorHandler(function(a){c.setState({loading:!1}),b("AsyncResponse").defaultErrorHandler(a)}).send()};c.markInterest=function(a){var c=this.props,d=c.tracking,e=c.surface,f=c.postID;b("LaunchMessageSellerDialogFalcoEvent").log(function(){var b;return{post_id:f,action:a,surface:e,tracking:(b=d)!=null?b:""}})};c.renderChatArea=function(){return b("React").jsx("div",{className:"_5wh_",children:b("React").jsx("textarea",{onChange:this.$5,placeholder:h._("Write a message..."),value:this.state.chatFieldContent})})};c.renderSendToSellerField=function(){var a=this.props.seller.owningPageName?this.props.seller.owningPageName:this.props.seller.name;return b("React").jsxs("div",{className:"_5wi1",children:[h._("To:")," ",b("React").jsx(b("Token.react"),{className:"_5wi2",label:a})]})};c.renderItemImage=function(){return!this.props.item.image?null:b("React").jsx("div",{className:"_5wi3",children:b("React").jsx(b("BackgroundImage.react"),{backgroundPosition:"50% 50%",backgroundSize:"cover",height:70,src:this.props.item.image,width:70})})};c.renderSuggestions=function(){var a=this;if(!this.props.showMessageSuggestions)return null;var c=this.state.messageSuggestion,d=[],e=function(e){d.push(b("React").jsx(b("XUIButton.react"),{className:"_60g_",label:c[e],onClick:function(){a.setState({chatFieldContent:c[e]})}},e))};for(var f=0;f<c.length;f++)e(f);return b("React").jsx("div",{className:"_60h0",children:d})};c.renderItemInfo=function(){var a;return(a=b("React")).jsxs("div",{className:"_5wi4",children:[this.renderItemImage(),a.jsxs("div",{className:"_5wi5",children:[a.jsx("div",{className:"_5wio",children:this.props.item.name}),a.jsx("div",{className:"_5wip",children:this.props.item.price}),a.jsx("div",{className:"_60hf",children:this.props.item.location}),a.jsx(b("LineClamp.react"),{lines:3,children:this.props.item.description})]})]})};c.renderStartChatDialog=function(){var a=this.props.seller.is_seller_page&&b("gkx")("1228932")?b("React").jsx(b("XUIGrayText.react"),{shade:"light",size:"meta1",className:"_52ju",children:h._("When you send a message, {page_name} will see your public info.",[h._param("page_name",b("React").jsx(b("XUIGrayText.react"),{shade:"medium",size:"meta1",weight:"bold",children:this.props.seller.name}))])}):null;return b("React").jsxs(b("XUIDialog.react"),{behaviors:{LayerFadeOnShow:this.state.qpWasShown?!1:b("LayerFadeOnShow")},onToggle:this.$3,shown:!0,width:k,children:[b("React").jsx(b("XUIDialogTitle.react"),{children:h._("New Message")}),b("React").jsxs(b("XUIDialogBody.react"),{className:"_5wiu",children:[this.renderSendToSellerField(),this.renderChatArea(),this.renderSuggestions(),this.renderItemInfo()]}),b("React").jsx(b("XUIDialogFooter.react"),{leftContent:b("React").jsx("div",{children:b("React").jsxs(b("FlexLayout.react"),{direction:"vertical",children:[b("React").jsx(b("XUIGrayText.react"),{shade:"light",size:"meta1",children:h._("Double check your purchase before sending money.")}),a]})}),children:b("React").jsx(b("XUIDialogButton.react"),{disabled:this.state.chatFieldContent==="",label:h._("Send"),onClick:this.$4,size:"large",use:"confirm"})}),b("React").jsx(b("P2PLoadingMask.react"),{visible:this.state.loading})]})};c.renderP2PQPDialog=function(){return b("React").jsx(b("GroupSellInterestP2PQPDialog.react"),{onNextClick:this.$6,width:k})};c.render=function(){__p&&__p();var a=this,c=null,d=null;this.state.nuxShown&&(d=b("React").jsx(b("XUIAmbientNUX.react"),{behaviors:{LayerHideOnTransition:b("LayerHideOnTransition"),LayerHideOnBlur:b("LayerHideOnBlur"),ContextualLayerUpdateOnScroll:b("ContextualLayerUpdateOnScroll")},contextRef:function(){return a.refs.chat_to_buy},shown:this.state.nuxShown,position:"below",alignment:"right",onCloseButtonClick:this.$7,children:h._("Now you can securely pay for items right from your messages.")}));this.state.p2pQPDialogShown?c=this.renderP2PQPDialog():this.state.showDialog&&(c=this.renderStartChatDialog());var e=null,f=null,g=null,k=this.$2;if(this.props.loggedOut.isLoggedOut){e="async-post";f="#";g=this.props.loggedOut.loginDialogURI;k=null;return b("React").jsx(j,{style:i.LOGGED_OUT,uri:g,rel:e,href:f})}return b("React").jsxs(b("React").Fragment,{children:[b("React").jsx("div",{ref:"chat_to_buy",children:b("React").jsx(j,{style:this.props.style,onClick:k})}),d,c]})};return d}(b("React").PureComponent);e.exports=a}),null);