if (self.CavalryLogger) { CavalryLogger.start_js(["S6S5\/"]); }

__d("ChatTypeaheadConstants",[],(function(a,b,c,d,e,f){a=Object.freeze({USER_TYPE:"user",THREAD_TYPE:"thread",FRIEND_TYPE:"friend",NON_FRIEND_TYPE:"non_friend",FB4C_TYPE:"fb4c",PAGE_TYPE:"page",MEETING_ROOM_PAGE_TYPE:"meeting_room_page",COMMERCE_PAGE_TYPE:"commerce_page",HEADER_TYPE:"header",INTERNAL_BOT_PAGE_TYPE:"internal_bot_page",GAME_TYPE:"game"});e.exports=a}),null);
__d("EventMakePlanDialogConstants",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({DIALOG_WIDTH:832,PICKER_HEIGHT:460,PICKER_WIDTH:300,LoggerConfig:Object.freeze({EVENT:"event",MAKE_PLAN_FLOW:"make_plan_flow",SEND_TO_GROUP:"send_to_group"})});e.exports=a}),null);
__d("MessengerGCFParticipantItem.react",["cx","Badge.react","CurrentUser","ImageBlock.react","Keys","LeftRight.react","MessengerContactImageReact.bs","OnVisible.react","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerContactImageReact.bs").jsComponent,i=40;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$4=function(a){d.props.onClick(d.props.entry)},d.$5=function(a){(a.keyCode===b("Keys").SPACE||a.keyCode===b("Keys").RETURN)&&(a.preventDefault(),d.$4(a))},d.onVisible=function(){d.props.onVisible(d.props.entry)},d.willUnmount=function(){d.props.onHidden(d.props.entry)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$1=function(){__p&&__p();var a=this.props.entry,c=a.getPhoto(),d=b("CurrentUser").isWorkUser(),e=function(){var b=a.getAuxiliaryData();if(typeof b==="object"&&b!==null){b=b.workForeignEntityInfo;if(typeof b==="object"&&b!==null)return b.type==="FOREIGN"}return!1}();d=d&&e;return c?b("React").jsx(h,{className:"_5l39",size:i,src:c,isMessengerUser:!1,isMultiCompany:d}):b("React").jsx("div",{})};d.$2=function(){return this.props.entry.getTitle()};d.$3=function(){return this.props.entry.getSubtitle()};d.$6=function(){var a=this.props.entry.getType();return a==="internal_bot_page"?b("React").jsx(b("Badge.react"),{type:"bot",size:"medium"}):null};d.componentWillUnmount=function(){this.willUnmount()};d.render=function(){var a,c=b("joinClasses")("_599m _2elt _5mne",this.props.className);return(a=b("React")).jsx(b("OnVisible.react"),{onVisible:this.onVisible,onHidden:this.willUnmount,children:a.jsx("li",{className:c,onMouseDown:this.$4,onKeyDown:this.$5,children:a.jsxs(b("ImageBlock.react"),{spacing:"medium",children:[this.$1(),a.jsxs(b("LeftRight.react"),{children:[a.jsxs("div",{children:[a.jsxs("div",{className:"_2em0 _599p",children:[this.$2(),this.$6()]}),a.jsx("div",{className:"_2em1 _599q",children:this.$3()})]}),this.props.children]})]})})})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("MessengerGCFParticipantPicker.react",["cx","fbt","CenteredContainer.react","FDSSpinner.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return this.props.formattedEntries.length===0&&!this.props.loading?b("React").jsx(b("CenteredContainer.react"),{className:"_2pi1",children:h._("No results")}):b("React").jsxs("ul",{className:"_61r_",children:[this.props.formattedEntries,b("React").jsx("li",{className:"_2elx",children:this.props.loading?b("React").jsx(b("FDSSpinner.react"),{}):null})]})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("MessengerParticipantPickerWrapper.react",["cx","Link.react","React","emptyFunction","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.$1=function(a){var c=this.props.ParticipantRow,d=this.props.selectedEntries.has(a.getUniqueID()),e=a.getTitle();return b("React").jsx(c,{entry:a,selected:d,onClick:this.props.onClickEntry,onVisible:this.props.onVisibleEntry||b("emptyFunction"),onHidden:this.props.onHiddenEntry||b("emptyFunction"),children:this.$2(d,e)},a.getUniqueID())};d.$2=function(a,c){return b("React").jsx(b("Link.react"),{"aria-checked":a,"aria-label":c,className:"_2elu"+(a?" _2elv":""),href:"#",label:"",role:"checkbox",tabIndex:"0"})};d.render=function(){var a=this,c=[];this.props.entries.forEach(function(b){return c.push(a.$1(b))});var d=this.props.ParticipantList;return b("React").jsx(d,{loading:this.props.loading,formattedEntries:c,role:this.props.role})};return c}(b("React").PureComponent);a.defaultProps={role:"listbox"};e.exports=a}),null);
__d("EventMakePlanDialogBody.react",["cx","fbt","CloseButton.react","DOMContainer.react","EventMakePlanDialogConstants","Grid.react","Layout.react","LayoutColumn.react","MessengerGCFParticipantItem.react","MessengerGCFParticipantPicker.react","MessengerParticipantPickerWrapper.react","React","ScrollableArea.react","SearchableTextInput.react","XUIDialogBody.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("EventMakePlanDialogConstants").PICKER_HEIGHT,j=b("EventMakePlanDialogConstants").PICKER_WIDTH,k=b("Grid.react").GridItem;function l(a){return b("React").jsx("div",{className:"_43nk",children:Array.from(a.selectedEntries.values(),function(c){var d;return(d=b("React")).jsxs("span",{className:"_43nh",children:[d.jsx("span",{className:"_43ni",children:c.getTitle()}),d.jsx("span",{className:"_43nj",children:d.jsx(b("CloseButton.react"),{"aria-label":h._("Remove"),className:"_58zx",size:"small",onClick:a.onClickToken(c)})})]},c.getUniqueID())})})}a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$3=function(a){return function(){return c.props.onSelect(a)}},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=h._("Search friends"),c=h._("Write a message...");return b("React").jsx(b("XUIDialogBody.react"),{className:"_43mm",children:b("React").jsxs(b("Layout.react"),{children:[b("React").jsxs(b("LayoutColumn.react"),{className:"_43mn",children:[this.props.preselectedFriendProfiles.length!==0?b("React").jsx("div",{className:"_3i76"}):b("React").jsx("div",{className:"_2ph_",children:b("React").jsx(b("SearchableTextInput.react"),{className:"_43n5 autofocus",onChange:this.props.onSearchChange,onEntriesFound:this.props.onSearchEntriesFound,placeholder:a,queryString:this.props.query,searchSource:this.props.searchSource,searchSourceOptions:{onQueryFinished:this.props.onSearchFinished}})}),this.props.query?this.$1():this.$2()]}),b("React").jsxs(b("LayoutColumn.react"),{className:"_43n6",children:[b("React").jsxs(b("Grid.react"),{className:"_2qx6",cols:2,children:[b("React").jsx(k,{className:"_43n7",children:b("React").jsx("span",{className:"_2qx7",children:h._("To:")})},"prefix"),b("React").jsx(k,{className:"_43n8",children:b("React").jsx(l,{onClickToken:this.$3,selectedEntries:this.props.selectedEntries})},"suffix")]}),b("React").jsx("div",{className:"_43n9",children:b("React").jsx("textarea",{className:"_43na",placeholder:c,onChange:this.props.onMessageChange,value:this.props.message})}),b("React").jsx("div",{ref:"attachment",className:"_43nd _1xkv",children:b("React").jsx(b("DOMContainer.react"),{children:this.props.attachment})})]})]})})};d.$1=function(){return b("React").jsx(b("ScrollableArea.react"),{height:i,width:j,children:b("React").jsx(b("MessengerParticipantPickerWrapper.react"),{ParticipantRow:b("MessengerGCFParticipantItem.react"),ParticipantList:b("MessengerGCFParticipantPicker.react"),onClickEntry:this.props.onSelect,loading:this.props.loading,entries:this.props.returnEntries,selectedEntries:this.props.selectedEntries})})};d.$2=function(){return b("React").jsxs(b("ScrollableArea.react"),{height:i,width:j,children:[this.$4(),this.$5(),this.$6(),this.$7()]})};d.$4=function(){return this.$8(h._("SELECTED FREINDS"),this.props.preselectedEntries,!1)};d.$5=function(){return this.$8(h._("GOING OR INTERESTED"),this.props.interestedOrGoingEntries,!1)};d.$6=function(){return this.$8(h._("INVITED"),this.props.invitedEntries,!1)};d.$7=function(){return this.$8(h._("SUGGESTED"),this.props.suggestedFriendEntries,this.props.loading)};d.$8=function(a,c,d){return c.length===0?null:b("React").jsxs("div",{children:[b("React").jsx("div",{className:"_43nf",children:a}),b("React").jsx(b("MessengerParticipantPickerWrapper.react"),{ParticipantRow:b("MessengerGCFParticipantItem.react"),ParticipantList:b("MessengerGCFParticipantPicker.react"),onClickEntry:this.props.onSelect,loading:d,entries:c,selectedEntries:this.props.selectedEntries})]})};return c}(b("React").Component);e.exports=a}),null);
__d("EventMakePlanDialogFooter.react",["cx","fbt","React","XUIButton.react","XUIDialogCancelButton.react","XUIDialogFooter.react"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){return b("React").jsxs(b("XUIDialogFooter.react"),{className:"_43ng",children:[b("React").jsx(b("XUIDialogCancelButton.react"),{}),b("React").jsx(b("XUIButton.react"),{action:"confirm",disabled:a.selectedEntriesCount===0,label:a.selectedEntriesCount<2?h._("Send"):h._("Send To Group"),onClick:a.onPost,use:"confirm"})]})}e.exports=a}),null);
__d("EventMakePlanDialogOverlay.react",["cx","React","XUISpinner.react"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a.isShown?b("React").jsx("div",{className:"_350o",children:b("React").jsx(b("XUISpinner.react"),{size:"large",className:"_350p"})}):b("React").jsx("noscript",{})}e.exports=a}),null);
__d("XEventMessageFriendsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/event/message_friends/",{attachment_id:{type:"FBID"},body:{type:"String",defaultValue:""},group_post_id:{type:"FBID"},participant_fbids:{type:"FBIDSet"},source:{type:"String"}})}),null);
__d("EventMakePlanDialogBodyContainer.react",["invariant","ActorURI","AsyncRequest","Bootloader","ChatAppStore","ChatOpenTabEventLogger","ChatSearchSource","ChatTypeaheadConstants","EventActionContext","EventMakePlanDialogBody.react","EventMakePlanDialogConstants","EventMakePlanDialogFooter.react","EventMakePlanDialogOverlay.react","EventsActionsLogger","FantaTabActions","MercuryIDs","React","SearchableEntry","XEventMessageFriendsController","requireWeak","setImmediate"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("EventMakePlanDialogConstants").LoggerConfig;function i(a,c){return a.map(function(a){return new(b("SearchableEntry"))({uniqueID:a.uniqueID,title:a.title,subtitle:c,photo:a.photo,type:"friend"})})}function j(a,b){var c=new Map(),d=function(a){return c.set(a.getUniqueID(),a)};a.forEach(d);b.forEach(d);return c}a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),h=0;h<e;h++)f[h]=arguments[h];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=i(d.props.preselectedFriendProfiles,""),d.$2=i(d.props.goingFriendProfiles,"Going").concat(i(d.props.probableFriendProfiles,"Interested")),d.$3=i(d.props.invitedFriendProfiles,"Invited"),d.$4=j(d.$2,d.$3),d.state={actionContext:b("EventActionContext").addActionHistoryEntry(b("EventActionContext").getFromString(d.props.actionContext),{surface:b("EventsActionsLogger").Surface.EVENT_MESSAGE_DIALOG,mechanism:b("EventsActionsLogger").Mechanism.EVENT_MESSAGE_DIALOG}),loading:!0,message:"",posting:!1,query:"",returnEntries:[],selectedEntries:new Map(),suggestedFriendEntries:[]},d.$8=function(a){a=a.target;a instanceof HTMLInputElement||g(0,4859);d.setState({loading:!0,query:a.value})},d.$9=function(a){d.setState({returnEntries:a.filter(function(a){return a.getType()===b("ChatTypeaheadConstants").FRIEND_TYPE})})},d.$10=function(a){a===d.state.query&&d.setState({loading:!1})},d.$11=function(a){return d.setState(function(b){var c=a.getUniqueID();b=new Map(b.selectedEntries);b.has(c)?b["delete"](c):b.set(c,a);return{selectedEntries:b}})},d.$12=function(a){a=a.target;a instanceof HTMLTextAreaElement||g(0,4859);d.setState({message:a.value})},d.$13=function(){__p&&__p();var a=d.$7();a=b("XEventMessageFriendsController").getURIBuilder().setFBIDSet("participant_fbids",a).setString("body",d.state.message).setFBID("attachment_id",d.props.id).setString("source","source:chat:web").setFBID("group_post_id",d.props.postId).getURI();a=b("ActorURI").create(a,d.props.userId);new(b("AsyncRequest"))().setURI(a).setMethod("POST").setReadOnly(!0).setAllowCrossPageTransition(!0).setHandler(function(a){if(a.payload){var c=a.payload.id;a=a.payload.isCanonical?b("MercuryIDs").getThreadIDFromUserID(c):b("MercuryIDs").getThreadIDFromThreadFBID(c);d.$14(a)}}).setErrorHandler(function(){b("EventsActionsLogger").log(d.props.id,{type:b("EventsActionsLogger").Type.SEND,target:b("EventsActionsLogger").Target.MESSAGE,acontext:d.state.actionContext},{preselected_count:d.props.preselectedFriendProfiles.length,event_id:d.props.id,is_successful:!1,num_recipients:d.$7().length,is_group:!0})}).send();d.setState({posting:!0});b("EventsActionsLogger").log(d.props.id,{type:b("EventsActionsLogger").Type.CLICK,target:b("EventsActionsLogger").Target.SEND_MESSAGE_BUTTON,acontext:d.state.actionContext})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){__p&&__p();var a=this;this.$5=new(b("ChatSearchSource"))({queryRequests:[{uri:"/ajax/mercury/composer_query.php"}]});if(this.$1.length===0)b("requireWeak")("OrderedFriendsList",function(b){return b.getSearchableEntries(20,!1,function(b){a.setState({suggestedFriendEntries:b.filter(function(b){return!a.$4.has(b.getUniqueID())}),loading:!1})})});else{var c=new Map();this.$1.map(function(a){c.set(a.getUniqueID(),a)});this.setState({selectedEntries:c})}this.$6(!1,!0);b("EventsActionsLogger").log(this.props.id,{type:b("EventsActionsLogger").Type.VIEW,target:b("EventsActionsLogger").Target.EVENT_MESSAGE_DIALOG,acontext:this.state.actionContext})};d.$6=function(a,c){__p&&__p();var d=this;b("Bootloader").loadModules(["MessengerWebChatEventsTypedLogger","MessengerWebChatEventType","EventMessengerTargetEnum"],function(b,e,f,g){__p&&__p();g=a?e.END_MSGR_FB_INTEGRATION_CREATE_FLOW:e.ENTER_MSGR_FB_INTEGRATION_CREATE_FLOW;e=d.props.entryPoint;var i;switch(e){case"fb_event_top_blue_button_make_plan":i=f.TOP_BLUE_BUTTON;break;case"fb_event_sharesheet_make_plan":i=f.SHARESHEET;break;case"fb_event_wall_post_message_cta":i=f.PIVOT_MESSAGE_CTA;break;case"fb_event_permalink_social_context":i=f.SOCIAL_CONTEXT_CTA;break;case"fb_event_permalink_people_card":i=f.PEOPLE_CARD_CTA}new b().setEvent(g).setEntryPoint(e).updateExtraData({associated_object_id:d.props.id,associated_object_fbtype:h.EVENT,surface:d.props.surface,action_target:i,name:d.props.eventName,has_cover_image:d.props.hasCoverPhoto,userid_array:d.$7(),event_flow:h.MAKE_PLAN_FLOW,end_action:c?h.SEND_TO_GROUP:""}).log()},"EventMakePlanDialogBodyContainer.react")};d.$7=function(){return Array.from(this.state.selectedEntries.keys())};d.render=function(){var a,c=this.state,d=c.posting,e=c.actionContext;c=babelHelpers.objectWithoutPropertiesLoose(c,["posting","actionContext"]);var f=this.props,g=f.attachment;f=f.preselectedFriendProfiles;return(a=b("React")).jsxs(a.Fragment,{children:[a.jsx(b("EventMakePlanDialogBody.react"),babelHelpers["extends"]({actionContext:b("EventActionContext").toString(e),attachment:g,preselectedFriendProfiles:f,preselectedEntries:this.$1,interestedOrGoingEntries:this.$2,invitedEntries:this.$3,searchSource:this.$5,onSearchChange:this.$8,onSearchEntriesFound:this.$9,onSearchFinished:this.$10,onSelect:this.$11,onMessageChange:this.$12},c)),a.jsx(b("EventMakePlanDialogFooter.react"),{selectedEntriesCount:c.selectedEntries.size,onPost:this.$13}),a.jsx(b("EventMakePlanDialogOverlay.react"),{isShown:d})]})};d.$14=function(a){this.$6(!0,!0);var c=this.props.preselectedFriendProfiles.length,d=this.$7().length;b("EventsActionsLogger").log(this.props.id,{type:b("EventsActionsLogger").Type.SEND,target:b("EventsActionsLogger").Target.MESSAGE,acontext:this.state.actionContext},{preselected_count:d,select_all:c===d,event_id:this.props.id,is_successful:!0,num_recipients:d,is_group:!0,messenger_thread_id:a});this.setState({loading:!0,message:"",posting:!1,query:"",returnEntries:[],selectedEntries:new Map(),suggestedFriendEntries:[]});this.$15(a);this.props.onHide()};d.$15=function(a){var c=this;if(b("ChatAppStore").getState().isInitialized)this.$16(a);else var d=b("ChatAppStore").addListener(function(){b("ChatAppStore").getState().isInitialized&&(b("setImmediate")(function(){return c.$16(a)}),d.remove())})};d.$16=function(a){var c=this.props.entryPoint;c==null?b("FantaTabActions").openTab(a):b("FantaTabActions").openTab(a,[c]);b("ChatOpenTabEventLogger").logAutoOpen(c,a)};return c}(b("React").PureComponent);e.exports=a}),null);
__d("EventMakePlanDialog.react",["cx","fbt","AccessibleLayer","DialogExpansionAtWidth","EventMakePlanDialogBodyContainer.react","EventMakePlanDialogConstants","LayerFadeOnHide","LayerHideOnEscape","React","XUIDialog.react","XUIDialogTitle.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("EventMakePlanDialogConstants").DIALOG_WIDTH;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={show:!0},c.$1=function(){c.setState({show:!1})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){if(!this.state.show)return null;var a=h._("Message"),c=this.props,d=c.causalElement;c=babelHelpers.objectWithoutPropertiesLoose(c,["causalElement"]);return b("React").jsxs(b("XUIDialog.react"),{behaviors:{AccessibleLayer:b("AccessibleLayer"),DialogExpansion:b("DialogExpansionAtWidth"),LayerFadeOnHide:b("LayerFadeOnHide"),LayerHideOnEscape:b("LayerHideOnEscape")},causalElement:d,className:"_350n",layerHideOnBlur:!1,modal:!0,shown:!0,width:i,children:[b("React").jsx(b("XUIDialogTitle.react"),{children:a}),b("React").jsx(b("EventMakePlanDialogBodyContainer.react"),babelHelpers["extends"]({onHide:this.$1},c))]})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("EventMakePlanDialogController",["DOM","EventMakePlanDialog.react","React","ReactDOM","destroyOnUnload"],(function(a,b,c,d,e,f){a={setup:function(a,c){this.render(a,c),b("destroyOnUnload")(function(){b("ReactDOM").unmountComponentAtNode(c),b("DOM").remove(c)})},render:function(a,c){b("ReactDOM").render(b("React").jsx(b("EventMakePlanDialog.react"),babelHelpers["extends"]({},a)),c)}};e.exports=a}),null);