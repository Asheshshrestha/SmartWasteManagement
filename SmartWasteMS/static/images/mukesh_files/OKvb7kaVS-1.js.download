if (self.CavalryLogger) { CavalryLogger.start_js(["s5BQL"]); }

__d("AddCommentFlyoutSizeType",[],(function(a,b,c,d,e,f){a={LARGE:"large",SMALL:"small"};e.exports=a}),null);
__d("GamesVideoPageCustomStickerPackQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2262572510429650"};b.getQueryID=function(){return"283271225955159"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("StickersFlyoutPack.react",["cx","fbt","Image.react","JSResource","Link.react","React","RelayModern","SimpleNUXMessage","SimpleNUXMessageTypes","StickersConfig","emptyFunction","gkx","lazyLoadComponent","StickersFlyoutPack_pack.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;var j=b("lazyLoadComponent")(b("JSResource")("XUIAmbientNUX.react").__setRef("StickersFlyoutPack.react"));c={isComments:!1,onClick:b("emptyFunction")};var k="401714733794624";d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={showNux:!1},d.$2=function(){d.state.showNux&&d.$3(),d.props.onClick()},d.$3=function(){b("SimpleNUXMessage").markMessageSeenByUser(b("SimpleNUXMessageTypes").GAMES_CUSTOM_STICKERS_WWW_V2),d.setState({showNux:!1})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){var a;a=((a=this.props.nuxContent)==null?void 0:a.subtitle)!=null&&b("gkx")("830807")&&!b("SimpleNUXMessage").hasUserSeenMessage(b("SimpleNUXMessageTypes").GAMES_CUSTOM_STICKERS_WWW_V2);this.setState({showNux:a})};d.$4=function(){__p&&__p();var a=this;if(!this.state.showNux)return null;var c;if(this.props.pack.id===k)c=h._("It's time for the FIFA eWorld Cup 2019! Unlock exclusive stickers during the three-day event while watching the livestream.");else{var d;d=(d=this.props.nuxContent)==null?void 0:d.subtitle;if(!d)return null;c=b("React").jsxs(b("React").Fragment,{children:["New! ",d]})}return b("React").jsx(b("React").Suspense,{fallback:b("React").jsx("span",{}),children:b("React").jsx(j,{contextRef:function(){return a.$1},shown:!0,position:"above",alignment:"center",onCloseButtonClick:this.$3,children:c})})};d.render=function(){var a=this,c=this.props.pack,d=b("StickersConfig").search_pack?this.props.index===1||this.props.index===2:this.props.index===1;d="_5r8a"+(this.props.selected?" _5r8b":"")+(d?" _eb3":"");var e=this.props.isComments&&!c.is_comments_capable,f=h._("This pack is only available in photos"),g=h._("This pack is only available in messages"),i=e?b("emptyFunction"):this.$2,j=c.thumbnail_image?c.thumbnail_image.uri:null;if(j===null)return null;f=!c.is_messenger_capable&&c.is_composer_capable?f:g;return b("React").jsxs(b("Link.react"),{"aria-label":e?f:c.name,"aria-pressed":this.props.selected,className:d,"data-hover":"tooltip","data-id":c.id,"data-tooltip-content":e?f:c.name,onClick:i,role:"button",tabIndex:"0",children:[b("React").jsx(b("Image.react"),{className:(e?"_2ji6":"")+" _5r8c",ref:function(b){return a.$1=b},src:j}),this.$4()]})};return c}(b("React").Component);d.defaultProps=c;e.exports=a(d,{pack:i!==void 0?i:i=b("StickersFlyoutPack_pack.graphql")})}),null);
__d("StickersFlyoutSystemPack.react",["cx","Image.react","Link.react","React","StickerConstants","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.$1=function(){var a=this.props.pack;return a.id===b("StickerConstants").FEED_PACK_ID||a.id===b("StickerConstants").TRENDING_STICKER_PACK_ID?this.props.stickerInterface!=="messages":!0};d.render=function(){var a=this,c=this.props,d=c.pack;c=c.icon;var e=this.$1();if(c==null||!e)return null;e=d.name;d=(d=d.id)!=null?d:"";return b("React").jsx(b("Link.react"),{"aria-label":e,"aria-pressed":this.props.selected,className:"_5r8a _817f"+(this.props.selected?" _5r8b":"")+(d===b("StickerConstants").AVATARS_PACK_ID?" _81a2":""),"data-hover":"tooltip","data-id":d,"data-tooltip-content":e,onClick:function(){return a.props.onClick()},role:"button",tabIndex:"0",children:b("React").jsx(b("Image.react"),{className:"_5r8c"+(d===b("StickerConstants").SEARCH_PACK_ID?" _1viy":""),src:c})})};return c}(b("React").Component);a.defaultProps={stickerInterface:"messages",onClick:b("emptyFunction")};e.exports=a}),null);
__d("StickersFlyoutPackSelector.react",["ix","cx","fbt","requireCond","Animation","cr:1107239","Image.react","JSResource","Link.react","Locale","React","ReactDOM","RelayAPIConfig","RelayFBEnvironment","RelayModern","StickerConstants","StickerInterfaces","StickersActions","StickersConfig","StickersFlyoutPack.react","StickersFlyoutSystemPack.react","StickersStoreController","TetraIcon.react","XUIBadge.react","asset","emptyFunction","fbicon","gkx","setImmediate","StickersFlyoutPackSelectorOpenStoreMutation.graphql","StickersFlyoutPackSelector_packs.graphql"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=b("RelayModern").commitMutation;a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;var m=b("JSResource")("StickersStoreDialogForComet.react").__setRef("StickersFlyoutPackSelector.react"),n=4,o=200,p=i._("Sticker Store");c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={animating:!1,page:0},d.$13=function(){d.$11()&&d.$5(d.state.page-1,o)},d.$14=function(){d.$12()&&d.$5(d.state.page+1,o)},d.$15=function(){b("StickersStoreController").showStore(null,d.props.stickerInterface=="composer"),d.$16()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$1(),this.onFlyoutShown()};d.shouldComponentUpdate=function(a,b){return!b.animating};d.componentDidUpdate=function(){this.$1()};d.$1=function(){if(this.props.selectedPackID!=null)return;this.$2()};d.onFlyoutShown=function(){var a=this.$3();if(a.length>0){a=this.$4(this.props.selectedPackID);this.state.page!==a&&this.$5(a,0)}};d.$2=function(){var a=this;b("setImmediate")(function(){var c=a.$3();if(c.length>0){c=a.$6();a.$7(c[0].id)}else b("StickersActions").trayLoaded()})};d.$3=function(){var a=this.$6(),b=this.$8();return a.concat(b)};d.$8=function(){var a,b=[];a=(a=this.props.packs.sticker_store)==null?void 0:(a=a.tray_packs)==null?void 0:a.edges;this.props.customPack&&b.push(this.props.customPack);a&&a.forEach(function(a){a=a.node;a&&b.push(a)});return b};d.$6=function(){__p&&__p();var a=[];b("StickersConfig").search_pack&&a.push(b("StickersConfig").search_pack);a.push(b("StickersConfig").mru_pack);b("StickersConfig").oz_pack&&a.push(b("StickersConfig").oz_pack);b("StickersConfig").feed_pack&&a.push(b("StickersConfig").feed_pack);b("StickersConfig").trending_stickers&&a.push(b("StickersConfig").trending_stickers);var c=b("gkx")("1198178");c=c&&this.props.stickerInterface!=="comments"||!c;b("StickersConfig").avatar_stickers&&c&&a.push(b("StickersConfig").avatar_stickers);return a};d.$4=function(a){var b=this.$3();b=b.findIndex(function(b){return b.id==a});return b!==-1?b<=n?0:Math.floor((b-1)/n):0};d.$5=function(a,c){if(this.state.animating)return;this.setState({animating:!0,page:a},function(){var d=this,e=b("ReactDOM").findDOMNode(this.refs.positioner),f=this.$9(a);new(b("Animation"))(e).to(f.reference,f.offset+"px").ondone(function(){return d.setState({animating:!1})}).duration(c).go()})};d.$9=function(a){var c=b("ReactDOM").findDOMNode(this.refs.positioner),d=c.childNodes[a].offsetLeft;if(b("Locale").isRTL()){var e=c.offsetWidth;c=c.childNodes[a].offsetWidth;return{reference:"right",offset:d+c-e}}return{reference:"left",offset:-d}};d.$10=function(){var a=this.$3();return Math.max(1,Math.ceil((a.length-1)/n))};d.$11=function(){return this.state.page>0};d.$12=function(){return this.state.page+1<this.$10()};d.$16=function(){l(b("RelayFBEnvironment"),{mutation:j!==void 0?j:j=b("StickersFlyoutPackSelectorOpenStoreMutation.graphql"),variables:{input:{actor_id:b("RelayAPIConfig").actorID}},onCompleted:b("emptyFunction"),onError:b("emptyFunction")})};d.render=function(){return b("React").jsxs("div",{className:"_5r85",children:[this.$17(),this.$18(),this.$19(),b("React").jsx("div",{className:"_5r88",children:b("React").jsx("div",{className:"_5r89",ref:"positioner",children:this.$20()})})]})};d.$7=function(a){if(a===null||a===void 0)return;b("StickersActions").selectTrayPack(a)};d.$21=function(a,c){switch(a.id){case b("StickerConstants").SEARCH_PACK_ID:return c?g("785829"):g("492648");case b("StickerConstants").MRU_STICKER_PACK:return c?g("645455"):g("478802");case b("StickerConstants").FEED_PACK_ID:return c?g("948412"):g("948417");case b("StickerConstants").TRENDING_STICKER_PACK_ID:return c?g("953835"):g("790235");default:return a.icon}};d.$20=function(){__p&&__p();var a=this,c=this.$6(),d=c.map(function(c,d){var e=c.id===a.props.selectedPackID,f=a.$21(c,e);return b("React").jsx(b("StickersFlyoutSystemPack.react"),{onClick:function(){a.$7(c.id)},pack:c,icon:f,selected:e,index:d,stickerInterface:a.props.stickerInterface},c.id)}),e=this.$8();e=e.map(function(d,e){var f,g=d.id===a.props.selectedPackID;f=d.id===((f=a.props.customPack)==null?void 0:f.id)?a.props.customPackNuxContent:null;return b("React").jsx(b("StickersFlyoutPack.react"),{nuxContent:f,onClick:function(){return a.$7(d.id)},pack:d,selected:g,index:e+c.length,isComments:a.props.stickerInterface=="comments"},d.id)});d=d.concat(e);e=[];for(var f=0;f<d.length;f+=n){var g=f;f===0&&f++;e.push(b("React").jsx("div",{className:"_5r81",children:d.slice(g,f+n)},f))}return e};d.$17=function(){return b("cr:1107239")&&b("gkx")("1107445")?b("React").jsx("div",{className:"_5r86 rfloat",children:b("React").jsx("div",{className:"_8hey",children:b("React").jsx(b("cr:1107239"),{dialogProps:{isComposer:this.props.stickerInterface==="composer"},dialogResource:m,children:function(a,c){return b("React").jsx(b("TetraIcon.react"),{"aria-label":p,icon:b("fbicon")._(g("487090"),20),color:"blueLink",onPress:a,ref:c,role:"button"})}})})}):b("React").jsxs("a",{"aria-label":p,className:"_5r86 rfloat","data-hover":"tooltip",href:"#",onClick:this.$15,role:"button",tabIndex:"0",children:[b("React").jsx(b("Image.react"),{className:"_5r87",src:g("392514")}),this.$22()]})};d.$22=function(){var a=this.props.packs.num_new_sticker_packs;return a===null||a===void 0||a===0?null:b("React").jsx(b("XUIBadge.react"),{className:"rfloat _3fhs",count:a,maxcount:9,type:"special"})};d.$18=function(){if(!this.$11())return null;var a=b("Locale").isRTL()?g("384087"):g("409864");return b("React").jsx(b("Link.react"),{className:"_37wu lfloat",onClick:this.$13,role:"button","aria-label":"Previous",tabIndex:"0",children:b("React").jsx(b("Image.react"),{className:"_5r84",src:a})})};d.$19=function(){if(!this.$12())return null;var a=b("Locale").isRTL()?g("409864"):g("384087");return b("React").jsx(b("Link.react"),{className:"_37wv rfloat",onClick:this.$14,role:"button","aria-label":"Next",tabIndex:"0",children:b("React").jsx(b("Image.react"),{className:"_5r84",src:a})})};return c}(b("React").Component);c.defaultProps={stickerInterface:"messages"};e.exports=a(c,{packs:k!==void 0?k:k=b("StickersFlyoutPackSelector_packs.graphql")})}),null);
__d("StickerState",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({LOCKED:"locked",UNLOCKED:"unlocked"})}),null);
__d("StickersFlyoutStickerSelector.react",["cx","fbt","ix","AddCommentFlyoutSizeType","Grid.react","Image.react","React","RelayModern","ShimButton.react","ScrollableArea.react","Sticker.react","StickerConstants","StickerInterfaces","StickersActions","StickerState","StickersStateStore","StickerUtils","asset","throttle","StickersFlyoutStickerSelector_stickers_for_pack.graphql","StickersFlyoutStickerSelector_stickers_for_search.graphql","StickersFlyoutStickerSelector_stickers_for_mru_pack.graphql","StickersFlyoutStickerSelector_trending_stickers.graphql","StickersFlyoutStickerSelector_avatar_stickers.graphql"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l,m,n,o=b("Grid.react").GridItem;a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;var p=320,q=255,r=278,s=308,t=36,u=112;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$3=function(){var a=c.refs.stickerScrollable;if(a){a=a.getArea().getScrollTop();c.props.onScroll&&c.props.onScroll(a)}},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this.$1();if(!a||a.length===0)return this.$2();var c=this.props.size==="small"?p:q,d=this.props.size==="small"?r:s;return b("React").jsxs(b("React").Fragment,{children:[!1,b("React").jsx(b("ScrollableArea.react"),{ref:"stickerScrollable",height:this.props.height||c,maxHeight:null,onScroll:b("throttle")(this.$3,200),width:d,fade:!0,children:b("React").jsx("div",{className:"_5r8k",children:b("React").jsx(b("Grid.react"),{cols:4,fixed:!0,children:this.$4(a,!1)})})}),!1]})};d.$1=function(){__p&&__p();var a=this;if(this.props.isAvatarStickersSelected){var c;c=(c=this.props.avatar_stickers)==null?void 0:(c=c.actor)==null?void 0:(c=c.user_avatar)==null?void 0:(c=c.fb_app_avatar_config)==null?void 0:(c=c.avatar_stickers)==null?void 0:c.edges;c=c?c.map(function(a){return((a=a.node)==null?void 0:a.sticker)||{}}):null;return c?c.filter(function(a){return Object.keys(a).length>0}):null}else if(this.props.isTrendingStickers&&this.props.trending_stickers){c=((c=this.props.trending_stickers)==null?void 0:(c=c.suggested_feedback)==null?void 0:c.guide_suggestions)||[];return c.map(function(a){return a})}else if(this.props.stickers_for_pack||this.props.stickers_for_mru_pack){var d;c=((c=this.props.stickers_for_pack)==null?void 0:(c=c.stickers)==null?void 0:c.edges)||[];d=((d=this.props.stickers_for_mru_pack)==null?void 0:(d=d.recently_used_stickers)==null?void 0:d.edges)||[];d=this.props.isMRUPack?d:c;if(this.props.isMRUPack){c=b("StickersStateStore").getState();if(!c.get("recentStickersLoaded"))b("StickersActions").loadRecentStickers(d.map(function(a){return a.node||{}}));else return this.props.recentStickers.filter(function(b){return a.$5(b)})}return d?d.filter(function(b){return a.$5(b.node||{})}):null}else if(this.props.stickers_for_search){c=(c=this.props.stickers_for_search)==null?void 0:(d=c.sticker_results)==null?void 0:d.edges;return c?c.map(function(a){return a}):null}else return null};d.$5=function(a){__p&&__p();var b=this.props.stickerInterface;a=a.pack;if(a)if(b==="composer")return a.is_composer_capable;else if(b==="comments")return a.is_comments_capable;else if(b==="messages")return a.is_messenger_capable;return!0};d.$2=function(){var a=(p-t*2-u)/2;return b("React").jsxs("div",{className:"_5jdt",style:{marginTop:a+"px"},children:[b("React").jsx(b("Image.react"),{src:i("87146")}),b("React").jsx("p",{children:h._("No Stickers to Show")})]})};d.$4=function(a,c){var d=this;return a.map(function(a){var e=a.node||a;a=e.sticker_state!=null&&b("StickerState")[e.sticker_state]==="locked";var f=!a&&e.sprite_image?e.sprite_image.uri:null,g=!a&&e.padded_sprite_image?e.padded_sprite_image.uri:null,h=e.image,j=b("StickerUtils").getScaledDimensions(h.height,h.width,c?40:b("StickerConstants").TRAY_SIZE),k=a?null:function(a){return d.props.onStickerClick(e,a)},l=a?null:function(a){return d.props.onStickerKeyDown(e,a)};return b("React").jsx(o,{"data-testid":"sticker_flyout_grid_item",children:b("React").jsxs(b("ShimButton.react"),{tabIndex:-1,className:"_5r8h",onClick:k,onKeyDown:l,children:[a&&!c?b("React").jsx("div",{className:"_7js5",children:b("React").jsx(b("Image.react"),{src:i("486903")})}):null,b("React").jsx(b("Sticker.react"),{accessibilityLabel:e.label,animationTrigger:"hover",className:"_5r8i"+(a?" _8kc2":""),forceCursorPointer:!0,frameCount:e.frame_count,frameRate:e.frame_rate||83,framesPerCol:e.frames_per_column,framesPerRow:e.frames_per_row,sourceHeight:j.height,sourceURI:h.uri,sourceWidth:j.width,spriteURI:f,packName:e.pack?e.pack.name:null,paddedSpriteURI:g,stickerID:e.id})]})},e.id)})};return c}(b("React").Component);c.defaultProps={isAvatarStickersSelected:!1,isMRUPack:!1,isTrendingStickers:!1,size:b("AddCommentFlyoutSizeType").SMALL,stickerInterface:"messages"};e.exports=a(c,{stickers_for_pack:j!==void 0?j:j=b("StickersFlyoutStickerSelector_stickers_for_pack.graphql"),stickers_for_search:k!==void 0?k:k=b("StickersFlyoutStickerSelector_stickers_for_search.graphql"),stickers_for_mru_pack:l!==void 0?l:l=b("StickersFlyoutStickerSelector_stickers_for_mru_pack.graphql"),trending_stickers:m!==void 0?m:m=b("StickersFlyoutStickerSelector_trending_stickers.graphql"),avatar_stickers:n!==void 0?n:n=b("StickersFlyoutStickerSelector_avatar_stickers.graphql")})}),null);
__d("StickersFlyoutTags.react",["cx","Grid.react","Image.react","React","RelayModern","ScrollableArea.react","XUIButton.react","StickersFlyoutTags_tags.graphql"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("Grid.react").GridItem;a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){__p&&__p();var a=this,c;c=(c=this.props.tags.sticker_store)==null?void 0:(c=c.sticker_tags)==null?void 0:c.nodes;if(c){c=c.filter(function(a){return((a=a.thumbnail_image)==null?void 0:a.uri)!=null}).sort(function(a,b){return(a.order||0)-(b.order||0)}).map(function(c,d){return b("React").jsx(i,{className:"_3iqe",children:b("React").jsx("div",{className:"_t5c"+(d<2?" _1b27":"")+(d%2===0?" _t5d":"")+(d%2!==0?" _t5e":""),children:b("React").jsx(b("XUIButton.react"),{image:b("React").jsx(b("Image.react"),{src:c.thumbnail_image&&c.thumbnail_image.uri}),"data-testid":"stickers_flyout_tag_selector",label:c&&c.name||"",onClick:function(){return a.props.onTagSelect(c)},className:"_5jdu",style:{background:"#"+(c.color_code||"")},disabled:a.props.inputDisabled})})},d)});return b("React").jsx(b("ScrollableArea.react"),{height:this.props.height,width:this.props.width,shadow:!0,fade:!0,className:"_5jei",children:b("React").jsx(b("Grid.react"),{spacing:"pas",cols:2,fixed:!0,children:c})})}return b("React").jsx("div",{})};return c}(b("React").Component);e.exports=a(c,{tags:h!==void 0?h:h=b("StickersFlyoutTags_tags.graphql")})}),null);
__d("StickersFlyoutTagSelector.react",["cx","fbt","requireCond","AddCommentFlyoutSizeType","Banzai","Bootloader","cr:971218","React","RelayFBEnvironment","RelayModern","StickerConstants","StickerInterfaces","StickersFlyoutStickerSelector.react","StickersFlyoutTags.react","StickersTypedLogger","StickerUtils","UFISearchInput.react","debounce","emptyFunction","getObjectValues","performanceAbsoluteNow","prop-types","StickersFlyoutTagSelectorQuery.graphql","StickersFlyoutTagSelectorTagsQuery.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k,l=b("RelayModern").QueryRenderer;b("RelayModern").graphql;var m=320,n=257,o=278,p=324,q=46,r=38,s=b("debounce")(function(a){if(!a||a.length<2)return;new(b("StickersTypedLogger"))().setEvent("search_sticker").setSearchtoken(a).log()},1e3);c=b("React").createClass({displayName:"StickersFlyoutTagSelector",propTypes:{onStickerClick:(a=b("prop-types")).func.isRequired,onStickerKeyDown:a.func.isRequired,stickerInterface:a.oneOf(b("getObjectValues")(b("StickerInterfaces"))),shown:a.bool,size:a.oneOf(Object.values(b("AddCommentFlyoutSizeType")))},getInitialState:function(){return{input:"",tagChosen:!1}},getDefaultProps:function(){return{stickerInterface:"messages",size:b("AddCommentFlyoutSizeType").SMALL}},componentDidMount:function(){this._markerPoint("mount_sticker_tag_selector"),this._focusInput()},UNSAFE_componentWillReceiveProps:function(a){a.shown&&!this.props.shown&&this.setState(this.getInitialState(),this._focusInput)},shouldComponentUpdate:function(a,b){return a.shown},render:function(){return b("React").jsxs("div",{className:"_217a",children:[b("React").jsx(b("UFISearchInput.react"),{onClick:function(a){return a&&a.stopPropagation()},onChange:this._inputChanged,onClear:this._handleResetButtonClick,placeholder:h._("Search stickers"),ref:"inputField",value:this.state.input||""}),this._renderContentArea()]})},_markerPoint:function(a){var c=(k||(k=b("performanceAbsoluteNow")))();b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(b,d){b.markerPoint(d.COMPOSER_INTERACTION,a,"",0,c)},"StickersFlyoutTagSelector.react")},_renderContentArea:function(){__p&&__p();var a=this,c=this.props.size==="small"?m-q:n-r,d=this.props.size==="small"?o:p,e=this._normalizeInput(this.state.input);if(this.state.tagChosen||e.length>1){s(e);var f=Math.ceil(b("StickerConstants").TRAY_SIZE*(window.devicePixelRatio||1));return b("React").jsx(l,{environment:b("RelayFBEnvironment"),query:i!==void 0?i:i=b("StickersFlyoutTagSelectorQuery.graphql"),variables:{stickerWidth:f,stickerHeight:f,stickerInterface:this.props.stickerInterface,query:e},render:function(d){__p&&__p();var e=d.error;d=d.props;if(e)return null;else if(d){a._markerPoint("load_sticker_selector");a._markerPoint=b("emptyFunction");return b("React").jsx(b("StickersFlyoutStickerSelector.react"),{recentStickers:[],ref:"selector",height:c,stickerInterface:a.props.stickerInterface,onStickerClick:a._onStickerClick,onStickerKeyDown:a.props.onStickerKeyDown,stickers_for_search:d.sticker_search,size:a.props.size})}return b("React").jsx("div",{className:"_76z0",children:b("React").jsx(b("cr:971218"),{size:"large"})})}})}else return b("React").jsx(l,{environment:b("RelayFBEnvironment"),query:j!==void 0?j:j=b("StickersFlyoutTagSelectorTagsQuery.graphql"),variables:{},render:function(f){var g=f.error;f=f.props;if(g)return null;else if(f){a._markerPoint("load_sticker_tag_selector");return b("React").jsx(b("StickersFlyoutTags.react"),{height:c-q,inputDisabled:e.length===1,onTagSelect:a._selectTag,tags:f.viewer,width:d-16})}return b("React").jsx("div",{className:"_76z0",children:b("React").jsx(b("cr:971218"),{size:"large"})})}})},_selectTag:function(a){new(b("StickersTypedLogger"))().setEvent("select_tag").setTagid(a.id).log(),this.setState({tagChosen:!0,input:b("StickerUtils").capitalizeWords(a.name)}),this._focusInput()},_normalizeInput:function(a){return a.trim().replace(/\s+/," ").toLowerCase()},_handleResetButtonClick:function(a){a.preventDefault(),this.setState(this.getInitialState())},_inputChanged:function(a){this.setState({input:a.target.value,tagChosen:!1})},_focusInput:function(){this.refs.inputField.focusInput&&this.refs.inputField.focusInput()},_onStickerClick:function(a,c){this.props.onStickerClick(a,c);try{if(b("Banzai").isEnabled("sticker_search_ranking")){c={query:this._normalizeInput(this.state.input),sticker_id:a.id};b("Banzai").post("sticker_search_click",c,b("Banzai").VITAL)}}catch(a){}}});e.exports=c}),null);
__d("StickersFlyout.react",["cx","fbt","AddCommentFlyoutSizeType","Bootloader","FDSSpinner.react","FluxContainer","GamesVideoPageCustomStickerPackQueryWebGraphQLQuery","Keys","React","RelayFBEnvironment","RelayModern","StickerConstants","StickerInterfaces","StickersActions","StickersConfig","StickersDispatcher","StickersFlyoutPackSelector.react","StickersFlyoutStickerSelector.react","StickersFlyoutTagSelector.react","StickersStateStore","StickersTypedLogger","WebGraphQL","WebPixelRatio","XUISpinner.react","joinClasses","performanceAbsoluteNow","promiseDone","StickersFlyoutPackQuery.graphql","StickersFlyoutPackSelectorQuery.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k,l=b("RelayModern").QueryRenderer;b("RelayModern").graphql;var m=b("StickerConstants").SEARCH_PACK_ID,n=["Enter"," "];a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=!1,d.$5=function(a){a.keyCode===b("Keys").ESC&&d.props.onEscKeyDown&&(d.props.onEscKeyDown(),a.stopPropagation(),a.preventDefault())},d.$6=function(a){d.state.packID!==m&&n.indexOf(a.key)===-1&&b("StickersActions").selectTrayPack(m)},d.$8=function(a,c){b("StickersStateStore").getState().get("recentStickersLoaded")&&b("StickersActions").addRecentSticker(a);d.$10();d.props.onStickerSelect(a.id,c,{label:a.label,uri:a==null?void 0:(c=a.image)==null?void 0:c.uri})},d.$9=function(a,c){c.keyCode===b("Keys").RETURN&&(c.stopPropagation(),c.preventDefault(),d.props.onStickerSelect(a.id,c,{label:a.label}))},c)||babelHelpers.assertThisInitialized(d)}c.calculateState=function(){var a=b("StickersStateStore").getState();return{customPack:a.get("customPack"),customPackLoaded:a.get("customPackLoaded"),customPackNuxContent:a.get("customPackNuxContent"),packID:a.get("trayPackID"),trayLoaded:a.get("trayLoaded")}};c.getStores=function(){return[b("StickersStateStore")]};var d=c.prototype;d.UNSAFE_componentWillMount=function(){b("StickersDispatcher").explicitlyRegisterStores([b("StickersStateStore")])};d.componentDidMount=function(){b("promiseDone")(b("WebGraphQL").exec(new(b("GamesVideoPageCustomStickerPackQueryWebGraphQLQuery"))({pageID:this.props.customStickerOwnerID})),function(a){var c;c=a==null?void 0:(c=a.page)==null?void 0:c.custom_sticker_pack;a=a==null?void 0:(a=a.page)==null?void 0:a.custom_sticker_pack_nux_content;b("StickersActions").loadCustomStickerPack(c,a)},function(a){b("StickersActions").loadCustomStickerPack(null)}),this.props.shown&&this.$2()};d.UNSAFE_componentWillReceiveProps=function(a){a.shown?this.$3():this.$4()};d.componentDidUpdate=function(a){!a.shown&&this.props.shown?this.$2():a.shown&&!this.props.shown&&this.$4()};d.$3=function(){this.props.onShown?this.props.onShown(this.$2):this.$2()};d.$2=function(){new(b("StickersTypedLogger"))().setEvent("open_tray").log()};d.$4=function(){this.props.onHidden&&this.props.onHidden()};d.$7=function(a){if(this.$1)return;var c=(k||(k=b("performanceAbsoluteNow")))();b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(a,b){a.markerPoint(b.COMPOSER_INTERACTION,"load_sticker_selector","",0,c)},"StickersFlyout.react")};d.loadPack=function(){__p&&__p();var a=this,c=b("React").jsx("div",{className:"_e0r",children:b("React").jsx(b("XUISpinner.react"),{size:"large"})});if(!this.state.trayLoaded)return c;if(this.state.packID===m&&b("StickersConfig").search_pack!=null)return b("React").jsx("div",{className:"_5r8l",children:b("React").jsx(b("StickersFlyoutTagSelector.react"),{className:"fbStickersFlyoutTagSelector",stickerInterface:this.props.stickerInterface,shown:this.props.shown,onStickerClick:this.$8,onStickerKeyDown:this.$9,size:this.props.size})});c=Math.ceil(b("StickerConstants").TRAY_SIZE*(b("WebPixelRatio").get()||1));var d=this.props.feedbackID;return b("React").jsx("div",{className:"_5r8l","data-id":this.state.packID,children:b("React").jsx(l,{environment:b("RelayFBEnvironment"),query:i!==void 0?i:i=b("StickersFlyoutPackQuery.graphql"),variables:{feedbackID:d||"",hasNoFeedbackID:d==null,stickerWidth:c,stickerHeight:c,packID:this.state.packID,numMRUStickers:b("StickersConfig").max_mru_stickers},render:function(c){__p&&__p();var d=c.error;c=c.props;if(d)return null;else if(c){a.$7();a.$1=!0;return b("React").jsx(b("StickersFlyoutStickerSelector.react"),{recentStickers:b("StickersStateStore").getState().get("recentStickers"),stickerInterface:a.props.stickerInterface,onStickerClick:a.$8,onStickerKeyDown:a.$9,size:a.props.size,isMRUPack:a.state.packID===b("StickerConstants").MRU_STICKER_PACK,isAvatarStickersSelected:a.state.packID===b("StickerConstants").AVATARS_PACK_ID,isTrendingStickers:a.state.packID===b("StickerConstants").TRENDING_STICKER_PACK_ID,avatar_stickers:c.viewer,stickers_for_pack:c.node,stickers_for_mru_pack:c.viewer,trending_stickers:c.feedback_node,isSupporterOnlyStickers:!!a.state.customPack&&a.state.customPack.id===a.state.packID&&a.state.customPack.lock_type==="SUBSCRIPTION"})}return b("React").jsx("div",{className:"_76z0",children:b("React").jsx(b("FDSSpinner.react"),{size:"large"})})}})})};d.$10=function(){var a=(k||(k=b("performanceAbsoluteNow")))();b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(b,c){b.markerPoint(c.COMPOSER_INTERACTION,"send_sticker","",0,a),b.markerEnd(c.COMPOSER_INTERACTION,"SUCCESS",0,a)},"StickersFlyout.react")};d.render=function(){__p&&__p();var a=this;return b("React").jsxs("div",{"aria-label":h._("Stickers"),className:b("joinClasses")(this.props.className,"_5r8f"),onKeyDown:this.$5,onKeyPress:this.$6,role:"dialog",children:[b("React").jsx("div",{className:"_5r8e",children:b("React").jsx(l,{environment:b("RelayFBEnvironment"),query:j!==void 0?j:j=b("StickersFlyoutPackSelectorQuery.graphql"),variables:{stickerInterface:this.props.stickerInterface},render:function(c){var d=c.error;c=c.props;var e=!a.state.customPackLoaded;if(d||e)return null;else if(c){return b("React").jsx(b("StickersFlyoutPackSelector.react"),{customPack:a.state.customPack,customPackNuxContent:a.state.customPackNuxContent,packs:c.viewer,selectedPackID:(d=a.state.packID)!=null?d:void 0,stickerInterface:a.props.stickerInterface,shown:a.props.shown})}return null}})}),b("React").jsx("div",{className:"_5r8m",children:this.loadPack()})]})};return c}(b("React").PureComponent);a.defaultProps={customStickerOwnerID:"",feedbackID:null,stickerInterface:"messages",shown:!1,size:b("AddCommentFlyoutSizeType").SMALL};e.exports=b("FluxContainer").create(a)}),null);
__d("ReactComposerStickerToggleController.react",["cx","Arbiter","ContextualLayerAutoFlip","LayerTabIsolation","React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerEvents","ReactComposerLoggingName","ReactComposerTaggerActions","StickersFlyout.react","XUIContextualDialog.react","prop-types"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();c=b("React").createClass({displayName:"ReactComposerStickerToggleController",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{taggerID:(a=b("prop-types")).string.isRequired,loggingName:a.oneOf(Object.values(b("ReactComposerLoggingName"))).isRequired,children:a.any,showFlyout:a.bool.isRequired},render:function(){return b("React").jsxs("span",{onClick:this._onSelect,role:"presentation",children:[b("React").jsx("span",{className:"_4mvf",ref:"container",children:this.props.children}),this._renderStickerFlyout()]})},_renderStickerFlyout:function(){var a=this;return!this.props.showFlyout?null:b("React").jsx(b("XUIContextualDialog.react"),{alignment:"left",behaviors:{ContextualLayerAutoFlip:b("ContextualLayerAutoFlip"),LayerTabIsolation:b("LayerTabIsolation")},contextRef:function(){return a.refs.container},onBlur:this._hideFlyout,onToggle:function(b){!b&&a.props.showFlyout&&a._hideFlyout()},position:"below",shown:this.props.showFlyout,hasActionableContext:!0,width:278,children:b("React").jsx("div",{children:b("React").jsx(b("StickersFlyout.react"),{onEscKeyDown:this._hideFlyout,onStickerSelect:this._onStickerSelected,stickerInterface:"posts",shown:this.props.showFlyout})})})},_onSelect:function(){b("ReactComposerTaggerActions").selectTagger(this.context.composerID,this.props.loggingName,this.props.taggerID,!1)},_hideFlyout:function(){this.props.showFlyout&&b("ReactComposerTaggerActions").deselectCurrentTagger(this.context.composerID,this.props.loggingName)},_onStickerSelected:function(a,c,d){b("ReactComposerTaggerActions").setTaggerData(this.context.composerID,this.props.loggingName,this.props.taggerID,{stickerID:a,accessibilityLabel:d?d.label:""}),this._hideFlyout(),b("Arbiter").inform(b("ReactComposerEvents").ACTIVATE_ATTACHMENT+this.context.composerID)}});e.exports=c}),null);
__d("ReactComposerStickerSproutContainer.react",["FluxContainer","React","ReactComposerContextTypes","ReactComposerDisabledSproutItem.react","ReactComposerSproutItem.react","ReactComposerSproutsDefaultUIConfigTyped","ReactComposerStickerToggleController.react","ReactComposerTaggerStore","ReactComposerTaggerType"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(){return[b("ReactComposerTaggerStore")]};c.calculateState=function(a,c,d){a=d.composerID;return{highlighted:b("ReactComposerTaggerStore").hasData(a,b("ReactComposerTaggerType").STICKER),isDisabled:b("ReactComposerTaggerStore").isDisabled(a,b("ReactComposerTaggerType").STICKER),isSelected:b("ReactComposerTaggerStore").getSelectedTagger(a)===b("ReactComposerTaggerType").STICKER}};var d=c.prototype;d.render=function(){return this.state.isDisabled?b("React").jsx(b("ReactComposerDisabledSproutItem.react"),{uiConfig:this.props.uiConfig}):b("React").jsx(b("ReactComposerStickerToggleController.react"),babelHelpers["extends"]({},this.props,{showFlyout:this.state.isSelected,taggerID:b("ReactComposerTaggerType").STICKER,loggingName:this.props.uiConfig.loggingName,children:b("React").jsx(b("ReactComposerSproutItem.react"),{uiConfig:this.props.uiConfig,highlighted:this.state.highlighted})}))};return c}(b("React").PureComponent);a.defaultProps={uiConfig:b("ReactComposerSproutsDefaultUIConfigTyped").sproutsUIConfigMap.STICKER};a.contextTypes=b("ReactComposerContextTypes");e.exports=b("FluxContainer").create(a,{withContext:!0,withProps:!0})}),null);