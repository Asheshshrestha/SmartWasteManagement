if (self.CavalryLogger) { CavalryLogger.start_js(["P7N\/4"]); }

__d("StoriesCardOverlayResharedPost_overlay.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"Fragment",name:"StoriesCardOverlayResharedPost_overlay",type:"StoryOverlayResharedPost",metadata:null,argumentDefinitions:[],selections:[{kind:"LinkedField",alias:null,name:"attached_story",storageKey:null,args:null,concreteType:"Story",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"action_title",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"bounds",storageKey:null,args:null,concreteType:"StoryOverlayRectangle",plural:!1,selections:[{kind:"FragmentSpread",name:"StoriesCardOverlayPositioner_bounds",args:null}]}]};e.exports=a}),null);
__d("StoriesPollStickerMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"input",type:"VoteStoryCardPollData!",defaultValue:null}],b=[{kind:"LinkedField",alias:null,name:"vote_story_card_poll",storageKey:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"VoteStoryCardPollResponsePayload",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"client_mutation_id",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"story_card_poll",storageKey:null,args:null,concreteType:"StoryCardPoll",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"can_viewer_vote",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"poll_options",storageKey:null,args:null,concreteType:"StoryCardPollOption",plural:!0,selections:[{kind:"ScalarField",alias:null,name:"index",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"text",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"vote_count",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"viewer_vote_index",args:null,storageKey:null}]}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"StoriesPollStickerMutation",type:"Mutation",metadata:null,argumentDefinitions:a,selections:b},operation:{kind:"Operation",name:"StoriesPollStickerMutation",argumentDefinitions:a,selections:b},params:{operationKind:"mutation",name:"StoriesPollStickerMutation",id:"2241322555930366",text:null,metadata:{}}}}();e.exports=a}),null);
__d("StoriesPollSticker_overlay.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"Fragment",name:"StoriesPollSticker_overlay",type:"StoryOverlayPollSticker",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"style",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"voting_control_bounds",storageKey:null,args:null,concreteType:"StoryOverlayRectangle",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"width",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"height",args:null,storageKey:null},{kind:"FragmentSpread",name:"StoriesCardOverlayPositioner_bounds",args:null}]},{kind:"LinkedField",alias:null,name:"poll",storageKey:null,args:null,concreteType:"StoryCardPoll",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"can_viewer_vote",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewer_vote_index",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"poll_options",storageKey:null,args:null,concreteType:"StoryCardPollOption",plural:!0,selections:[{kind:"ScalarField",alias:null,name:"text",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"vote_count",args:null,storageKey:null}]}]}]};e.exports=a}),null);
__d("StoriesPollSticker_owner.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"Fragment",name:"StoriesPollSticker_owner",type:"CameraPostBucketOwnerUnion",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]};e.exports=a}),null);
__d("StoriesPollSticker_story.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"Fragment",name:"StoriesPollSticker_story",type:"Story",metadata:null,argumentDefinitions:[],selections:[{kind:"LinkedField",alias:null,name:"via",storageKey:null,args:null,concreteType:null,plural:!1,selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]}]};e.exports=a}),null);
__d("StoriesReactionStickerMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"input",type:"ReactStoryCardReactionStickerData!",defaultValue:null}],b=[{kind:"LinkedField",alias:null,name:"react_story_card_reaction_sticker",storageKey:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"ReactStoryCardReactionStickerResponsePayload",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"story_card_reaction_sticker",storageKey:null,args:null,concreteType:"StoryCardReactionSticker",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"StoriesReactionStickerMutation",type:"Mutation",metadata:null,argumentDefinitions:a,selections:b},operation:{kind:"Operation",name:"StoriesReactionStickerMutation",argumentDefinitions:a,selections:b},params:{operationKind:"mutation",name:"StoriesReactionStickerMutation",id:"2107432889344441",text:null,metadata:{}}}}();e.exports=a}),null);
__d("StoriesReactionSticker_overlay.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"Fragment",name:"StoriesReactionSticker_overlay",type:"StoryOverlayReactionSticker",metadata:null,argumentDefinitions:[],selections:[{kind:"LinkedField",alias:null,name:"reaction_sticker",storageKey:null,args:null,concreteType:"StoryCardReactionSticker",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"bounds",storageKey:null,args:null,concreteType:"StoryOverlayRectangle",plural:!1,selections:[{kind:"FragmentSpread",name:"StoriesCardOverlayPositioner_bounds",args:null}]},{kind:"FragmentSpread",name:"ReactionStickerKeyframe_overlay",args:null}]};e.exports=a}),null);
__d("ReactionStickerKeyframe_overlay.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={kind:"ScalarField",alias:null,name:"x",args:null,storageKey:null},b={kind:"ScalarField",alias:null,name:"y",args:null,storageKey:null},c={kind:"ScalarField",alias:null,name:"height",args:null,storageKey:null},d={kind:"ScalarField",alias:null,name:"width",args:null,storageKey:null};return{kind:"Fragment",name:"ReactionStickerKeyframe_overlay",type:"StoryOverlayReactionSticker",metadata:null,argumentDefinitions:[],selections:[{kind:"LinkedField",alias:null,name:"reaction_sticker",storageKey:null,args:null,concreteType:"StoryCardReactionSticker",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"sticker_asset",storageKey:null,args:null,concreteType:"InspirationsStickerImageAsset",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"sticker_animation_assets",storageKey:null,args:null,concreteType:"InspirationsStickerAnimationAssetWithType",plural:!0,selections:[{kind:"ScalarField",alias:null,name:"type",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"asset",storageKey:null,args:null,concreteType:"InspirationsStickerAnimationAsset",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"keyframe_uri",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"initial_state_bounds",storageKey:null,args:null,concreteType:"StoryOverlayRectangle",plural:!1,selections:[a,b,c,d]}]}]}]}]},{kind:"LinkedField",alias:null,name:"bounds",storageKey:null,args:null,concreteType:"StoryOverlayRectangle",plural:!1,selections:[d,a,b,c]}]}}();e.exports=a}),null);
__d("StoriesTagSticker_overlay.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"Fragment",name:"StoriesTagSticker_overlay",type:"StoryOverlayTagSticker",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"profile_action_link",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"type",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"bounds",storageKey:null,args:null,concreteType:"StoryOverlayRectangle",plural:!1,selections:[{kind:"FragmentSpread",name:"StoriesCardOverlayPositioner_bounds",args:null}]}]};e.exports=a}),null);
__d("StoriesCardOverlayResharedPost.react",["Banzai","CometLink.react","CometTooltip.react","React","StoriesCardOverlayPositioner.react","StoriesPauseReasons","StoriesRelay","stylex","StoriesCardOverlayResharedPost_overlay.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;a=b("StoriesRelay").createFragmentContainer;b("StoriesRelay").graphql;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){__p&&__p();a=d.props;var c=a.cardID;a=a.overlay;a=a.attached_story;if(a){a=a.id;if(typeof a==="string"){a={event_name:"reshared_post_tap",reshared_post_graphql_id:a,thread_graphql_id:c};b("Banzai").post("stories_reshares_consumption",a)}}},d.$2=function(a){d.props.setPause(!0,b("StoriesPauseReasons").HOVER_ON_OVERLAY_STICKER)},d.$3=function(a){d.props.setPause(!1,b("StoriesPauseReasons").HOVER_ON_OVERLAY_STICKER)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){__p&&__p();var a=this.props,c=a.containerHeight,d=a.containerWidth;a=a.overlay;var e=a.action_title,f=a.attached_story;a=a.bounds;if(f&&e!==""&&a){f=f.url;if(typeof f==="string"){var g;return(g=b("React")).jsx(b("StoriesCardOverlayPositioner.react"),{bounds:a,containerHeight:c,containerWidth:d,children:g.jsx(b("CometTooltip.react"),{align:"middle",position:"above",tooltip:e,children:g.jsx(b("CometLink.react"),{href:f,onClick:this.$1,target:"_blank",children:g.jsx("div",{className:"k4urcfbm pmk7jnqg mrt03zmi datstx6m","data-testid":"overlay_reshared_post",onMouseEnter:this.$2,onMouseLeave:this.$3})})})},"reshare_"+f)}}return null};return c}(b("React").PureComponent);e.exports=a(c,{overlay:g!==void 0?g:g=b("StoriesCardOverlayResharedPost_overlay.graphql")})}),null);
__d("Autosize",["cx","CSS","DOM","Style"],(function(a,b,c,d,e,f,g){__p&&__p();["fontFamily","fontStyle","fontVariant","fontWeight","letterSpacing","textDecoration","textIndent","textTransform","whiteSpace","wordSpacing","wordWrap"];var h=/^[0-9]+$/;function i(a){var c,d=a.cloneNode(!0);b("CSS").addClass(d,"_4g");var e=a.clientWidth-(c=b("Style")).getFloat(a,"paddingLeft")-c.getFloat(a,"paddingRight");c.set(d,"width",e+"px");e=a.clientHeight-c.getFloat(a,"paddingTop")-c.getFloat(a,"paddingBottom");c.set(d,"height",e+"px");b("DOM").insertAfter(a,d);return d}function j(a,c,d,e,f){__p&&__p();var g=a.style.fontSize,h=a.style.height;b("Style").set(a,"height","auto");var i;c!==null&&(i=a.style.width,b("Style").set(a,"width","auto"));var j=0,k=f.length-1;while(j<k){var l=Math.ceil((j+k)/2);b("Style").set(a,"font-size",f[l]+e);d!==null&&a.scrollHeight>d||c!==null&&a.scrollWidth>c?k=l-1:j=l}a.style.fontSize=g;a.style.height=h;c!==null&&(a.style.width=i);return f[j]+e}function k(a,c,d,e,f,g){__p&&__p();var h=a.style.fontSize,i=a.style.height;b("Style").set(a,"height","auto");var j;c!==null&&(j=a.style.width,b("Style").set(a,"width","auto"));b("Style").set(a,"font-size",g+e);if((d===null||a.scrollHeight<=d)&&(c===null||a.scrollWidth<=c)){a.style.fontSize=h;a.style.height=i;c!==null&&(a.style.width=j);return g+e}b("Style").set(a,"font-size",f+e);if(d!==null&&a.scrollHeight>d||c!==null&&a.scrollWidth>c){a.style.fontSize=h;a.style.height=i;c!==null&&(a.style.width=j);return f+e}while(f+1<g){var k=Math.ceil((f+g)/2);b("Style").set(a,"font-size",k+e);d!==null&&a.scrollHeight>d||c!==null&&a.scrollWidth>c?g=k:f=k}a.style.fontSize=h;a.style.height=i;c!==null&&(a.style.width=j);return f+e}function a(a,b){__p&&__p();this._wrap=a;this._attr=b;if(this._attr.sizes){a=this._attr.sizes;for(var c=1,d=a.length;c<d;c++){if(a[c-1]<=a[c])continue;a.sort(function(a,b){return a-b});break}}else if(b.min>b.max){c=b.min;b.min=b.max;b.max=c}this.fit()}a.prototype.fit=function(a,c){__p&&__p();var d=this._wrap;if(!d.clientWidth){l.push(this);return}var e=i(d);typeof a==="undefined"&&(a=this._attr.width);h.test(a)?e.style.width=a+"px":a!==null&&a!=="auto"&&(e.style.width=a);typeof c==="undefined"&&(c=this._attr.height);h.test(c)?e.style.height=c+"px":c!==null&&c!=="auto"&&(e.style.height=c);a=null;this._attr.wrap||(a=e.clientWidth);var f=null;(this._attr.wrap||c!==null)&&(f=e.clientHeight);this._attr.sizes?c=j(e,a,f,"px",this._attr.sizes):c=k(e,a,f,"px",this._attr.min,this._attr.max);b("DOM").remove(e);b("Style").set(d,"font-size",c);b("CSS").removeClass(d,"invisible_elem")};var l=[];a.onNodeInserted=function(){var a=l;l=[];a.forEach(function(a){a.fit()})};e.exports=a}),null);
__d("StoriesPollStickerOptionLabel.react",["cx","Autosize.react","React","StoriesEnums","range","stylex"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("StoriesEnums").POLL_STICKER;function a(a){__p&&__p();var c=a.overlayHeight,d=a.overlayWidth,e=a.voteCountPercent,f=e!==void 0&&e!==null,g=.5;typeof e==="number"&&(g=e/100);e=function(){var b=a.overlayWidth*h.AVAILABLE_WIDTH_RATIO;b=Math.floor(b*g*h.VOTE_OPTION_MAX_WIDTH_RATIO);var d=Math.floor(f?h.TEXT_SMALL_HEIGHT_RATIO*c:h.TEXT_BIG_HEIGHT_RATIO*c);return{height:d,width:b}};var i=function(){var b={color:a.isSelected&&a.isOverflowedOption?h.TEXT_COLOR_GREY:h.BACKGROUND_COLOR_BLUE,height:"auto",width:l},c=f?{lineHeight:1}:{};return babelHelpers["extends"]({},b,c)};e=e();var j=h.VOTE_OPTION_MAX_WIDTH_RATIO*100,k="oqcyycmt po0baly6 jm1wdb64 aenfhxwr taijpn5t g5gj957u buofh1pr cbu4d94t rj1gh0hx j83agx80 rq0escxv"+(a.isSelected?" igj13h7g":""),l=a.isOverflowLayout?h.DEFAULT_OPTION_WIDTH_RATIO*d*h.VOTE_OPTION_MAX_WIDTH_RATIO:e.width,m={};i=i();a.isOverflowLayout?(m.maxWidth=l,i.width="auto"):m.maxWidth=j+"%";j=f&&g<=.5?1:0;j={color:h.TEXT_COLOR_GREY,fontSize:d*h.VOTE_COUNT_FONT_SIZE_RATIO,width:i.width,zIndex:j};var n=f?h.TEXT_SMALL_MIN_FONT_SIZE_RATIO*d:h.TEXT_BIG_MIN_FONT_SIZE_RATIO*d;d=f?h.TEXT_SMALL_MAX_FONT_SIZE_RATIO*d:h.TEXT_BIG_MAX_FONT_SIZE_RATIO*d;a.isSelected&&a.isOverflowedOption?i=babelHelpers["extends"]({},i,{color:h.TEXT_COLOR_GREY}):a.isSelected&&a.isResultView&&(j.color="white",i=babelHelpers["extends"]({},i,{color:"white"}));a.isInstagramStyle&&(j.color=h.TEXT_COLOR_GREY,i.color=a.isLeftOption?h.IG_LEFT_TEXT_COLOR:h.IG_RIGHT_TEXT_COLOR);return b("React").jsxs("div",{className:k,style:m,children:[b("React").jsx("div",{className:"_66l8",style:babelHelpers["extends"]({},i,{textAlign:a.align}),children:b("React").jsx(b("Autosize.react"),{height:e.height,sizes:b("range")(n,d+1,2),width:l,children:a.text.toUpperCase()})}),f&&b("React").jsx("div",{className:"_66l8",style:babelHelpers["extends"]({},j,{textAlign:a.align}),children:(a.voteCountPercent||0)+"%"})]})}e.exports=a}),null);
__d("StoriesPollStickerOption.react",["CometPressable.react","React","ReactMotion","StoriesEnums","StoriesPollStickerOptionLabel.react","stylex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("ReactMotion").Motion,i=b("ReactMotion").presets,j=b("ReactMotion").spring,k=b("StoriesEnums").POLL_STICKER,l=b("StoriesEnums").VOTING_PHASES;function a(a){__p&&__p();var c=a.isLeftOption,d=a.overlayHeight,e=a.overlayWidth,f=a.width,n=m(a);if(a.votingPhase===l.VOTING)return b("React").jsx("div",{className:"k4urcfbm abiwlrkh oqq733wu a8nywdso qt6c0cv9 rz4wbd8a jb3vyjys n5yhfkqm taijpn5t datstx6m j83agx80 nhd2j8a9 mkbloq8g bp9cbjyn"+(c?" h3mn19vb":"")+" hdj6kjfu mo3u6lec",style:babelHelpers["extends"]({},n,{width:k.DEFAULT_OPTION_WIDTH_RATIO*f}),children:b("React").jsx(b("CometPressable.react"),{display:"inline",onPress:a.onSelect,overlayDisabled:!0,children:b("React").jsx(b("StoriesPollStickerOptionLabel.react"),{align:n.textAlign,isInstagramStyle:a.isInstagramStyle,isLeftOption:a.isLeftOption,isOverflowLayout:a.isOverflowLayout,isOverflowedOption:a.isOverflowedOption,isResultView:!a.isConsumer,isSelected:a.isSelected,overlayHeight:d,overlayWidth:e,text:a.text||"",voteCountPercent:a.voteCountPercent})})});if(a.votingPhase===l.RESULTS)return b("React").jsx("div",{className:(g||(g=b("stylex"))).dedupe({"align-items-1":"bp9cbjyn","background-color-1":"mkbloq8g","cursor-1":"nhd2j8a9","display-1":"j83agx80","height-1":"datstx6m","justify-content-1":"taijpn5t","min-width-1":"n5yhfkqm","padding-top-1":"jb3vyjys","padding-end-1":"rz4wbd8a","padding-bottom-1":"qt6c0cv9","padding-start-1":"a8nywdso","pointer-events-1":"oqq733wu","user-select-1":"abiwlrkh","width-1":"k4urcfbm"},c?{"border-end-0.3":"h3mn19vb"}:null,{"align-items-1":"bp9cbjyn","border-end-0.3":"bn081pho","cursor-1":"bnpdmtie","display-1":"j83agx80","flex-direction-1":"cbu4d94t","justify-content-1":"taijpn5t","pointer-events-1":"hzruof5a"},a.isSelected&&a.isConsumer?{"background-color-1":"j0apdczp"}:null,a.isSelected&&!a.isConsumer?{"background-image-1":"ceizbtlg"}:null),style:babelHelpers["extends"]({},n,{width:f}),children:b("React").jsx(b("StoriesPollStickerOptionLabel.react"),{align:n.textAlign,isInstagramStyle:a.isInstagramStyle,isLeftOption:a.isLeftOption,isOverflowLayout:a.isOverflowLayout,isOverflowedOption:a.isOverflowedOption,isResultView:!a.isConsumer,isSelected:a.isSelected,overlayHeight:d,overlayWidth:e,text:a.text||"",voteCountPercent:a.voteCountPercent})});var o=c&&a.isSelected||!c&&!a.isSelected;o=o?0:e;f=c?f:Math.abs(f-e);o=Math.floor(c?o:Math.abs(e-o));f=Math.floor(c?f:Math.abs(e-f));return b("React").jsx(h,{defaultStyle:{width:o},style:{width:j(f,babelHelpers["extends"]({},i.noWobble))},children:function(f){return b("React").jsx("div",{className:(g||(g=b("stylex"))).dedupe({"align-items-1":"bp9cbjyn","background-color-1":"mkbloq8g","cursor-1":"nhd2j8a9","display-1":"j83agx80","height-1":"datstx6m","justify-content-1":"taijpn5t","min-width-1":"n5yhfkqm","padding-top-1":"jb3vyjys","padding-end-1":"rz4wbd8a","padding-bottom-1":"qt6c0cv9","padding-start-1":"a8nywdso","pointer-events-1":"oqq733wu","user-select-1":"abiwlrkh","width-1":"k4urcfbm"},c?{"border-end-0.3":"h3mn19vb"}:null,{"align-items-1":"bp9cbjyn","border-end-0.3":"bn081pho","cursor-1":"bnpdmtie","display-1":"j83agx80","flex-direction-1":"cbu4d94t","justify-content-1":"taijpn5t","pointer-events-1":"hzruof5a"},a.isSelected?{"background-color-1":"j0apdczp"}:null),style:babelHelpers["extends"]({},f,n),children:b("React").jsx(b("StoriesPollStickerOptionLabel.react"),{align:n.textAlign,isInstagramStyle:a.isInstagramStyle,isLeftOption:a.isLeftOption,isOverflowLayout:a.isOverflowLayout,isOverflowedOption:a.isOverflowedOption,isResultView:!1,isSelected:a.isSelected,overlayHeight:d,overlayWidth:e,text:a.text||"",voteCountPercent:a.voteCountPercent})})}})}var m=function(a){__p&&__p();var b={textAlign:"center"};a.isSelected&&a.votingPhase===l.RESULTS&&a.isInstagramStyle&&(b=babelHelpers["extends"]({},b,{background:k.BACOGROUND_COLOR_SLATE}));if(a.optionsCount===1)return babelHelpers["extends"]({},b,{borderEnd:"0px"});var c=a.isLeftOption?"Left":"Right",d=a.isLeftOption?"left":"right",e=a.isLeftOption?"flex-start":"flex-end";c="padding"+c;if(a.isOverflowLayout){b=babelHelpers["extends"]({},b,(e={alignItems:e},e[c]=k.OVERFLOW_CHILD_PADDING_RATIO*a.overlayWidth+"px",e))}else if(!a.isInstagramStyle){b=babelHelpers["extends"]({},b,(e={},e[c]=k.CHILD_PADDING_RATIO*a.overlayWidth+"px",e))}a.isOverflowedOption&&(b.textAlign=d);return b};e.exports=a}),null);
__d("StoriesPollSticker.react",["React","StoriesActorContext","StoriesCardOverlayPositioner.react","StoriesEnums","StoriesPauseReasons","StoriesPollStickerOption.react","StoriesRelay","stylex","uuid","StoriesPollStickerMutation.graphql","StoriesPollSticker_overlay.graphql","StoriesPollSticker_owner.graphql","StoriesPollSticker_story.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h,i,j,k,l=b("React").useContext,m=b("React").useState,n=b("StoriesEnums").POLL_STICKER,o=b("StoriesEnums").VOTING_PHASES,p=(c=b("StoriesRelay")).commitMutation;d=c.createFragmentContainer;c.graphql;var q=c.useRelayEnvironment;function a(a){__p&&__p();var c,d=q(),e=m(!1),f=e[0],g=e[1];e=l(b("StoriesActorContext"));var h=e.actorID;e=a.containerHeight;var i=a.containerWidth,j=a.overlay,p=j==null?void 0:j.poll,u=j==null?void 0:j.style,w=u===n.IG_TWO_OPTION_COMBINED;u=j==null?void 0:(u=j.voting_control_bounds)==null?void 0:u.width;c=j==null?void 0:(c=j.voting_control_bounds)==null?void 0:c.height;if(typeof u!=="number"||typeof c!=="number")return null;var x=u*i,y=c*e,z=function(b){var c=p==null?void 0:p.can_viewer_vote;if(c===!1)return;g(!0);c={optionIndex:b,storyID:a.cardID};v(c,d,a)},A=function(){__p&&__p();var b=(p==null?void 0:p.poll_options)||[],c=p==null?void 0:p.viewer_vote_index,d=p==null?void 0:p.can_viewer_vote,e=b.reduce(function(a,b){return a+(b.vote_count||0)},0),g=s(b),i=c!=null&&c>=0,j=!r(a,h);d=j?!i&&d:e===0;var k=!f&&!d,l=f&&!d,m=0,n=[],q=t(a);b.forEach(function(a,d){__p&&__p();var h=a.text;a=a.vote_count;var p=d===c||q;if(typeof a!=="number")return;if((k||l)&&a===0)return;var r=void 0;u=x;var s=o.VOTING,t=!1;if(k||l){k?s=o.RESULTS:l&&(s=o.JUST_VOTED);var v=!j&&!i&&g===d;t=p||v;if(d===b.length-1)r=100-m;else{p=a/e;r=p*100;v=Math.round(r)!==r;a=r<.1;p=v?r.toFixed(a?1:0):r;r=parseFloat(p);m+=r}u=x*(r/100)}n.push({animateIn:f,isConsumer:j,isSelected:t,key:d,onSelect:function(){return z(d)},text:h,voteCountPercent:r,votingPhase:s,width:u})});return n};c=function(){a.setPause(!0,b("StoriesPauseReasons").MOUSE_ENTER_POLL_STICKER)};var B=function(){a.setPause(!1,b("StoriesPauseReasons").MOUSE_ENTER_POLL_STICKER)},C=function(){var a=A(),c=a.findIndex(function(a){return a.width<=n.MINIMUM_LABEL_WIDTH_RATIO*x});return a.map(function(d,e){return b("React").jsx(b("StoriesPollStickerOption.react"),babelHelpers["extends"]({},d,{isInstagramStyle:w,isLeftOption:e===0,isOverflowLayout:c>=0,isOverflowedOption:c===e,optionsCount:a.length,overlayHeight:y,overlayWidth:x}))})};C=C();return b("React").jsx(b("StoriesCardOverlayPositioner.react"),{bounds:j==null?void 0:j.voting_control_bounds,containerHeight:e,containerWidth:i,children:b("React").jsx("div",{className:(k||(k=b("stylex"))).dedupe({"align-items-1":"gs1a9yip","background-color-1":"mkbloq8g","border-top-0.3":"qu0x051f","border-end-0.3":"esr5mh6w","border-bottom-0.3":"e9989ue4","border-start-0.3":"r7d6kgcz","bottom-1":"i09qtzwb","box-shadow-1":"nwm2mul6","color-1":"h4pr0btg","display-1":"j83agx80","flex-direction-1":"btwxx1t3","height-1":"datstx6m","justify-content-1":"jifvfom9","overflow-x-1":"ni8dbmo4","overflow-y-1":"stjgntxs","pointer-events-1":"oqq733wu","position-1":"pmk7jnqg","top-1":"kr520xx4","transform-origin-1":"dd2scrzq","width-1":"k4urcfbm"},w?null:{"border-top-start-radius-1":"a4snqeeb","border-top-end-radius-1":"m5mjud78","border-bottom-end-radius-1":"o5016i8p","border-bottom-start-radius-1":"te4y77sl"},w?{"border-top-start-radius-1":"fni8adji","border-top-end-radius-1":"hgaippwi","border-bottom-end-radius-1":"fykbt5ly","border-bottom-start-radius-1":"ns4ygwem"}:null),onMouseEnter:c,onMouseLeave:B,children:C})})}var r=function(a,b){var c=a.owner;if(c==null)return!1;b=b;a=(a=a.story)==null?void 0:(a=a.via)==null?void 0:a.id;return c.id===b||a===b},s=function(a){return a.reduce(function(b,c,d){c=c==null?void 0:c.vote_count;var e=a[b].vote_count;return typeof c==="number"&&typeof e==="number"&&e<c?d:b},0)},t=function(a){a=((a=a.overlay)==null?void 0:(a=a.poll)==null?void 0:a.poll_options)||[];return a.filter(function(a){a=a==null?void 0:a.vote_count;return typeof a==="number"&&a>0}).length===1},u=function(a,c){__p&&__p();var d=a.get(c.storyID);d=d&&d.getLinkedRecords("story_overlays")||[];var e=null;d.map(function(a){if(a==null)return;a.getValue("__typename")==="StoryOverlayPollSticker"&&(e=a.getLinkedRecord("poll"))});if(e==null)return;d=c.optionIndex;e.setValue(d,"viewer_vote_index");c=e.getLinkedRecords("poll_options");var f=c.length,g=new Array(f);g[f-d-1]=c[f-d-1];g[d]=a.create("client:newNode:"+b("uuid")(),"StoryCardPollOption");g[d].setValue(c[d].getValue("vote_count")+1,"vote_count");g[d].setValue(c[d].getValue("text"),"text");e.setLinkedRecords(g,"poll_options")},v=function(a,b,c){c=(c=c.overlay)==null?void 0:(c=c.poll)==null?void 0:c.id;if(c===null)return;p(b,{mutation:w,optimisticUpdater:function(b){return u(b,a)},variables:{input:{option:a.optionIndex,story_card_poll_id:c}}})},w=g!==void 0?g:g=b("StoriesPollStickerMutation.graphql");e.exports=d(a,{overlay:h!==void 0?h:h=b("StoriesPollSticker_overlay.graphql"),owner:i!==void 0?i:i=b("StoriesPollSticker_owner.graphql"),story:j!==void 0?j:j=b("StoriesPollSticker_story.graphql")})}),null);
__d("ReactionStickerKeyframe.react",["Keyframes.react","React","StoriesRelay","emptyFunction","stylex","ReactionStickerKeyframe_overlay.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("StoriesRelay").createFragmentContainer;b("StoriesRelay").graphql;function a(a){__p&&__p();var c,d,e=function(f){__p&&__p();var g,h={height:0,key:"",keyframe_uri:"",onRepeatEnd:b("emptyFunction"),repeatCount:1,type:"AFFORDANCE",width:0,x:0,y:0};g=(g=a.overlay)==null?void 0:(g=g.reaction_sticker)==null?void 0:(g=g.sticker_asset)==null?void 0:g.sticker_animation_assets;if(!g)return null;g=(g=g.find(function(a){return f===a.type}))==null?void 0:g.asset;if(!g)return null;g=g;var i=g.initial_state_bounds;g=g.keyframe_uri;if(!i)return null;var c=i.height,d=i.width,e=i.x;i=i.y;if(typeof d!=="number"||typeof c!=="number"||typeof e!=="number"||typeof i!=="number"||typeof g!=="string")return null;h.width=d;h.height=c;h.x=e;h.y=i;h.keyframe_uri=g;h.key=a.uniqueKey;h.type=a.type;f==="TAP"&&(h.repeatCount=1,h.onRepeatEnd=function(){a.tapOnReaptEnd(a.uniqueKey)});f==="AFFORDANCE"&&(h.repeatCount=Infinity,h.onRepeatEnd=b("emptyFunction"));return h};e=e(a.type);if(!e)return null;var f=e.height,g=e.key,h=e.keyframe_uri,i=e.onRepeatEnd,j=e.repeatCount,k=e.width,l=e.x,m=e.y,n=a.containerHeight,o=a.containerWidth,p=a.overlay;c=p==null?void 0:(c=p.bounds)==null?void 0:c.width;d=p==null?void 0:(d=p.bounds)==null?void 0:d.height;if(p==null||typeof c!=="number"||typeof d!=="number")return null;p=c*o;var q=d*n;n=n*d/q;d=o*c/p;o=q/f;c=p/k;q={left:"-"+l*c+"px",position:"absolute",top:"-"+m*o+"px",transform:"scaleY("+n+") scaleX("+d+")"};return b("React").jsx(b("Keyframes.react"),{assetName:"reaction_sticker",className:e.type==="TAP"?"pmk7jnqg hzruof5a":"",height:o,onRepeatEnd:i,projectName:"facebook_stories",repeatCount:j,source:h,style:q,width:c},g)}e.exports=c(a,{overlay:g!==void 0?g:g=b("ReactionStickerKeyframe_overlay.graphql")})}),null);
__d("StoriesReactionSticker.react",["FBLogger","React","ReactionStickerKeyframe.react","StoriesCardOverlayPositioner.react","StoriesEnums","StoriesPauseReasons","StoriesRelay","StoriesUniqueID","stylex","StoriesReactionStickerMutation.graphql","StoriesReactionSticker_overlay.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h,i=b("React").useRef,j=b("React").useState,k=b("StoriesEnums").STORY_REACTION_STICKERS_CONSTANTS,l=(c=b("StoriesRelay")).commitMutation;c.graphql;var m=c.useRelayEnvironment;d=c.createFragmentContainer;function n(a,b){var c=Date.now();return function(){c+b-Date.now()<0&&(a(),c=Date.now())}}function a(a){__p&&__p();var c=m(),d=j([{key:"",type:"AFFORDANCE"}]),e=d[0],f=d[1],g=i(null),h=i(null),p=i(0);d=n(function(){a.setPause(!0,b("StoriesPauseReasons").CLICK_ON_OVERLAY_STICKER),p.current+=1,u(),s(),g.current=window.setTimeout(function(){r()},k.HOLD_DELAY)},k.ANIMATIONS_INTERVAL_THROTTLE);var q=function(c){f(function(d){d=d.filter(function(a){return a.key!==c});d.length<2&&a.setPause(!1,b("StoriesPauseReasons").CLICK_ON_OVERLAY_STICKER);return d})},r=function a(){p.current+=1,u(),h.current=window.setTimeout(function(){s(),a()},k.ANIMATIONS_INTERVAL_THROTTLE)},s=function(){f(function(a){return[].concat(a,[{key:b("StoriesUniqueID")(),type:"TAP"}])})},t=function(){window.clearTimeout(g.current),window.clearTimeout(h.current)},u=function(){var d;d=(d=a.overlay)==null?void 0:(d=d.reaction_sticker)==null?void 0:d.id;var e=a.logger;if(d===null)return;l(c,{mutation:o,onCompleted:function(a,b){e.replyAttemptCompletedLog("reaction_sticker_react",b==null?null:b[0])},onError:function(a){e.replyAttemptCompletedLog("reaction_sticker_react",a),b("FBLogger")("fbstories").catching(a).warn("Error interacting reaction stickers. ")},variables:{input:{client_mutation_id:b("StoriesUniqueID")(),count:p.current,story_card_reaction_sticker_id:d}}})},v=a.containerHeight,w=a.containerWidth,x=a.overlay,y=x==null?void 0:x.bounds;return y==null?null:b("React").jsx(b("StoriesCardOverlayPositioner.react"),{bounds:y,containerHeight:v,containerWidth:w,children:b("React").jsx("div",{className:"k4urcfbm fi2e5rcv pmk7jnqg oqq733wu datstx6m nhd2j8a9",onMouseDown:d,onMouseLeave:t,onMouseUp:t,children:e.map(function(a,c){return b("React").jsx(b("ReactionStickerKeyframe.react"),{containerHeight:v,containerWidth:w,overlay:x,tapOnReaptEnd:q,type:a.type,uniqueKey:a.key},a.key)})})})}var o=g!==void 0?g:g=b("StoriesReactionStickerMutation.graphql");e.exports=d(a,{overlay:h!==void 0?h:h=b("StoriesReactionSticker_overlay.graphql")})}),null);
__d("StoriesTagSticker.react",["fbt","CometLink.react","CometTooltip.react","React","StoriesCardOverlayPositioner.react","StoriesEnums","StoriesPauseReasons","StoriesRelay","stylex","StoriesTagSticker_overlay.graphql"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("StoriesEnums").TAG_STICKER_TYPES;a=b("StoriesRelay").createFragmentContainer;b("StoriesRelay").graphql;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){d.props.setPause(!0,b("StoriesPauseReasons").HOVER_ON_OVERLAY_STICKER)},d.$2=function(a){d.props.setPause(!1,b("StoriesPauseReasons").HOVER_ON_OVERLAY_STICKER)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){__p&&__p();var a=this.props,c=a.containerHeight,d=a.containerWidth;a=a.overlay;var e=a==null?void 0:a.type,f=a==null?void 0:a.profile_action_link,h=a==null?void 0:a.bounds;if(a==null||e==null||f==null||h==null)return null;a=[i.LOCATION,i.PAGE,i.PEOPLE,i.PRODUCT];if(!a.includes(e))return null;a=function(){switch(e){case i.LOCATION:return g._("See Location");case i.PAGE:return g._("See Profile");case i.PEOPLE:return g._("See Profile");case i.PRODUCT:return g._("See Product");default:return}};var j=function(){switch(e){case i.LOCATION:return g._("Link");case i.PAGE:return g._("Link");case i.PEOPLE:return g._("Link");case i.PRODUCT:return g._("Link");default:return}};a=a();j=j();return b("React").jsx(b("StoriesCardOverlayPositioner.react"),{bounds:h,containerHeight:c,containerWidth:d,children:b("React").jsx(b("CometTooltip.react"),{align:"middle",position:"above",tooltip:a,children:b("React").jsx(b("CometLink.react"),{"aria-label":j,href:f,target:"_blank",children:b("React").jsx("div",{className:"k4urcfbm fi2e5rcv pmk7jnqg oqq733wu datstx6m nhd2j8a9",onMouseEnter:this.$1,onMouseLeave:this.$2})})})})};return c}(b("React").PureComponent);e.exports=a(c,{overlay:h!==void 0?h:h=b("StoriesTagSticker_overlay.graphql")})}),null);
__d("StoriesMediaStoreActionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:StoriesMediaStoreActionsLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:StoriesMediaStoreActionsLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:StoriesMediaStoreActionsLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setActiveStoriesCount=function(a){this.$1.active_stories_count=a;return this};c.setArchiveSavingModeLastModifiedTime=function(a){this.$1.archive_saving_mode_last_modified_time=a;return this};c.setButtonName=function(a){this.$1.button_name=a;return this};c.setCameraSystemMediaAttributes=function(a){this.$1.camera_system_media_attributes=b("GeneratedLoggerUtils").serializeMap(a);return this};c.setClientArchiveID=function(a){this.$1.client_archive_id=a;return this};c.setDialogName=function(a){this.$1.dialog_name=a;return this};c.setDialogOptionName=function(a){this.$1.dialog_option_name=a;return this};c.setEntryPoint=function(a){this.$1.entry_point=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setEventSpecificExtraData=function(a){this.$1.event_specific_extra_data=b("GeneratedLoggerUtils").serializeMap(a);return this};c.setEventType=function(a){this.$1.event_type=a;return this};c.setGalleryTab=function(a){this.$1.gallery_tab=a;return this};c.setMediaContentID=function(a){this.$1.media_content_id=a;return this};c.setMediaFbid=function(a){this.$1.media_fbid=a;return this};c.setNetworkQueryName=function(a){this.$1.network_query_name=a;return this};c.setProductName=function(a){this.$1.product_name=a;return this};c.setReason=function(a){this.$1.reason=a;return this};c.setSavedPhotosUseCase=function(a){this.$1.saved_photos_use_case=a;return this};c.setSavingDestinations=function(a){this.$1.saving_destinations=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setServerOriginalMediaFbid=function(a){this.$1.server_original_media_fbid=a;return this};c.setServerOriginalStoryCardFbid=function(a){this.$1.server_original_story_card_fbid=a;return this};c.setServerOriginalUploadedVideoFbid=function(a){this.$1.server_original_uploaded_video_fbid=a;return this};c.setSessionDurationMs=function(a){this.$1.session_duration_ms=a;return this};c.setSessionIdsMap=function(a){this.$1.session_ids_map=b("GeneratedLoggerUtils").serializeMap(a);return this};c.setSessionStartReasonsMap=function(a){this.$1.session_start_reasons_map=b("GeneratedLoggerUtils").serializeMap(a);return this};c.setStoryCardFbid=function(a){this.$1.story_card_fbid=a;return this};c.setStoryCardType=function(a){this.$1.story_card_type=a;return this};c.setSurface=function(a){this.$1.surface=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={active_stories_count:!0,archive_saving_mode_last_modified_time:!0,button_name:!0,camera_system_media_attributes:!0,client_archive_id:!0,dialog_name:!0,dialog_option_name:!0,entry_point:!0,event:!0,event_specific_extra_data:!0,event_type:!0,gallery_tab:!0,media_content_id:!0,media_fbid:!0,network_query_name:!0,product_name:!0,reason:!0,saved_photos_use_case:!0,saving_destinations:!0,server_original_media_fbid:!0,server_original_story_card_fbid:!0,server_original_uploaded_video_fbid:!0,session_duration_ms:!0,session_ids_map:!0,session_start_reasons_map:!0,story_card_fbid:!0,story_card_type:!0,surface:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("FBStoriesArchiveLoggingHelper",["CurrentUser","DeleteMediaAttemptedFalcoEvent","FBStoriesLoggingConstants","OpenMediaFalcoEvent","OpenSeenSummaryFalcoEvent","StoriesLoggerSession","StoriesMediaStoreActionsTypedLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={deleteStoryCardLog:function(a,c){b("DeleteMediaAttemptedFalcoEvent").log(function(){return{thread_id:a,media_id:c,story_owner:b("CurrentUser").getID(),source:b("FBStoriesLoggingConstants").SOURCES.ARCHIVE}})},selectMediaLog:function(a,b){g._archiveEventLog(a,b,"select_media")},openMediaInComposerLog:function(a,b){g._archiveEventLog(a,b,"open_media_in_camera")},_archiveEventLog:function(a,c,d){new(b("StoriesMediaStoreActionsTypedLogger"))().setProductName("stories_archive").setEvent(d).setStoryCardFbid(a).setMediaFbid(c).setEventType("client").log()},openSeenSummaryLog:function(a,c){b("OpenSeenSummaryFalcoEvent").log(function(){return{thread_id:a,media_id:c,story_owner:b("CurrentUser").getID(),source:b("FBStoriesLoggingConstants").SOURCES.ARCHIVE,viewer_session_id:b("StoriesLoggerSession").getViewerSessionID()}})},openMediaLog:function(a,c){b("OpenMediaFalcoEvent").log(function(){return{thread_id:a,media_id:c,story_owner:b("CurrentUser").getID(),source:b("FBStoriesLoggingConstants").SOURCES.ARCHIVE,viewer_session_id:b("StoriesLoggerSession").getViewerSessionID()}})}};e.exports=g}),null);
__d("XReactSproutComposerShareMediaFromArchiveDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/react_composer/share_from_archive/dialog/",{extraConfig:{type:"StringToStringMap"},loggingName:{type:"Enum",enumType:1},taggerType:{type:"Enum",enumType:1},archivedStoryCardIDs:{type:"FBIDSet"},__asyncDialog:{type:"Int"}})}),null);