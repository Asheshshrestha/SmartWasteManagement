if (self.CavalryLogger) { CavalryLogger.start_js(["A43vf"]); }

__d("TagEventSproutConsts",[],(function(a,b,c,d,e,f){e.exports={composer_action_id:"668012816568345"}}),null);
__d("TagEventSproutEventPickerRelaySearchSourceQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"query",type:"String",defaultValue:null},{kind:"LocalArgument",name:"limit",type:"Int",defaultValue:null},{kind:"LocalArgument",name:"verb",type:"ID",defaultValue:null}],b=[{kind:"Variable",name:"first",variableName:"limit"},{kind:"Literal",name:"object_type",value:["ENTITY"]},{kind:"Variable",name:"query_string",variableName:"query"},{kind:"Literal",name:"query_type",value:"OBJECT_PER_VERB"},{kind:"Variable",name:"verb",variableName:"verb"}],c={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},d={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},e={kind:"LinkedField",alias:null,name:"profile_picture",storageKey:"profile_picture(height:32,width:32)",args:[{kind:"Literal",name:"height",value:32},{kind:"Literal",name:"width",value:32}],concreteType:"Image",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}]},f={kind:"ScalarField",alias:null,name:"capitalized_day_time_sentence",args:null,storageKey:null},g={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"TagEventSproutEventPickerRelaySearchSourceQuery",type:"Query",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"minutiae_suggestions",storageKey:null,args:b,concreteType:"MinutiaeSuggestionsConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"MinutiaeSuggestionsEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"MinutiaeSuggestion",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"object",storageKey:null,args:null,concreteType:null,plural:!1,selections:[{kind:"InlineFragment",type:"Event",selections:[c,d,e,{kind:"LinkedField",alias:null,name:"event_place",storageKey:null,args:null,concreteType:null,plural:!1,selections:[d]},f]}]}]}]}]}]}]},operation:{kind:"Operation",name:"TagEventSproutEventPickerRelaySearchSourceQuery",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"minutiae_suggestions",storageKey:null,args:b,concreteType:"MinutiaeSuggestionsConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"MinutiaeSuggestionsEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"MinutiaeSuggestion",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"object",storageKey:null,args:null,concreteType:null,plural:!1,selections:[g,c,{kind:"InlineFragment",type:"Event",selections:[d,e,{kind:"LinkedField",alias:null,name:"event_place",storageKey:null,args:null,concreteType:null,plural:!1,selections:[g,d,c]},f]}]}]}]}]}]}]},params:{operationKind:"query",name:"TagEventSproutEventPickerRelaySearchSourceQuery",id:"1649096801872944",text:null,metadata:{}}}}();e.exports=a}),null);
__d("ComposerTagEventTypeahead.react",["cx","fbt","React","ReactComposerTaggerPresenter","ReactComposerTaggerViewStyles","XUITypeahead.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){__p&&__p();var c;c=a.call(this,b)||this;c.$1=function(a){c.setState({query:a.target.value})};c.$2=function(a){var b=c.$7();b.event=a;c.setState({query:a.getTitle()});c.props.onSelect(b)};c.$4=function(){c.$8(),c.setState({query:""})};c.$3=function(a){c.state.query===a.target.value&&c.$8()};c.state={query:b.taggerData.event?b.taggerData.event.getTitle():""};return c}var d=c.prototype;d.componentDidMount=function(){this.refs.typeahead&&this.refs.typeahead.focusInput()};d.render=function(){return b("React").jsx(b("XUITypeahead.react"),{autoHighlight:!0,className:"_5esx _4zdz",clearable:!0,focusedOnInit:this.props.autoFocus,highlightOnSelect:!0,onChange:this.$1,onSelectAttempt:this.$2,showEntriesOnFocus:!0,placeholder:h._("What event do you want to tag?"),onBackspace:this.$3,onClear:this.$4,queryString:this.state.query,ref:"typeahead",searchSource:this.$5(),tallInput:!1,selectedEntry:this.props.taggerData.event,initialEntry:this.props.taggerData.event,presenter:this.$6()})};d.$7=function(){return Object.assign({},this.props.taggerData)};d.$5=function(){return this.state.query?this.props.userInputEventsSearchSource:this.props.nearByEventsSearchSource};d.$6=function(){var a={taggerViewStyle:b("ReactComposerTaggerViewStyles").SCROLLABLE};return Object.assign({},b("ReactComposerTaggerPresenter"),{layerPosition:this.props.layerPosition||void 0,extraRendererProps:a,maxEntries:15})};d.$8=function(){var a=this.$7();a.event=null;a.eventID=null;this.props.onSelect(a)};return c}(b("React").Component);e.exports=a}),null);
__d("ReactComposerTagEventTaggerComponent.react",["cx","fbt","Grid.react","React","ComposerTagEventTypeahead.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("Grid.react").GridItem;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a;return(a=b("React")).jsxs(b("Grid.react"),{className:"_5esl",cols:2,children:[a.jsx(i,{className:"_5esm",children:h._("Attending...")},"label"),a.jsx(i,{className:"_5esw",children:a.jsx(b("ComposerTagEventTypeahead.react"),{autoFocus:this.props.autoFocus,onSelect:this.props.onSelect,nearByEventsSearchSource:this.props.nearByEventsSearchSource,taggerData:this.props.taggerData,userInputEventsSearchSource:this.props.userInputEventsSearchSource})},"tokenizer")]})};return c}(b("React").Component);e.exports=a}),null);
__d("TagEventSproutEventPickerRelaySearchSource",["AbstractRelaySearchSource","RelayFBEnvironment","RelayModern","SearchableEntry","TagEventSproutEventPickerRelaySearchSourceQuery.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("RelayModern").graphql;var h=20,i=668012816568345,j=g!==void 0?g:g=b("TagEventSproutEventPickerRelaySearchSourceQuery.graphql");function k(a){return{query:j,variables:{query:a,limit:h,verb:i}}}function l(a){a=(a=a)!=null?(a=a.viewer)!=null?(a=a.minutiae_suggestions)!=null?a.edges:a:a:a;return!a?[]:a.map(function(a,c){a=a.node.object;var d=c(a,function(a){return a.capitalized_day_time_sentence}),e=c(a,function(a){return a.event_place.name}),f="";e===null?f=d:d===null?f=e:f=[d,"\xb7",e].join(" ");return new(b("SearchableEntry"))({uniqueID:a.id,title:a.name,subtitle:f,photo:c(a,function(a){return a.profile_picture.uri})})})}var m=function(a,b){return b(a)};a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c={bootstrapRequests:[{gen:function(a){return k(a)}}],queryRequests:[{gen:function(a){return k(a)}}],packageFn:l,getAllForEmptyQuery:!0};return a.call(this,b("RelayFBEnvironment"),c,m)||this}return c}(b("AbstractRelaySearchSource"));e.exports=a}),null);
__d("XEventsTagEventTypeaheadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/events/tag_event_sprout/typeahead/",{media_latitude:{type:"Float"},media_longitude:{type:"Float"},media_taken_time:{type:"Int"},target_id:{type:"FBID"}})}),null);
__d("ReactComposerTagEventTaggerContainer.react",["React","ReactComposerMinutiaeAttachmentActions","ReactComposerTagEventTaggerComponent.react","ReactComposerTaggerActions","ReactComposerTaggerContainerStateMixin","ReactComposerTaggerHideOnEscapeKeyPress.react","TagEventSproutConsts","TagEventSproutEventPickerRelaySearchSource","WebAsyncSearchSource","XEventsTagEventTypeaheadController","areEqual","prop-types"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").createClass({displayName:"ReactComposerTagEventTaggerContainer",mixins:[b("ReactComposerTaggerContainerStateMixin")()],statics:{taggerID:"TAG_EVENT",loggingName:"tag_event",taggerComponent:b("ReactComposerTagEventTaggerComponent.react")},propTypes:{mediaLocation:(a=b("prop-types")).shape({latitude:a.number.isRequired,longitude:a.number.isRequired}),mediaTakenTime:a.number,isPersonalTimeline:a.bool},_nearByEventsSearchSource:null,_userInputEventsSearchSource:b("TagEventSproutEventPickerRelaySearchSource"),UNSAFE_componentWillMount:function(){this._initNearByEventsSearchSource(this.props),this._initUserInputEventsSearchSource()},UNSAFE_componentWillReceiveProps:function(a){(!(g||(g=b("areEqual")))(a.mediaLocation,this.props.mediaLocation)||!(g||(g=b("areEqual")))(a.mediaTakenTime,this.props.mediaTakenTime))&&this._initNearByEventsSearchSource(a)},render:function(){return!this.state.isSelected?null:b("React").jsx("div",{"data-testid":"tag-event-tagger-component",children:b("React").jsx(b("ReactComposerTaggerHideOnEscapeKeyPress.react"),{shouldHideOnEscape:this.state.isSelected,children:b("React").jsx(b("ReactComposerTagEventTaggerComponent.react"),{autoFocus:this.state.focusedOnInit,nearByEventsSearchSource:this._nearByEventsSearchSource,onSelect:this._onSelect,taggerData:this.state.taggerData,userInputEventsSearchSource:this._userInputEventsSearchSource})})})},_initNearByEventsSearchSource:function(a){a=b("XEventsTagEventTypeaheadController").getURIBuilder().setFloat("media_latitude",(a.mediaLocation||{}).latitude).setFloat("media_longitude",(a.mediaLocation||{}).longitude).setInt("media_taken_time",a.mediaTakenTime?a.mediaTakenTime:null).setFBID("target_id",this.context.targetID).getURI();this._nearByEventsSearchSource=new(b("WebAsyncSearchSource"))({bootstrapRequests:[{uri:a}],getAllForEmptyQuery:!0,queryRequests:[{uri:a}]})},_initUserInputEventsSearchSource:function(){this._userInputEventsSearchSource=new(b("TagEventSproutEventPickerRelaySearchSource"))()},_onSelect:function(a){var c=this._getCopyOfData();a&&a.mediaTakenTime&&(c.mediaTakenTime=a.mediaTakenTime);a&&a.event?(c.eventID=a.event.getUniqueID(),c.event=a.event,b("ReactComposerTaggerActions").deselectCurrentTagger(this.context.composerID,"tag_event"),b("ReactComposerMinutiaeAttachmentActions").fetchMinutiaeAttachment(this.context.composerID,b("TagEventSproutConsts").composer_action_id,c.eventID,this.context.targetID,this.context.actorID,!!this.props.isPersonalTimeline)):(c.eventID=null,c.event=null,b("ReactComposerMinutiaeAttachmentActions").setMarkup(this.context.composerID,null));b("ReactComposerTaggerActions").setTaggerData(this.context.composerID,"tag_event","TAG_EVENT",c)},_getCopyOfData:function(){return Object.assign({},this.state.taggerdata)}});e.exports=c}),null);